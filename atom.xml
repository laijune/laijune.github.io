<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Xiaolai Blog</title>
  
  
  <link href="https://laijune.github.io/atom.xml" rel="self"/>
  
  <link href="https://laijune.github.io/"/>
  <updated>2023-02-07T12:09:12.966Z</updated>
  <id>https://laijune.github.io/</id>
  
  <author>
    <name>imlai</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>云运维</title>
    <link href="https://laijune.github.io/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/"/>
    <id>https://laijune.github.io/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/</id>
    <published>2023-02-01T12:00:01.000Z</published>
    <updated>2023-02-07T12:09:12.966Z</updated>
    
    <content type="html"><![CDATA[<h1 id="腾讯云运维概述"><a href="#腾讯云运维概述" class="headerlink" title="腾讯云运维概述"></a>腾讯云运维概述</h1><h2 id="腾讯云产品概览"><a href="#腾讯云产品概览" class="headerlink" title="腾讯云产品概览"></a>腾讯云产品概览</h2><h3 id="腾讯云产品全景图"><a href="#腾讯云产品全景图" class="headerlink" title="腾讯云产品全景图"></a>腾讯云产品全景图</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152147183.png" alt="image-20230108152147183" style="zoom: 50%;"><span id="more"></span><h3 id="腾讯云产品概览-1"><a href="#腾讯云产品概览-1" class="headerlink" title="腾讯云产品概览"></a>腾讯云产品概览</h3><h4 id="云服务器"><a href="#云服务器" class="headerlink" title="云服务器"></a>云服务器</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152247476.png" alt="image-20230108152247476" style="zoom: 50%;"><h4 id="云网络"><a href="#云网络" class="headerlink" title="云网络"></a>云网络</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152359439.png" alt="image-20230108152359439" style="zoom: 40%;"><h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h4><ul><li>多协议转发<ul><li>四层负载均衡（包含 TCP 协议和 UDP 协议）</li><li>七层负载均衡（包含 HTTP 协议和 HTTPS协议）</li></ul></li><li>流量分配算法<ul><li>加权轮询算法</li><li>加权最小连接数算法</li><li>源地址散列调度算法</li></ul></li><li>跨可用区容灾<ul><li>在同一个地域内采用多可用区部署</li></ul></li></ul><h4 id="私有网络"><a href="#私有网络" class="headerlink" title="私有网络"></a>私有网络</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152643786.png" alt="image-20230108152643786" style="zoom:50%;"><h4 id="NAT网关"><a href="#NAT网关" class="headerlink" title="NAT网关"></a>NAT网关</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152705981.png" alt="image-20230108152705981" style="zoom:50%;"><ul><li>SNAT 转发</li><li>高性能转发</li><li>自动容灾</li><li>监控告警</li></ul><h4 id="VPN连接"><a href="#VPN连接" class="headerlink" title="VPN连接"></a>VPN连接</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152757967.png" alt="image-20230108152757967" style="zoom:50%;"><ul><li>安全可靠地通信</li><li>快速部署弹性服务</li><li>监控告警</li></ul><h4 id="云存储"><a href="#云存储" class="headerlink" title="云存储"></a>云存储</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152852999.png" alt="image-20230108152852999" style="zoom:50%;"><h4 id="文件存储"><a href="#文件存储" class="headerlink" title="文件存储"></a>文件存储</h4><ul><li>文件存储 CFS 应用：<ul><li>企业文件共享</li><li>高性能计算及大数据分析</li><li>流媒体处理</li><li>内容管理和 Web 服务</li><li>专用软件环境</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108153028984.png" alt="image-20230108153028984" style="zoom:50%;"><h4 id="对象存储"><a href="#对象存储" class="headerlink" title="对象存储"></a>对象存储</h4><ul><li>COS主要存储非结构化数据，如视频、音频、图片、文件等。</li><li>应用场景：应用数据存储、数据处理、内容分发及大数据分析、容灾与备份等</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108153125793.png" alt="image-20230108153125793" style="zoom:50%;"><h4 id="存储网关"><a href="#存储网关" class="headerlink" title="存储网关"></a>存储网关</h4><ul><li>云存储网关支持将公有云存储作为传统设备，即插即用，无需改动企业现行IT架构即可实现公有云的接入。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108153206663.png" alt="image-20230108153206663" style="zoom:50%;"><h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160332148.png" alt="image-20230108160332148" style="zoom:50%;"><h4 id="CDB-数据库"><a href="#CDB-数据库" class="headerlink" title="CDB 数据库"></a>CDB 数据库</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160418877.png" alt="image-20230108160418877" style="zoom:50%;"><p>主要包括：</p><ul><li>云数据库 MySQL</li><li>云数据库 SQL Server</li><li>云数据库 MariaDB</li><li>云数据库 PostgreSQL</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160504427.png" alt="image-20230108160504427" style="zoom:50%;"><h4 id="弹性缓存"><a href="#弹性缓存" class="headerlink" title="弹性缓存"></a>弹性缓存</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160523775.png" alt="image-20230108160523775" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160555251.png" alt="image-20230108160555251" style="zoom:50%;"><h4 id="云安全"><a href="#云安全" class="headerlink" title="云安全"></a>云安全</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160618761.png" alt="image-20230108160618761" style="zoom:50%;"><p>DDoS 防护</p><ul><li>海量终端覆盖—腾讯云掌握 DDoS 攻击的整个黑色产业链</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160702366.png" alt="image-20230108160702366" style="zoom: 67%;"><h4 id="主机安全"><a href="#主机安全" class="headerlink" title="主机安全"></a>主机安全</h4><ul><li>基于“云+端”的主机安全防护产品</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160803585.png" alt="image-20230108160803585" style="zoom:50%;"><h4 id="Web-应用防火墙"><a href="#Web-应用防火墙" class="headerlink" title="Web 应用防火墙"></a>Web 应用防火墙</h4><ul><li>Web 应用防火墙为企业提供一站式智能防护平台</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160844197.png" alt="image-20230108160844197" style="zoom:50%;"><h4 id="活动防刷"><a href="#活动防刷" class="headerlink" title="活动防刷"></a>活动防刷</h4><ul><li>活动防刷技术原理</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108160938005.png" alt="image-20230108160938005" style="zoom:50%;"><h2 id="认识腾讯云控制台"><a href="#认识腾讯云控制台" class="headerlink" title="认识腾讯云控制台"></a>认识腾讯云控制台</h2><h3 id="腾讯云平台操作流程"><a href="#腾讯云平台操作流程" class="headerlink" title="腾讯云平台操作流程"></a>腾讯云平台操作流程</h3><p><strong>任务目标</strong></p><p>​    本章节主要任务是掌握如何登录腾讯云控制台，并进行实名认证。熟悉腾讯云控制台的功能地图和腾讯云控制台上的常用功能。</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108161225230.png" alt="image-20230108161225230" style="zoom:50%;"><h3 id="登录及实名认证"><a href="#登录及实名认证" class="headerlink" title="登录及实名认证"></a>登录及实名认证</h3><ul><li><strong>腾讯云官网</strong><ul><li><a href="https://cloud.tencent.com/">https://cloud.tencent.com/</a></li></ul></li><li><strong>腾讯云注册方式：</strong><ul><li>微信扫码快速注册</li><li>邮箱注册</li><li>QQ注册</li><li>微信公众号注册</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108161358915.png" alt="image-20230108161358915" style="zoom: 60%;"><ul><li><strong>登录腾讯云</strong></li><li>登录腾讯云方式：<ul><li>微信扫码登录</li><li>邮箱登录</li><li>QQ登录</li><li>微信公众号登录</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108161703983.png" alt="image-20230108161703983" style="zoom:50%;"><ul><li><strong>腾讯云实名认证</strong><ul><li>腾讯云实名认证分为个人实名认证和企业实名认证。</li><li>个人实名认证的免费套餐包含多款适合个人用户的热门产品和长期免费云产品。</li></ul></li><li>个人实名认证</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108161905444.png" alt="image-20230108161905444" style="zoom: 50%;"><ul><li><strong>腾讯云实名认证</strong><ul><li>企业认证免费套餐包含适合企业应用的多款热门产品和长期免费云产品。</li></ul></li><li>企业实名认证</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108161952973.png" alt="image-20230108161952973" style="zoom:50%;"><ul><li><strong>完成实名认证并领取 CVM</strong><ul><li>实验：完成腾讯云账号的注册并且完成实名认证，可通过微信腾讯云助手免费领取一台云服务器。</li></ul></li></ul><h3 id="腾讯云管理控制台"><a href="#腾讯云管理控制台" class="headerlink" title="腾讯云管理控制台"></a>腾讯云管理控制台</h3><ul><li>打开腾讯云控制台，查看腾讯云控制台的功能地图。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108162110641.png" alt="image-20230108162110641" style="zoom:50%;"><ul><li><strong>可用余额</strong></li><li>查看功能<ul><li>可用余额</li><li>收支明细</li><li>代金券</li></ul></li><li>操作功能<ul><li>充值</li><li>开发票</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108162208123.png" alt="image-20230108162208123" style="zoom:50%;"><ul><li><strong>待恢复问题</strong></li><li>云监控告警<ul><li>告警列表</li><li>告警策略</li><li>自定义消息</li></ul></li><li>云主机安全<ul><li>入侵检测</li><li>漏洞管理</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108162254785.png" alt="image-20230108162254785" style="zoom: 67%;"><h3 id="移动端登录控制台"><a href="#移动端登录控制台" class="headerlink" title="移动端登录控制台"></a>移动端登录控制台</h3><ul><li><strong>微信中关注“腾讯云助手”公众号</strong><ul><li>查看帮助文档和社区技术资料、</li><li>进入“腾讯云助手”小程序</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108162404474.png" alt="image-20230108162404474" style="zoom:50%;"><ul><li><strong>通过“腾讯云助手”小程序管理云服务</strong><ul><li>监控云资源的状态；</li><li>查看云资源配置；</li><li>查看告警信息；</li><li>查看费用明细；</li><li>进行“启动”“关机”等简单操作；</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108162458719.png" alt="image-20230108162458719" style="zoom:67%;"><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了：<ul><li>云服务器、网络、存储、数据库和安全等产品的功能和优势</li><li>如何登录腾讯云控制台，并进行实名认证</li><li>腾讯云控制台的功能地图和腾讯云控制台上的常用功能</li></ul></li></ul><h1 id="安全访问腾讯服务"><a href="#安全访问腾讯服务" class="headerlink" title="安全访问腾讯服务"></a>安全访问腾讯服务</h1><h2 id="云服务器安全管理"><a href="#云服务器安全管理" class="headerlink" title="云服务器安全管理"></a>云服务器安全管理</h2><h3 id="安全组简介"><a href="#安全组简介" class="headerlink" title="安全组简介"></a>安全组简介</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108162759533.png" alt="image-20230108162759533" style="zoom:50%;"><h4 id="安全组概述"><a href="#安全组概述" class="headerlink" title="安全组概述"></a>安全组概述</h4><ul><li>概念：<ul><li>安全组是一种虚拟防火墙</li></ul></li><li>作用：<ul><li>用于设置云服务器、负载均衡、云数据库等实例的网络访问控制</li></ul></li><li>特点：<ul><li>安全组是一个逻辑的分组</li><li>关联了同一安全组的实例不会默认互通</li><li>安全组是有状态的</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108162917810.png" alt="image-20230108162917810" style="zoom:50%;"><h4 id="安全组配置的必要性"><a href="#安全组配置的必要性" class="headerlink" title="安全组配置的必要性"></a>安全组配置的必要性</h4><ul><li>安全组设置不正确，会导致一定的安全隐患：<ul><li>远程桌面登录失败</li><li>无法正常进行 Ping 测试</li><li>无法正常访问 Internet 服务</li></ul></li><li>解决方案<ul><li>检查 CVM 挂载的安全组</li><li>重新配置安全组规则</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108163717958.png" alt="image-20230108163717958" style="zoom:50%;"><h4 id="安全组与网络-ACL-区别"><a href="#安全组与网络-ACL-区别" class="headerlink" title="安全组与网络 ACL 区别"></a>安全组与网络 ACL 区别</h4><ul><li>安全组与网络 ACL 区别</li></ul><table><thead><tr><th><strong>安全组</strong></th><th><strong>网络 ACL</strong></th></tr></thead><tbody><tr><td>CVM实例级别的流量控制（第一防御层）</td><td>子网级别的流量控制（第二防御层）</td></tr><tr><td>支持允许规则和拒绝规则</td><td>支持允许规则和拒绝规则</td></tr><tr><td>有状态：返回数据流会被自动允许，不受任何规则的影响</td><td>无状态：返回数据流必须被规则明确允许</td></tr><tr><td>只有在创建云服务器、云数据库等实例时指定安全组，或实例创建后再关联安全组，规则才会被应用到实例</td><td>自动应用到关联子网内的所有云服务器实例，若云服务器实例已绑定安全组，此处可以做备份防御</td></tr></tbody></table><h3 id="安全组管理"><a href="#安全组管理" class="headerlink" title="安全组管理"></a>安全组管理</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108163811483.png" alt="image-20230108163811483" style="zoom:50%;"><h4 id="安全组新建"><a href="#安全组新建" class="headerlink" title="安全组新建"></a>安全组新建</h4><ul><li>新建安全组的流程</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108163836322.png" alt="image-20230108163836322" style="zoom:50%;"><ul><li>安全组支持自定义创建和模板创建</li><li>腾讯云提供两种安全模板<ul><li>放通全部端口模板</li><li>放通常用端口模板：包括22、80、443、3389端口和ICMP协议、放通内网</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108163925452.png" alt="image-20230108163925452" style="zoom: 67%;"><ul><li>安全组新建—规则</li><li>允许到达与安全组相关联的实例的入站流量</li><li>允许离开实例的出站流量</li><li>绑定一个无规则的安全组时拒绝所有流量</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164130447.png" alt="image-20230108164130447" style="zoom:80%;"><h4 id="安全组管理-1"><a href="#安全组管理-1" class="headerlink" title="安全组管理"></a>安全组管理</h4><ul><li>安全组优先级：<ul><li>实例绑定多个安全组时的优先级为：数字越小，优先级越高</li><li>安全组内规则的优先级为：位置越上，优先级越高</li><li>实例绑定安全组时，如果该安全组内无任何规则，将默认拒绝所有流量</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164219720.png" alt="image-20230108164219720" style="zoom:67%;"><ul><li>安全组限制<ul><li>CVM 只能与相同地域、相同项目中的安全组进行绑定</li><li>安全组详细限制信息：</li></ul></li></ul><table><thead><tr><th>功能描述</th><th>数量</th></tr></thead><tbody><tr><td>安全组</td><td>50 个/地域</td></tr><tr><td>访问策略</td><td>100 条/入站方向  100 条/出站方向</td></tr><tr><td>实例关联安全组个数</td><td>无限制</td></tr><tr><td>安全组内实例的个数</td><td>无限制</td></tr></tbody></table><h4 id="配置管理安全组"><a href="#配置管理安全组" class="headerlink" title="配置管理安全组"></a>配置管理安全组</h4><ul><li>创建安全组</li><li>向安全组添加规则</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164326515.png" alt="image-20230108164326515" style="zoom:50%;"><ul><li>配置实例关联安全组</li><li>导入安全组规则</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164357077.png" alt="image-20230108164357077" style="zoom:50%;"><ul><li>克隆安全组</li><li>删除安全组</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164425192.png" alt="image-20230108164425192" style="zoom:50%;"><h3 id="加密登录方式简介"><a href="#加密登录方式简介" class="headerlink" title="加密登录方式简介"></a>加密登录方式简介</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164433214.png" alt="image-20230108164433214" style="zoom:50%;"><h4 id="加密登录方式"><a href="#加密登录方式" class="headerlink" title="加密登录方式"></a>加密登录方式</h4><ul><li>为保证实例的安全可靠，腾讯云提供两种加密登录方式：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164456351.png" alt="image-20230108164456351" style="zoom:50%;"><h4 id="密码登录介绍"><a href="#密码登录介绍" class="headerlink" title="密码登录介绍"></a>密码登录介绍</h4><ul><li><p>密码是每台云服务器实例专有的登录凭据</p></li><li><p>密码管理：</p><ul><li>设置初始密码</li><li>查看密码</li><li>重置密码</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164553613.png" alt="image-20230108164553613" style="zoom:50%;"><h4 id="SSH-密钥加密介绍"><a href="#SSH-密钥加密介绍" class="headerlink" title="SSH 密钥加密介绍"></a>SSH 密钥加密介绍</h4><ul><li>腾讯云允许使用公有密钥密码术加密和解密对于 Linux 实例的登录信息</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164656562.png" alt="image-20230108164656562" style="zoom:50%;"><ul><li>SSH 密钥管理：<ul><li>创建 SSH 密钥</li><li>密钥绑定/解绑服务器</li><li>修改 SSH 密钥名称/描述</li><li>删除 SSH 密钥</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108164741907.png" alt="image-20230108164741907" style="zoom: 80%;"><ul><li>远程登录软件登录Linux实例：<ul><li>安装 Windows 远程登录软件，此处选择PUTTY。</li><li>使用PUTTY连接 Linux 云服务器。</li><li>输入公网IP，选择SSH，点击“Open”。</li><li>在PUTTY会话窗口中，输入管理员帐号和密码。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170302355.png" alt="image-20230108170302355" style="zoom: 80%;"><h3 id="KMS-运维介绍"><a href="#KMS-运维介绍" class="headerlink" title="KMS 运维介绍"></a>KMS 运维介绍</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170337139.png" alt="image-20230108170337139" style="zoom:50%;"><h4 id="密钥管理系统概述"><a href="#密钥管理系统概述" class="headerlink" title="密钥管理系统概述"></a>密钥管理系统概述</h4><ul><li>腾讯云密钥管理系统<ul><li>简称 KMS，是一款安全管理类服务，可以创建和管理密钥，保护密钥的保密性、完整性和可用性</li><li>满足用户多应用多业务的密钥管理需求，符合监管和合规要求</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170452521.png" alt="image-20230108170452521" style="zoom:50%;"><h4 id="密钥管理系统使用场景"><a href="#密钥管理系统使用场景" class="headerlink" title="密钥管理系统使用场景"></a>密钥管理系统使用场景</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170510388.png" alt="image-20230108170510388" style="zoom:50%;"><h4 id="KMS-运维管理"><a href="#KMS-运维管理" class="headerlink" title="KMS 运维管理"></a>KMS 运维管理</h4><ul><li>KMS 运维管理流程</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170542378.png" alt="image-20230108170542378" style="zoom:50%;"><h5 id="创建密钥"><a href="#创建密钥" class="headerlink" title="创建密钥"></a>创建密钥</h5><ul><li>创建 KMS 密钥：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170636176.png" alt="image-20230108170636176" style="zoom:80%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170642039.png" alt="image-20230108170642039" style="zoom: 50%;"><h5 id="查看和修改密钥信息"><a href="#查看和修改密钥信息" class="headerlink" title="查看和修改密钥信息"></a>查看和修改密钥信息</h5><ul><li>查看和修改密钥信息：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170944294.png" alt="image-20230108170944294" style="zoom: 67%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108170955859.png" alt="image-20230108170955859" style="zoom:67%;"><h5 id="使用密钥加密数据"><a href="#使用密钥加密数据" class="headerlink" title="使用密钥加密数据"></a>使用密钥加密数据</h5><ul><li>使用 KMS 密钥加密证书文件</li><li>将证书文件中的密钥粘贴到在线工具中执行加密</li><li>下载加密后的密文</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108171055410.png" alt="image-20230108171055410" style="zoom:50%;"><h5 id="使用密钥解密数据"><a href="#使用密钥解密数据" class="headerlink" title="使用密钥解密数据"></a>使用密钥解密数据</h5><ul><li>使用KMS密钥解密证书文件</li><li>将密文粘贴到在线工具的解密窗口执行解密</li><li>下载解密后的明文</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108171219383.png" alt="image-20230108171219383" style="zoom:60%;"><h5 id="禁用和再启用密钥"><a href="#禁用和再启用密钥" class="headerlink" title="禁用和再启用密钥"></a>禁用和再启用密钥</h5><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108171334415.png" alt="image-20230108171334415" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108171530330.png" alt="image-20230108171530330" style="zoom:70%;"><h2 id="云服务器访问管理"><a href="#云服务器访问管理" class="headerlink" title="云服务器访问管理"></a>云服务器访问管理</h2><h3 id="访问管理介绍"><a href="#访问管理介绍" class="headerlink" title="访问管理介绍"></a>访问管理介绍</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108171641568.png" alt="image-20230108171641568" style="zoom:50%;"><h4 id="访问管理概述"><a href="#访问管理概述" class="headerlink" title="访问管理概述"></a>访问管理概述</h4><ul><li>CAM（Cloud Access Management）含义<ul><li>安全管理腾讯云账户下的资源的访问权限</li><li>通过身份管理和策略管理控制用户访问权限</li></ul></li><li>CAM 相关概念<ul><li>主账号</li><li>子账号（用户）和用户组</li><li>访问策略</li><li>资源</li><li>权限和策略</li></ul></li><li>CAM 功能<ul><li>管理访问权限</li><li>精细化的权限管理</li><li>联合身份</li><li>最终一致性</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108171837905.png" alt="image-20230108171837905" style="zoom:50%;"><h4 id="访问管理应用场景"><a href="#访问管理应用场景" class="headerlink" title="访问管理应用场景"></a>访问管理应用场景</h4><ul><li>针对资源的精细化访问控制<ul><li>企业子账号权限管理</li><li>企业内不同岗位的员工需要拥有该企业云资源的最小化访问权限</li></ul></li><li>企业目录单点登录腾讯云<ul><li>已具有腾讯云外部身份，并且这些用户需要访问腾讯云资源</li></ul></li><li>账户安全升级，使用二次身份校验<ul><li>需要给子用户提供在用户名和密码之外再额外增加的一层保护</li></ul></li></ul><h4 id="访问管理优势"><a href="#访问管理优势" class="headerlink" title="访问管理优势"></a>访问管理优势</h4><ul><li>传统的企业环境面临的风险点：<ul><li>密钥由多人共享，泄密风险高</li><li>无法限制其它人的访问权限，易产生误操作造成安全风险</li></ul></li></ul><table><thead><tr><th><strong>优势点</strong></th><th><strong>优势描述</strong></th></tr></thead><tbody><tr><td>分享</td><td>可以授权其他人管理和使用腾讯云账号中的资源，而无需直接把账号和密码共享给其他人。</td></tr><tr><td>精细化管理</td><td>对于不同的资源，可以授权给不同的人不同的权限。</td></tr><tr><td>免费使用</td><td>用户与权限管理，是腾讯云账号提供一个的功能特性，无需为此付费。</td></tr></tbody></table><h3 id="访问管理设置"><a href="#访问管理设置" class="headerlink" title="访问管理设置"></a>访问管理设置</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108172147275.png" alt="image-20230108172147275" style="zoom:50%;"><h4 id="用户管理概述"><a href="#用户管理概述" class="headerlink" title="用户管理概述"></a>用户管理概述</h4><ul><li>腾讯云主账号可通过用户管理功能对具有不同职责的分类用户进行管理。</li></ul><table><thead><tr><th>用户类型</th><th>登录腾讯云控制台</th><th>使用腾讯云 API</th><th>策略授权</th><th>消息通知</th><th>准备条件</th></tr></thead><tbody><tr><td>子用户</td><td>支持（可选）</td><td>支持（可选）</td><td>支持</td><td>不支持</td><td>无</td></tr><tr><td>协作者</td><td>支持</td><td>支持</td><td>支持</td><td>支持</td><td>另一个腾讯云账号</td></tr><tr><td>消息接收人</td><td>不支持</td><td>不支持</td><td>不支持</td><td>支</td><td>用于接收消息的手机号、邮箱</td></tr></tbody></table><h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><ul><li>子账号的运维管理<ul><li>新建子账户</li><li>添加用户到组</li><li>使用子账号登录</li><li>开启子用户订阅信息功能</li><li>删除子账号</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108174037985.png" alt="image-20230108174037985" style="zoom: 67%;"><ul><li>协作者管理操作<ul><li>创建协作者</li><li>为协作者订阅消息</li><li>删除协作者</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108174209744.png" alt="image-20230108174209744" style="zoom: 67%;"><ul><li>消息接收人的管理操作<ul><li>新建消息接收人</li><li>为消息接收人订阅消息</li><li>删除消息接收者</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108174345411.png" alt="image-20230108174345411" style="zoom:67%;"><h4 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h4><ul><li>用户组基础运维<ul><li>新建用户组</li><li>为用户组添加用户</li><li>删除用户组</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108174922619.png" alt="image-20230108174922619" style="zoom:67%;"><ul><li>用户组管理操作<ul><li>将有相同职能的用户添加在同一用户组</li><li>关联适当的策略</li><li>分配权限，提高效率</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108175009631.png" alt="image-20230108175009631" style="zoom:67%;"><h4 id="策略管理"><a href="#策略管理" class="headerlink" title="策略管理"></a>策略管理</h4><ul><li><p>策略概述：</p><ul><li>定义和描述一条或多条权限的语法规范</li></ul></li><li><p>权限概述：</p><ul><li>描述在某些条件下允许或拒绝执行某些操作访问某些资源</li><li>权限信息：操作、资源、作用、条件</li></ul></li><li><p>策略和权限的关系：</p><ul><li>主账户通过给子账户绑定策略实现授权，策略设置可精确到 [<strong>API，资源，用户/用户组，允许/拒绝，条件</strong>] 维度</li></ul></li><li><p>可以基于以下几种方式创建自定义策略：</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108175247794.png" alt="image-20230108175247794" style="zoom:50%;"><ul><li>策略是用于定义和描述一条或多条权限的语法规范，CAM 支持两种类型的策略。<ul><li>预设策略</li><li>自定义策略</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108175326528.png" alt="image-20230108175326528" style="zoom: 67%;"><h2 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍腾讯云安全管理和访问的方法和操作</li><li>如何使用安全组管理出入站流量，配置访问策略</li><li>利用不同用户组分配产品操作权限，合理访问腾讯云服务。</li></ul><h1 id="弹性计算部署实战"><a href="#弹性计算部署实战" class="headerlink" title="弹性计算部署实战"></a>弹性计算部署实战</h1><h2 id="云服务器实例操作"><a href="#云服务器实例操作" class="headerlink" title="云服务器实例操作"></a>云服务器实例操作</h2><h3 id="实例概述"><a href="#实例概述" class="headerlink" title="实例概述"></a>实例概述</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113171940967.png" alt="image-20230113171940967" style="zoom:50%;"><h4 id="云服务器实例族"><a href="#云服务器实例族" class="headerlink" title="云服务器实例族"></a>云服务器实例族</h4><ul><li>为给用户提供更多的更适合的选择，每一系列的云服务器都有实例族</li><li>云服务器实例族表示该系列的实例是第几代的，如标准型S5实例是目前最新一代的标准型实例。如下是标准系列实例族介绍：</li></ul><table><thead><tr><th><strong>标准型</strong></th><th><strong>标准型 S1</strong></th><th><strong>标准型 S2</strong></th><th><strong>标准型</strong>  <strong>S3</strong></th><th><strong>标准型 S4</strong></th><th><strong>标准型 S5</strong></th></tr></thead><tbody><tr><td>CPU</td><td>Intel  Xeon CPU</td><td>Xeon  Broadwell（v4）</td><td>Skylake 6133</td><td>Skylake 6148</td><td>Cascade  Lake</td></tr><tr><td>内存</td><td>DDR3</td><td>DDR4</td><td>最新DDR4</td><td>最新  DDR4</td><td>最新DDR4</td></tr><tr><td>内网带宽</td><td>10Gbps</td><td>10Gbps</td><td>10Gbps</td><td>25Gbps</td><td>28Gbps</td></tr><tr><td>最大规格</td><td>48核96GB</td><td>56核224GB</td><td>80核320 GB</td><td>72  核228GB</td><td>86核320GB</td></tr></tbody></table><h4 id="云服务器实例限制"><a href="#云服务器实例限制" class="headerlink" title="云服务器实例限制"></a>云服务器实例限制</h4><ul><li>在一个区域中可以启动的实例总数存在限制：<ul><li>每个用户在每个可用区存在限制</li><li>提升配额申请</li></ul></li><li>实例的系统盘和数据盘挂载限制：<ul><li>系统盘只能挂载一块；要扩容需要关机重装系统</li><li>为了保证磁盘的 IO 性能体验，腾讯云对于随实例购买的数据盘有大小和类型限制，请参考对应实例族的磁盘搭配模块</li><li>可以通过购买独立云硬盘来规避实例的磁盘限制</li></ul></li></ul><h4 id="实例类型对照及适用场景"><a href="#实例类型对照及适用场景" class="headerlink" title="实例类型对照及适用场景"></a>实例类型对照及适用场景</h4><table><thead><tr><th><strong>实例类型</strong></th><th><strong>特点</strong></th><th><strong>应用场景</strong></th></tr></thead><tbody><tr><td>标准型</td><td>基准性能，可实现计算、内存和网络资源的平衡</td><td>中小型Web应用、中小型数据库等，如个人网站，各种企业级应用</td></tr><tr><td>高IO型</td><td>低延时 I/O</td><td>NoSQL 数据库、群集化数据库、  OLTP 系统，如高性能数据库</td></tr><tr><td>内存型</td><td>大内存；最大648GB的内存实例</td><td>高性能数据库、分布式内存缓存等应用；hadoop集群或redis</td></tr><tr><td>计算型</td><td>CVM中最高性能处理器和最高性价比</td><td>高流量 Web  服务器、MMO游戏服务器、HPC，如大型多人联机游戏服务器等计算密集型业务</td></tr><tr><td>GPU型</td><td>搭载 GPU、FPGA  等异构硬件，具有实时高速的并行计算和浮点计算能力</td><td>深度学习、科学计算、视频编解码和图形工作站等高性能应用</td></tr><tr><td>大数据型</td><td>搭载海量存储资源，具有高吞吐特点</td><td>海量日志处理、分布式文件系统和大型数据仓库等吞吐密集型应用</td></tr></tbody></table><h4 id="实例的生命周期"><a href="#实例的生命周期" class="headerlink" title="实例的生命周期"></a>实例的生命周期</h4><p><strong>包年包月实例生命周期：</strong></p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113172345344.png" alt="image-20230113172345344" style="zoom:50%;"><p><strong>按量付费实例生命周期：</strong></p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113172416811.png" alt="image-20230113172416811" style="zoom:50%;"><h3 id="通过控制台创建实例"><a href="#通过控制台创建实例" class="headerlink" title="通过控制台创建实例"></a>通过控制台创建实例</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113172433239.png" alt="image-20230113172433239" style="zoom:50%;"><h4 id="云服务器实例创建流程"><a href="#云服务器实例创建流程" class="headerlink" title="云服务器实例创建流程"></a>云服务器实例创建流程</h4><p><strong>任务目标</strong></p><ul><li>本小节的主要任务是掌握创建云服务器实例的两种方法，包括快速配置实例和自定义配置实例。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113172541290.png" alt="image-20230113172541290" style="zoom:50%;"><h4 id="熟悉云服务器管理控制台"><a href="#熟悉云服务器管理控制台" class="headerlink" title="熟悉云服务器管理控制台"></a>熟悉云服务器管理控制台</h4><p>云服务器管理控制台：</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113172620929.png" alt="image-20230113172620929" style="zoom: 67%;"><h4 id="通过快速配置创建实例"><a href="#通过快速配置创建实例" class="headerlink" title="通过快速配置创建实例"></a>通过快速配置创建实例</h4><p><strong>快速配置实例：</strong></p><ul><li>镜像<ul><li>操作系统</li><li>操作系统+应用</li></ul></li><li>机型</li><li>地域</li><li>公网贷款</li><li>购买数量</li><li>购买时长</li><li>费用</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113172756633.png" alt="image-20230113172756633" style="zoom:67%;"><h4 id="通过自定义配置创建实例"><a href="#通过自定义配置创建实例" class="headerlink" title="通过自定义配置创建实例"></a>通过自定义配置创建实例</h4><p><strong>自定义创建实例：</strong></p><ul><li>第一步：选择机型<ul><li>计费模式<ul><li>包年包月</li><li>按量计费</li></ul></li><li>地域</li><li>可用区</li><li>网络</li><li>实例</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113172935428.png" alt="image-20230113172935428" style="zoom: 67%;"><ul><li>选择镜像<ul><li>镜像提供方</li><li>操作系统</li><li>系统架构</li><li>镜像版本</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113173137505.png" alt="image-20230113173137505" style="zoom:67%;"><ul><li>选存储和带宽<ul><li>系统盘</li><li>数据盘</li><li>定期快照</li><li>网络计费模式</li><li>带宽</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113173229912.png" alt="image-20230113173229912" style="zoom:67%;"><ul><li>第二步：设置主机<ul><li>所属项目</li><li>主机名</li><li>登录方式</li><li>安全组</li><li>安全加固</li><li>云监控</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113173324587.png" alt="image-20230113173324587" style="zoom:67%;"><ul><li>第三步：确认配置信息，完成支付<ul><li>配置信息</li><li>服务器数量</li><li>购买时长</li><li>自动续费</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113173437305.png" alt="image-20230113173437305" style="zoom:67%;"><h3 id="登录-CVM-实例"><a href="#登录-CVM-实例" class="headerlink" title="登录 CVM 实例"></a>登录 CVM 实例</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113173453449.png" alt="image-20230113173453449" style="zoom:67%;"><h4 id="登录-CVM-实例的方式"><a href="#登录-CVM-实例的方式" class="headerlink" title="登录 CVM 实例的方式"></a>登录 CVM 实例的方式</h4><p><strong>任务目标</strong></p><ul><li>Windows 和 Linux 实例登录的方式很多，本小节重点介绍四种登录 CVM 的方式，包括：VNC 登录、远程桌面登录、SSH 登录和 WebShell 登录。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113173610762.png" alt="image-20230113173610762" style="zoom:67%;"><h4 id="登录-Windows-实例"><a href="#登录-Windows-实例" class="headerlink" title="登录 Windows 实例"></a>登录 Windows 实例</h4><p>根据本地的操作系统和 CVM 实例是否可被 Internet 访问，不同情况下可以使用不同的登录方式：</p><table><thead><tr><th>本地操作系统类型</th><th>Windows 云服务器实例有公网  IP</th><th>Windows 云服务器实例没有公网  IP</th></tr></thead><tbody><tr><td>Windows</td><td>VNC  登录     远程桌面连接</td><td>VNC  登录</td></tr><tr><td>Linux</td><td>VNC  登录     rdesktop 登录</td><td>VNC  登录</td></tr><tr><td>Mac  OS</td><td>VNC  登录     rdesktop 登录</td><td>VNC  登录</td></tr></tbody></table><p><strong>VNC 登录 Windows 实例</strong></p><ul><li>登录云主机控制台。</li><li>对应实例右侧操作栏中，单击【登录】</li><li>在弹出的窗口，下拉到VNC方式登录处，单击【立即登录】 。</li><li>弹出通过VNC登录的页面，登录成功。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113173802683.png" alt="image-20230113173802683" style="zoom:67%;"><p><strong>远程桌面连接 Windows 实例：</strong></p><ul><li>按“Windows+R”键，弹出“运行”窗口。</li><li>在“运行”窗口中输入命令“mstsc”，然后确定。</li><li>在弹出的“远程桌面”窗口中输入实例的公网IP，点“连接”</li><li>输入登录实例的用户名和密码。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113174007282.png" alt="image-20230113174007282" style="zoom:67%;"><h4 id="登录-Linux-实例"><a href="#登录-Linux-实例" class="headerlink" title="登录 Linux 实例"></a>登录 Linux 实例</h4><p>根据本地的操作系统和 CVM 实例是否可被 Internet 访问，不同情况下可以使用不同的登录方式：</p><table><thead><tr><th>本地操作系统类型</th><th>Linux 云服务器实例有公网 IP</th><th>Linux 云服务器实例没有公网 IP</th></tr></thead><tbody><tr><td>Windows</td><td>WebShell 登录；VNC 登录；     远程登录软件登录；</td><td>VNC  登录</td></tr><tr><td>Linux</td><td>WebShell 登录；VNC 登录；     SSH 登录；</td><td>VNC  登录</td></tr><tr><td>Mac  OS</td><td>WebShell 登录；VNC 登录；     SSH 登录；</td><td>VNC  登录</td></tr></tbody></table><p><strong>远程登录软件登录 Linux 实例：</strong></p><ul><li>安装 Windows 远程登录软件，此处选择PUTTY。</li><li>使用 PUTTY 连接 Linux 云服务器。</li><li>输入公网 IP，选择 SSH，点“Open”。</li><li>PUTTY 会话窗口，输入管理员帐号和密码。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113174234092.png" alt="image-20230113174234092" style="zoom:50%;"><p><strong>WebShell 登录 Linux 实例：</strong></p><ul><li>含义：WebShell登录是腾讯云提供的Web浏览器远程连接云服务器的方式。</li><li>优点：<ul><li>支持快捷键复制粘贴</li><li>支持鼠标滚屏</li><li>支持中文输入法</li><li>安全性高，每次登录需输入密码或密钥</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113174346769.png" alt="image-20230113174346769" style="zoom:67%;"><h3 id="CVM-实例的配置管理操作"><a href="#CVM-实例的配置管理操作" class="headerlink" title="CVM 实例的配置管理操作"></a>CVM 实例的配置管理操作</h3><h4 id="CVM-实例的配置管理操作概况"><a href="#CVM-实例的配置管理操作概况" class="headerlink" title="CVM 实例的配置管理操作概况"></a>CVM 实例的配置管理操作概况</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113174407228.png" alt="image-20230113174407228" style="zoom: 50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113174621767.png" alt="image-20230113174621767" style="zoom:50%;"><h4 id="安装操作系统"><a href="#安装操作系统" class="headerlink" title="安装操作系统"></a>安装操作系统</h4><p><strong>部署方式</strong></p><ul><li>首次部署<ul><li>购买实例的时候，直接选择需要的操作系统或镜像。</li></ul></li><li>重新安装<ul><li>可以使实例恢复至刚启动的初始状态；</li><li>是实例遭遇系统故障时的一种重要恢复手段。</li></ul></li></ul><p><strong>重新安装操作系统概述</strong></p><ul><li>前提条件：确定是同平台安装或不同平台安装</li><li>重装准备：备份系统盘，创建自定义镜像</li><li>镜像选择：腾讯云提供的镜像或自定义镜像、</li><li>重装时间：操作后 10-30 分钟</li><li>实例物理特性：公网 IP 不会改变</li><li>计费问题：增加资源需增加费用</li><li>后续操作：数据盘不受影响</li></ul><p><strong>重新安装操作系统步骤</strong></p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113174907222.png" alt="image-20230113174907222" style="zoom: 50%;"><p><strong>将操作系统重新安装成其他镜像</strong></p><ul><li>公共镜像</li><li>自定义镜像</li><li>共享镜像（需共享后才能选择）</li><li>服务市场镜像</li><li>操作：完成重新安装后其他镜像步骤</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113175025968.png" alt="image-20230113175025968" style="zoom: 80%;"><h4 id="CVM-的网络接入配置"><a href="#CVM-的网络接入配置" class="headerlink" title="CVM 的网络接入配置"></a>CVM 的网络接入配置</h4><p><strong>带宽的应用与配置</strong></p><ul><li><p>带宽含义：</p><ul><li>带宽是什么？</li><li>带宽单位：Mbps</li><li>流量单位：GB</li></ul></li><li><p>腾讯云带宽：</p><ul><li>分配与购买的带宽相等的外网入方向带宽；</li><li>小于10Mbps，分配 10Mbps 外网入方向带宽；</li><li>腾讯云根据用户云主机公网出流量计费，计费单位为 GB。</li></ul></li><li><p>带宽配置：</p><ul><li>新建实例同时申请带宽</li><li>新建实例后调整带宽：<ul><li>切换按流量计费</li><li>增加带宽</li></ul></li><li>操作实践：<ul><li>为 CVM 实例调整带宽</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113175406481.png" alt="image-20230113175406481" style="zoom: 67%;"><p><strong>实现内外网访问操作</strong></p><ul><li>腾讯云的网络环境可以分为：<ul><li>私有网络（VPC）：在腾讯云上自定义的逻辑隔离网络空间。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113175510518.png" alt="image-20230113175510518" style="zoom:50%;"><ul><li>腾讯云上的网络访问方式：<ul><li>Internet 访问：腾讯云提供给实例进行公开数据传输的服务。</li><li>内网访问：内网访问即局域网（LAN）服务。</li></ul></li><li>演示：通过不同的方式访问腾讯云上的 CVM 实例。           </li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230113175639755.png" alt="image-20230113175639755" style="zoom: 50%;"><ul><li>公网 IP 地址：<ul><li>有公网 IP 地址的云服务器才能和 Internet 上的计算机互访；</li><li>带宽大于 0 Mbps，腾讯云自动分配公网 IP；</li><li>用户无法主动关联或释放与实例关联的公网 IP 地址</li></ul></li><li>操作<ul><li>通过控制台获取实例公网 IP 地址。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230127211230925.png" alt="image-20230127211230925" style="zoom:75%;"><ul><li>内网 IP 地址：<ul><li>内网 IP 地址是无法通过 Internet 访问的 IP 地址；</li><li>内网 IP 地址可由腾讯云自动分配也可由用户自定义；</li><li>不同用户间相互隔离，不同地域间相互隔离。</li></ul></li><li>操作：<ul><li>通过控制台和操作系统查看内网 IP；</li><li>设置内网 DNS。</li></ul></li></ul><p><strong>实现安全组配置</strong></p><ul><li>含义：是一种有状态的包过滤功能虚拟防火墙。</li><li>作用：网络安全隔离。</li><li>配置安全组操作：<ul><li>创建安全组</li><li>给实例分配安全组</li><li>配置安全组</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230127211534294.png" alt="image-20230127211534294" style="zoom:75%;"><p><strong>弹性公网 IP 的应用</strong></p><ul><li>含义：EIP 是与账号关联的静态 IP 地址，弹性公网 IP 未进行释放前，可以将其一直保留于您的账号中</li><li>作用：快速将地址重新映射到账户中的另一个实例，从而屏蔽实例故障</li><li>操作配置：<ul><li>申请 EIP</li><li>修改 EIP 名称</li><li>绑定 EIP</li><li>解绑 EIP</li><li>释放 EIP</li></ul></li></ul><p><strong>弹性网卡的应用</strong></p><ul><li>弹性网卡 (ENI )是绑定私有网络内云服务器的一种弹性网络接口，可在多个云服务器间自由迁移。</li><li>相关概念：<ul><li>主网卡、辅助网卡</li><li>主内网 IP</li><li>辅助内网 IP</li><li>弹性公网 IP</li><li>安全组</li><li>MAC 地址</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128102101716.png" alt="image-20230128102101716" style="zoom:50%;"><ul><li>应用场景：<ul><li>内网、外网、管理网隔离</li><li>高可靠应用部署</li></ul></li><li>操作：<ul><li>创建弹性网卡</li><li>弹性网卡绑定 CVM</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128102150301.png" alt="image-20230128102150301" style="zoom:50%;"><h4 id="调整实例配置"><a href="#调整实例配置" class="headerlink" title="调整实例配置"></a>调整实例配置</h4><p><strong>前提条件与注意事项：</strong></p><ul><li>实例状态：关机和开机状态中，均可进行调整配置，但关机重启后操作才生效。</li><li>硬件基础： 系统盘与数据盘均为云盘的实例支持调整配置。</li><li>内网 IP 变化：极少数实例在调整后会出现内网 IP 变化。</li></ul><p><strong>关机状态，才能修改的实例</strong></p><ul><li>属性：<ul><li>实例配置（CPU、内存）</li><li>已挂载的云硬盘大小</li><li>修改密码</li><li>加载密钥</li></ul></li><li>操作：<ul><li>修改一台 CVM 实例的密码，并验证效果。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128102345170.png" alt="image-20230128102345170" style="zoom: 67%;"><p><strong>升级实例配置</strong></p><ul><li>升级次数无限制</li><li>完成升级实例配置操作</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128102417681.png" alt="image-20230128102417681" style="zoom: 67%;"><p><strong>降级实例配置</strong></p><ul><li>包年包月实例配置降级：<ul><li>随时进行降配，每个云服务器实例累计只能进行 5 次降配</li><li>差值折算为目标配置所支持的时长</li></ul></li><li>按量计费实例配置降级：<ul><li>随时进行降配，降级次数无限制</li></ul></li><li>操作：完成包年包月实例降配，完成按量计费实例降配操作。</li></ul><p><strong>销毁实例</strong></p><ul><li><p>销毁实例概述</p><ul><li>手动销毁方式：针对未到期的包年包月实例或未欠费的按量计费实例，包年包月实例销毁后最多保留7天，案例计费实例销毁后最多保留2小时彻底释放</li><li>定时销毁方式：针对按量付费类型实例设置定时销毁</li><li>到期/欠费自动销毁方式：包年包月类型实例到期后，最多在回收站中保留7个自然日，到期未恢复会被自动释放。按量计费类型实例余额小于0状态持续26小时后被自动释放</li></ul></li><li><p>销毁实例操作</p><ul><li>使用控制台对未过期实例进行销毁<ul><li>销毁单个实例：单击实例操作按钮【销毁】</li><li>批量销毁实例：勾选需要销毁的实例，单击顶部【批量销毁】</li></ul></li><li>彻底销毁回收站包年包月实例<ul><li>进入【回收站】-【云服务器回收站】</li><li>进入云服务器回收列表，在回收站销毁</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128102741491.png" alt="image-20230128102741491" style="zoom: 80%;"></li></ul><p><strong>实例回收与恢复</strong></p><ul><li>实例回收：<ul><li>保留时长：实例在回收站保留7天</li><li>过期处理：过期后自动销毁</li><li>搭载关系：解除所有搭载关系</li><li>操作限制：仅能进行“续费恢复”和“彻底销毁”</li></ul></li><li>操作：在云服务器控制台中，完成实例销毁后的恢复操作。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128104004015.png" alt="image-20230128104004015" style="zoom:50%;"><h3 id="自动化部署"><a href="#自动化部署" class="headerlink" title="自动化部署"></a>自动化部署</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128104025792.png" alt="image-20230128104025792" style="zoom:50%;"><h4 id="自动化部署概述"><a href="#自动化部署概述" class="headerlink" title="自动化部署概述"></a>自动化部署概述</h4><p>云 API：</p><p>以接口的形式访问腾讯云的各类资源，以此构建自己的资源管理系统、自动化运维系统、售卖平台、开发工具等</p><p>云 API 优势：</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128104207760.png" alt="image-20230128104207760" style="zoom:50%;"><h4 id="自动化部署操作流程"><a href="#自动化部署操作流程" class="headerlink" title="自动化部署操作流程"></a>自动化部署操作流程</h4><p><strong>任务目标</strong></p><p>本小节任务目标在于熟悉通过API实现自动化部署的整套流程，并且最终能够实现通过API查询和创建实例。</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128104249531.png" alt="image-20230128104249531" style="zoom:50%;"><h4 id="新建-API-密钥"><a href="#新建-API-密钥" class="headerlink" title="新建 API 密钥"></a>新建 API 密钥</h4><ul><li>API 密钥管理控制台</li></ul><p><a href="https://console.qcloud.com/cam/capi">https://console.qcloud.com/cam/capi</a></p><ul><li>操作：新建 API 密钥：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128104828434.png" alt="image-20230128104828434" style="zoom: 67%;"><h4 id="API-调试"><a href="#API-调试" class="headerlink" title="API 调试"></a>API 调试</h4><ul><li>腾讯云 API v3.0 调试步骤</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128105012181.png" alt="image-20230128105012181" style="zoom:50%;"><h4 id="下载并安装-SDK-工具包"><a href="#下载并安装-SDK-工具包" class="headerlink" title="下载并安装 SDK 工具包"></a>下载并安装 SDK 工具包</h4><ul><li>SDK 的使用：<ul><li>云 API 无法直接使用，需下载 SDK 一起使用</li><li>SDK 是为了让开发者能够在自己的代码里更快捷方便的使用腾讯云而开发的工具包</li></ul></li><li>操作：选择开发语言对应的 SDK 工具包进行安装</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128105112537.png" alt="image-20230128105112537" style="zoom:70%;"><h4 id="通过-API-查询和创建实例"><a href="#通过-API-查询和创建实例" class="headerlink" title="通过 API 查询和创建实例"></a>通过 API 查询和创建实例</h4><p><strong>通过 API 查询实例列表：</strong></p><p>例子1：查询在本账户下，查询实例机型列表。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET https://cvm.tencentcloudapi.com/?Action=DescribeInstanceTypeConfigs</span><br><span class="line">&amp;Filters.0.Name=zone</span><br><span class="line">&amp;Filters.0.Values.0=ap-guangzhou-2</span><br><span class="line">&amp;Filters.1.Name=instance-family</span><br><span class="line">&amp;Filters.1.Values.0=I1</span><br><span class="line">&amp;&lt;公共请求参数&gt;</span><br></pre></td></tr></table></figure><p><strong>通过 API 创建实例</strong></p><ul><li>创建实例接口及参数请参考腾讯云官方文档中的描述。</li><li>根据腾讯云创建实例接口描述，通过API创建满足下面要求的实例：</li></ul><p>例子2：实例所在位置为广州二区，付费模式为包年包月，购买一个月，到期自动续费，镜像ID为：img-pmqg1cw7，选择机型为：1C1G标准型(S1.SMALL1)，50G大小本地普通系统盘，带100G大小本地普通数据盘，公网付费模式为流量按小时后付费，外网带宽上限10Mbps，分配公网IP，实例命名为QCLOUD-TEST，设置登录密码为 Qcloud@TestApi123++，安装云监控云安全，购买数量为1台。</p><h2 id="云服务器磁盘操作"><a href="#云服务器磁盘操作" class="headerlink" title="云服务器磁盘操作"></a>云服务器磁盘操作</h2><h3 id="云硬盘概述"><a href="#云硬盘概述" class="headerlink" title="云硬盘概述"></a>云硬盘概述</h3><p><strong>本地盘</strong></p><ul><li>与云服务器实例处于同一台物理服务器上的存储设备</li><li>本地盘的创建仅跟随云服务器实例，仅能在启动云服务器时一同启动</li><li>本地盘分为普通本地盘和SSD本地盘</li></ul><p>​                                                            <img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128105627099.png" alt="image-20230128105627099" style="zoom:50%;">                                        <img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128105632721.png" alt="image-20230128105632721" style="zoom:50%;"></p><ul><li>云硬盘<ul><li>云服务器实例提供数据块级别持久性存储</li><li>是高可用和高可靠的存储介质</li></ul></li><li>云硬盘应用场景<ul><li>避免单点故障</li><li>支持海量数据分析</li><li>支持核心 SQL</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128105838037.png" alt="image-20230128105838037" style="zoom: 50%;"><ul><li>云硬盘类型<ul><li>非弹性云硬盘：<ul><li>生命周期跟随 CVM 实例的云硬盘</li><li>创建时将自动连接至创建的 CVM 实例上，且不可以更改</li></ul></li><li>弹性云硬盘：<ul><li>可挂载到同一可用区中的任意实例上</li><li>只能挂在数据盘，不可挂载系统盘</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128110004288.png" alt="image-20230128110004288" style="zoom:50%;"><h3 id="云硬盘的操作管理流程"><a href="#云硬盘的操作管理流程" class="headerlink" title="云硬盘的操作管理流程"></a>云硬盘的操作管理流程</h3><ul><li><p><strong>任务目标</strong></p><ul><li>本小节的学习目的在于掌握云服务器磁盘操作，其中包括：云盘的创建操作；云盘创建完成后，分别在 Windows 和 Linux 操作系统上进行数据盘的挂载、扩容及更换、续费云硬盘、卸载弹性云盘和删除云硬盘。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128110042327.png" alt="image-20230128110042327" style="zoom:50%;"></li></ul><h3 id="创建云硬盘"><a href="#创建云硬盘" class="headerlink" title="创建云硬盘"></a>创建云硬盘</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128110105106.png" alt="image-20230128110105106" style="zoom:50%;"><ul><li>第一步：登录<ul><li>登录云控制台，导航到云硬盘控制台。在控制台上可查看已有云硬盘的状态。</li></ul></li><li>第二步：新建<ul><li>点击“新建”进入新建云硬盘向导</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128110208046.png" alt="image-20230128110208046" style="zoom: 80%;"><ul><li>第三步：配置<ul><li>地域/可用区</li><li>云硬盘类型</li><li>容量</li><li>是否使用快照创建</li><li>名称</li><li>计费模式</li><li>购买数量和时长</li></ul></li><li>第四步：支付<ul><li>在支付页面点击【确认购买】完成购买。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128110955173.png" alt="image-20230128110955173" style="zoom: 67%;"><h3 id="挂载数据盘"><a href="#挂载数据盘" class="headerlink" title="挂载数据盘"></a>挂载数据盘</h3><p><strong>在 Windows 实例上挂载数据盘：</strong></p><ul><li>用控制台将弹性云硬盘连接到实例<ul><li>登录腾讯云控制台。</li><li>进入【云服务器】-【云硬盘】选项卡。</li><li>点击可用的云硬盘后的【更多】-【挂载到云主机】按钮进行单盘挂载</li><li>在弹出框中选择需要挂载到的云服务器，点【确定】按钮，等待挂载完毕。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128111135157.png" alt="image-20230128111135157" style="zoom: 67%;"><ul><li>对 Windows 实例进行数据盘初始化<ul><li>登录到 Windows 实例</li><li>进入Windows操作系统的“磁盘管理”</li><li>联机磁盘</li><li>初始化磁盘</li><li>新建简单卷</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128111300400.png" alt="image-20230128111300400" style="zoom: 50%;"><p><strong>Windows 系统自动挂载数据盘</strong></p><ul><li>数据盘快照生产出来的云硬盘自动挂载至新的云服务器实例：<ul><li>自定义镜像中 SAN 策略为：onlineAll</li><li>数据盘在制作快照前必须已经被格式化为 ntfs 或 fat32 格式</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128111431048.png" alt="image-20230128111431048" style="zoom:50%;"><p><strong>在 Linux 实例上挂载数据盘</strong></p><ul><li>使用控制台将弹性云硬盘连接到实例<ul><li>连接实例的方法和云硬盘连接到Windows实例的方法基本一致</li><li>选择实例的时候选择Linux实例</li></ul></li><li>Linux 系统分区、格式化、挂载及创建文件系统：<ul><li>查看已挂载的硬盘</li><li>对磁盘进行分区操作</li><li>挂载硬盘：</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /data/part1 -p</span><br><span class="line"><span class="built_in">mkdir</span> /data/part5 -p</span><br><span class="line">mount /dev/vdc1 /data/part1</span><br><span class="line">mount /dev/vdc5 /data/</span><br><span class="line"><span class="built_in">touch</span> /data/part1/disk-bm42ztpm-part1.txt</span><br><span class="line"><span class="built_in">touch</span> /data/part5/disk-bm42ztpm-part5.txt</span><br><span class="line">yum install tree -y</span><br></pre></td></tr></table></figure><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128111600262.png" alt="image-20230128111600262" style="zoom:50%;"><p><strong>Linux系统自动挂载数据盘</strong></p><ul><li>数据盘快照生产出来的云硬盘自动挂载至新的云服务器实例：<ul><li>数据盘快照前已经格式化过</li><li>系统盘在制作自定义镜像前，需要在 /etc/rc.local 文件中写入数据盘挂载点</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128111711878.png" alt="image-20230128111711878" style="zoom:50%;"><h3 id="扩容云硬盘"><a href="#扩容云硬盘" class="headerlink" title="扩容云硬盘"></a>扩容云硬盘</h3><h4 id="云硬盘扩容类型"><a href="#云硬盘扩容类型" class="headerlink" title="云硬盘扩容类型"></a>云硬盘扩容类型</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112025650.png" alt="image-20230128112025650" style="zoom:50%;"><p>扩容类型为云硬盘的数据盘：</p><ul><li>通过云硬盘控制台扩容</li><li>通过云服务器控制台扩容</li><li>通过 API 扩容</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112126671.png" alt="image-20230128112126671" style="zoom:50%;"><p>扩容类型为云硬盘的系统盘：</p><ul><li>系统盘为云硬盘时，支持扩容</li><li>仅可以在重装系统时扩容</li></ul><h4 id="云硬盘扩容"><a href="#云硬盘扩容" class="headerlink" title="云硬盘扩容"></a>云硬盘扩容</h4><p><strong>Windows 磁盘扩容：</strong></p><ul><li>控制台扩容云硬盘：<ul><li>打开云服务器 CVM控制台。</li><li>单击导航窗格中的【云硬盘】。</li><li>点击【更多】-【扩容】按钮，选择需要的新大小，完成支付。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112251905.png" alt="image-20230128112251905" style="zoom:50%;"><p><strong>Linux 磁盘扩容：</strong></p><ul><li>扩容实体云硬盘大小</li><li>扩容分区<ul><li>确定文件系统分区表形式</li><li>扩容分区</li></ul></li><li>扩容文件系统</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112408992.png" alt="image-20230128112408992" style="zoom:50%;"><h4 id="扩容-Windows-文件系统"><a href="#扩容-Windows-文件系统" class="headerlink" title="扩容 Windows 文件系统"></a>扩容 Windows 文件系统</h4><ul><li>Windows文件系统扩容操作</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112500832.png" alt="image-20230128112500832" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112521325.png" alt="image-20230128112521325" style="zoom:50%;"><h4 id="扩容-Linux-文件系统"><a href="#扩容-Linux-文件系统" class="headerlink" title="扩容 Linux 文件系统"></a>扩容 Linux 文件系统</h4><ul><li>Linux文件系统扩容操作</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112726700.png" alt="image-20230128112726700" style="zoom:50%;"><h3 id="续费云硬盘"><a href="#续费云硬盘" class="headerlink" title="续费云硬盘"></a>续费云硬盘</h3><ul><li>云硬盘续费过程：<ul><li>打开云硬盘控制台。</li><li>对需要续费的弹性云盘，在右侧操作栏中，点击【续费】。</li><li>在续费弹出框中，选择需要续费的时间，点击【确定】。</li><li>进行支付后即可对弹性云盘续费。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128112817221.png" alt="image-20230128112817221" style="zoom:50%;"><h3 id="卸载弹性云盘"><a href="#卸载弹性云盘" class="headerlink" title="卸载弹性云盘"></a>卸载弹性云盘</h3><ul><li><p>卸载云硬盘注意事项</p><ul><li>卸载弹性云硬盘不会清除硬盘上的数据</li><li>不支持系统云硬盘卸载</li><li>在 Windows 实例上卸载前，需先将磁盘脱机</li><li>在 Linux 实例上卸载前，需先对磁盘进行 umount 操作</li></ul></li><li><p>完成云盘卸载操作</p><ul><li>Windows 卸载云盘<ul><li>登录Windows实例，将云盘脱机；</li><li>登录腾讯云控制台，进入【云服务器】-【云硬盘】选项卡；</li><li>在云硬盘列表页，点击【更多】-【卸载】按钮进行单盘卸载。</li></ul></li><li>Linux 实例卸载云盘<ul><li>登录 Linux 实例，对云盘进行 umount 操作；</li><li>登录腾讯云控制台，进入【云服务器】-【云硬盘】选项卡；</li><li>在云硬盘列表页，点击【更多】-【卸载】按钮进行单盘卸载。</li></ul></li></ul></li></ul><h3 id="销毁云硬盘"><a href="#销毁云硬盘" class="headerlink" title="销毁云硬盘"></a>销毁云硬盘</h3><ul><li>销毁云硬盘时，会同时删除云硬盘中所有数据且不可找回，已经销毁的云硬盘不可恢复，请谨慎操作</li><li>非弹性云硬盘的生命周期跟随云服务器，只能在云服务器销毁时被销毁</li><li>弹性云硬盘的生命周期独立于云服务器，因此可以独立于云服务器而销毁</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128113142443.png" alt="image-20230128113142443" style="zoom:50%;"><h3 id="更换系统盘"><a href="#更换系统盘" class="headerlink" title="更换系统盘"></a>更换系统盘</h3><p><strong>前提条件：</strong></p><ul><li>系统盘不支持缩容</li><li>系统盘为云盘的云服务器，重装系统时可以调高系统盘大小</li><li>系统盘为本地盘的云服务器，重装系统时，根据当前系统盘大小的不同，默认重装后的值也不同。</li></ul><p><strong>更换系统盘步骤：</strong></p><ul><li>云主机控制台，选择重装系统</li><li>数据盘自动挂载</li></ul><p><strong>操作：</strong></p><ul><li>分别在 Windows 和 Linux 系统下更换系统盘。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128113320683.png" alt="image-20230128113320683" style="zoom:50%;"><h2 id="云服务器镜像操作"><a href="#云服务器镜像操作" class="headerlink" title="云服务器镜像操作"></a>云服务器镜像操作</h2><h3 id="镜像概述"><a href="#镜像概述" class="headerlink" title="镜像概述"></a>镜像概述</h3><ul><li>什么是镜像？<ul><li>镜像提供启动云服务器实例所需的所有信息</li><li>镜像类似于“装机盘”</li></ul></li><li>镜像的应用场景：<ul><li>部署特定软件环境</li><li>批量部署软件环境</li><li>服务器运行环境备份</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128113627333.png" alt="image-20230128113627333" style="zoom:50%;"><h3 id="云服务器镜像操作配置流程"><a href="#云服务器镜像操作配置流程" class="headerlink" title="云服务器镜像操作配置流程"></a>云服务器镜像操作配置流程</h3><p><strong>任务目标</strong></p><p>本章节主要任务是理解什么镜像，镜像的应用场景有哪些。然后在腾讯云控制台上完成与镜像有关的一系列操作：创建镜像、复制镜像、共享镜像和删除镜像。</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128113711383.png" alt="image-20230128113711383" style="zoom:50%;"><h3 id="创建自定义镜像"><a href="#创建自定义镜像" class="headerlink" title="创建自定义镜像"></a>创建自定义镜像</h3><p><strong>创建自定义镜像最佳实践：</strong></p><ul><li>关机实例，以确保镜像与当前实例部署环境完全一致；</li><li>保留原有实例数据盘上的数据，则先对数据盘做快照。</li><li>登录云服务器控制台，进行创建镜像操作。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128113824086.png" alt="image-20230128113824086" style="zoom:50%;"><p><strong>创建自定义镜像的注意事项：</strong></p><ul><li>每个地域暂支持 10 个自定义镜像。</li><li>以下目录/文件会被清空：<ul><li>/var/log/</li><li>/root/.bash_history、/home/ubuntu/.bash_history（Ubuntu 系统）</li></ul></li><li>Linux 实例制作自定义镜像时，请确认 /etc/fstab 不包含数据盘配置</li><li>自定义镜像的 Linux 实例有挂载数据盘，则需要注释或删掉 /etc/fstab 中自行配置的数据盘的相关配置。</li><li>制作过程需要持续十分钟或更长时间，提前做好相关准备，以防影响业务</li></ul><h3 id="复制镜像"><a href="#复制镜像" class="headerlink" title="复制镜像"></a>复制镜像</h3><p><strong>概述：</strong></p><ul><li><strong>复制镜像功能</strong>帮助用户快速<strong>跨地域</strong>部署相同的云服务器实例</li></ul><p><strong>复制镜像注意事项：</strong></p><ul><li>复制的镜像须为自定义镜像，需先创建自定义镜像</li><li>复制镜像支持国内至国内复制，国外至国外复制，需要从国内复制镜像到国外，或者从国外复制镜像到国内请联系售后</li><li>跨地域复制镜像暂不收费</li><li>大于50GB的自定义镜像暂不支持跨地域复制</li><li>复制镜像等待时间为10分钟到30分钟</li></ul><p><strong>操作：</strong></p><ul><li>学会查看支持复制的地域；</li><li>完成跨地域复制镜像。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128114215227.png" alt="image-20230128114215227" style="zoom:50%;"><p>通过 API 复制镜像</p><p>输入参数</p><table><thead><tr><th>参数名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>srcRegion</td><td>String</td><td>源镜像所属地域，填写代号，如gz，sh。</td></tr><tr><td>imgIdList.n</td><td>String</td><td>镜像ID。</td></tr><tr><td>dstRegion.n</td><td>String</td><td>需要同步到的地域，填写代号，如gz，sh。</td></tr></tbody></table><p>输出参数</p><table><thead><tr><th>参数名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>Int</td><td>公共错误码。0表示成功，其他值表示失败。</td></tr><tr><td>message</td><td>String</td><td>模块错误信息描述，与接口相关。</td></tr></tbody></table><h3 id="共享自定义镜像"><a href="#共享自定义镜像" class="headerlink" title="共享自定义镜像"></a>共享自定义镜像</h3><p><strong>共享自定义镜像</strong></p><ul><li>前提条件：获取对方账号唯一 ID<ul><li>登录云主机控制台，单击右上角账号名称；</li><li>查看账号信息中的账号 ID；</li><li>通知对方将账号 ID 发送给自己。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128114728116.png" alt="image-20230128114728116" style="zoom: 67%;"><ul><li>通过控制台共享<ul><li>登录云主机控制台；</li><li>单击左侧导航窗格中的【镜像】；</li><li>单击顶部【自定义镜像】选项卡；</li><li>选中自定义镜像，单击右侧【共享】。</li><li>输入对方账户 ID ，单击【共享】。</li><li>若需要共享给多个用户，请重复上述步骤。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128114827485.png" alt="image-20230128114827485" style="zoom:67%;"><h3 id="取消镜像共享并删除镜像"><a href="#取消镜像共享并删除镜像" class="headerlink" title="取消镜像共享并删除镜像"></a>取消镜像共享并删除镜像</h3><p><strong>删除镜像注意事项：</strong></p><ul><li>删除镜像后不影响已启动实例；</li><li>已共享镜像无法删除；</li><li>仅自定义镜像能被删除。</li></ul><p><strong>操作：</strong></p><ul><li>完成删除镜像相关操作。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128114920397.png" alt="image-20230128114920397" style="zoom:50%;"><p>通过 API 删除镜像</p><p>输入参数</p><table><thead><tr><th>参数名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>mageIds.n</td><td>String</td><td>镜像ID</td></tr></tbody></table><p>输出参数</p><table><thead><tr><th>参数名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>code</td><td>Int</td><td>公共错误码。0表示成功，其他值表示失败。</td></tr><tr><td>message</td><td>String</td><td>模块错误信息描述，与接口相关。</td></tr></tbody></table><h2 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h2><p>本课程详细介绍腾讯云服务器相关的所有基本操作；</p><p>完成本课程后，您将熟练掌握：腾讯云控制台的操作；</p><p>云服务器实例的创建、配置及管理；云服务器磁盘创建、挂载、更换和扩容；</p><p>云服务器镜像的创建、复制、共享和删除等操作。</p><h1 id="云网络部署实战"><a href="#云网络部署实战" class="headerlink" title="云网络部署实战"></a>云网络部署实战</h1><h2 id="私有网络和子网"><a href="#私有网络和子网" class="headerlink" title="私有网络和子网"></a>私有网络和子网</h2><h3 id="创建私有网络"><a href="#创建私有网络" class="headerlink" title="创建私有网络"></a>创建私有网络</h3><ul><li>【腾讯云控制台】-【私有网络】-【新建】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141221370.png" alt="image-20230128141221370" style="zoom:50%;"><ul><li>配置私有网络和初始子网信息</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141308352.png" alt="image-20230128141308352" style="zoom:50%;"><ul><li>查看创建好的私有网络</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141339016.png" alt="image-20230128141339016" style="zoom: 50%;"><h3 id="配置子网"><a href="#配置子网" class="headerlink" title="配置子网"></a>配置子网</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141410342.png" alt="image-20230128141410342" style="zoom:50%;"><ul><li>私有网络至少包含一个子网</li><li>用户可以同时创建一个或多个子网</li></ul><ul><li>每个子网都必须关联一个路由表</li><li>路由表用于指定子网的出站路由</li></ul><h4 id="新增子网"><a href="#新增子网" class="headerlink" title="新增子网"></a>新增子网</h4><ul><li>【私有网络控制台】</li><li>【子网】</li><li>【新建】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141524000.png" alt="image-20230128141524000" style="zoom:50%;"><h4 id="关联子网和路由表"><a href="#关联子网和路由表" class="headerlink" title="关联子网和路由表"></a>关联子网和路由表</h4><ul><li>【腾讯云控制台】-【路由表】-【关联子网】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141552769.png" alt="image-20230128141552769" style="zoom: 50%;"><h3 id="修改云主机内网-IP"><a href="#修改云主机内网-IP" class="headerlink" title="修改云主机内网 IP"></a>修改云主机内网 IP</h3><ul><li>弹性网卡主要具有以下关联信息：</li></ul><table><thead><tr><th><strong>名称</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>主网卡</td><td>云主机创建时联动创建的网卡</td></tr><tr><td>辅助网卡</td><td>用户自行创建的网卡为辅助网卡</td></tr><tr><td>主内网IP</td><td>在弹性网卡创建时由系统随机分配或用户自行指定</td></tr><tr><td>辅助内网IP</td><td>用户在创建弹性网卡或编辑弹性网卡时自行配置</td></tr></tbody></table><ul><li>【弹性网卡】-【网卡ID】-【IP管理】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141633199.png" alt="image-20230128141633199" style="zoom:50%;"><h3 id="删除私有网络和子网"><a href="#删除私有网络和子网" class="headerlink" title="删除私有网络和子网"></a>删除私有网络和子网</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141724806.png" alt="image-20230128141724806" style="zoom:50%;"><h2 id="管理路由表和弹性网卡"><a href="#管理路由表和弹性网卡" class="headerlink" title="管理路由表和弹性网卡"></a>管理路由表和弹性网卡</h2><h3 id="创建和配置路由表"><a href="#创建和配置路由表" class="headerlink" title="创建和配置路由表"></a>创建和配置路由表</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141936476.png" alt="image-20230128141936476" style="zoom:50%;"><ul><li>【私有网络】-【路由表】-【+新建】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128141953609.png" alt="image-20230128141953609" style="zoom:50%;"><ul><li>路由表名称</li><li>路由策略<ul><li>目的端</li><li>下一跳类型</li><li>下一条</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142037730.png" alt="image-20230128142037730" style="zoom:50%;"><ul><li>每个路由表可以关联同一个私有网络中的多个子网，但每个子网有且只能关联一个路由表。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142113482.png" alt="image-20230128142113482" style="zoom:50%;"><h3 id="删除自定义路由表"><a href="#删除自定义路由表" class="headerlink" title="删除自定义路由表"></a>删除自定义路由表</h3><ul><li>系统自动生成的默认路由表无法删除，但自定义路由表可以任意创建、修改和删除。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142135131.png" alt="image-20230128142135131" style="zoom:50%;"><h3 id="弹性网卡的创建和删除"><a href="#弹性网卡的创建和删除" class="headerlink" title="弹性网卡的创建和删除"></a>弹性网卡的创建和删除</h3><ul><li>【私有网络】</li><li>【弹性网卡】</li><li>【网卡ID】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142205223.png" alt="image-20230128142205223" style="zoom:50%;"><ul><li>【私有网络】</li><li>【弹性网卡】</li><li>【新建】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142242676.png" alt="image-20230128142242676" style="zoom:50%;"><ul><li><p>弹性网卡删除后，将自动解关联内网 IP、弹性公网 IP 和安全组。</p></li><li><p>只可以删除未关联云主机的弹性网卡。</p></li><li><p>主网卡将在云主机删除后一同删除。</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142322617.png" alt="image-20230128142322617" style="zoom:50%;"><h3 id="弹性网卡-IP-管理"><a href="#弹性网卡-IP-管理" class="headerlink" title="弹性网卡 IP 管理"></a>弹性网卡 IP 管理</h3><ul><li>【弹性网卡】-【网卡ID】-【IP管理】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142348847.png" alt="image-20230128142348847" style="zoom:50%;"><h4 id="管理内网-IP"><a href="#管理内网-IP" class="headerlink" title="管理内网 IP"></a>管理内网 IP</h4><ul><li>弹性网卡的主 IP 不支持释放，仅辅助 IP 支持释放。</li><li>内网 IP 解绑后，将自动解关联弹性公网 IP。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142440413.png" alt="image-20230128142440413" style="zoom:50%;"><h4 id="管理公网-IP"><a href="#管理公网-IP" class="headerlink" title="管理公网 IP"></a>管理公网 IP</h4><ul><li>【弹性网卡】-【网卡ID】-【IPv4地址管理】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142514844.png" alt="image-20230128142514844" style="zoom:50%;"><h3 id="修改弹性网卡所属子网"><a href="#修改弹性网卡所属子网" class="headerlink" title="修改弹性网卡所属子网"></a>修改弹性网卡所属子网</h3><ul><li>仅主网卡可以修改所属子网。</li><li>弹性网卡更改所属子网前，请先解绑所有辅助 IP。</li><li>弹性网卡更改所属子网仅可以修改为同可用区下的其他子网。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142551834.png" alt="image-20230128142551834" style="zoom:50%;"><h3 id="弹性网卡绑定云主机"><a href="#弹性网卡绑定云主机" class="headerlink" title="弹性网卡绑定云主机"></a>弹性网卡绑定云主机</h3><ul><li>【私有网络】-【弹性网卡】-【绑定云主机】</li><li>弹性网卡解绑后，将保留其关联的内网 IP、弹性公网 IP、安全组等信息。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142617820.png" alt="image-20230128142617820" style="zoom:50%;"><h2 id="网络连通配置"><a href="#网络连通配置" class="headerlink" title="网络连通配置"></a>网络连通配置</h2><h3 id="配置连接-Internet"><a href="#配置连接-Internet" class="headerlink" title="配置连接 Internet"></a>配置连接 Internet</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142745225.png" alt="image-20230128142745225" style="zoom:50%;"><h4 id="公网网关"><a href="#公网网关" class="headerlink" title="公网网关"></a>公网网关</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142809760.png" alt="image-20230128142809760" style="zoom:50%;"><ul><li><ol><li>创建网关子网</li></ol></li><li><ol start="2"><li>购买公网网关</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142851773.png" alt="image-20230128142851773" style="zoom:50%;"><ul><li><ol start="3"><li>创建网关子网路由表</li></ol><ul><li>网关子网和普通子网不能关联同一张路由表，需要新建一张独立的网关路由表。</li><li>将网关子网关联该路由表。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128142937616.png" alt="image-20230128142937616" style="zoom:50%;"><ul><li><ol start="4"><li>配置普通子网路由表</li></ol><ul><li>将路由指向公网网关主机</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143009021.png" alt="image-20230128143009021" style="zoom:50%;"><h4 id="NAT-网关"><a href="#NAT-网关" class="headerlink" title="NAT 网关"></a>NAT 网关</h4><ul><li>通过 NAT 网关访问 Internet<ul><li><ol><li>创建 NAT 网关</li></ol></li><li><ol start="2"><li>配置相关子网所关联的路由表</li></ol></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143118863.png" alt="image-20230128143118863" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143109454.png" alt="image-20230128143109454" style="zoom:50%;"><ul><li>新建端口转发规则<ul><li>用于配置 NAT 网关上的 DNAT 功能</li><li>使得云主机上的服务可被外网访问</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143157929.png" alt="image-20230128143157929" style="zoom:50%;"><h4 id="弹性公网-IP"><a href="#弹性公网-IP" class="headerlink" title="弹性公网 IP"></a>弹性公网 IP</h4><ul><li>弹性公网 IP<ul><li><ol><li>申请弹性公网 IP</li></ol></li><li><ol start="2"><li>云服务器绑定弹性公网 IP</li></ol></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143333100.png" alt="image-20230128143333100" style="zoom:50%;"><h3 id="连接企业数据中心配置"><a href="#连接企业数据中心配置" class="headerlink" title="连接企业数据中心配置"></a>连接企业数据中心配置</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143346279.png" alt="image-20230128143346279" style="zoom:50%;"><h4 id="VPN-连接"><a href="#VPN-连接" class="headerlink" title="VPN 连接"></a>VPN 连接</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143403757.png" alt="image-20230128143403757" style="zoom:50%;"><ul><li><ol><li>创建 VPN 网关</li></ol></li><li><ol start="2"><li>创建对端网关</li></ol></li><li><ol start="3"><li>创建 VPN 通道</li></ol><ul><li><p>① 新建 VPN 通道</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143458868.png" alt="image-20230128143458868" style="zoom:50%;"></li><li><p>② VPN 通道基本配置</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143600502.png" alt="image-20230128143600502" style="zoom:50%;"></li><li><p>③ 配置 SPD 策略</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143649930.png" alt="image-20230128143649930" style="zoom:50%;"></li><li><p>④ 下载配置文件</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128143850523.png" alt="image-20230128143850523" style="zoom:50%;"></li></ul></li><li><ol start="4"><li>本地网关配置</li></ol></li><li><ol start="5"><li>修改路由表</li></ol></li><li><ol start="6"><li>VPN 通道激活</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144047023.png" alt="image-20230128144047023" style="zoom:50%;"></li></ul><h4 id="专线接入"><a href="#专线接入" class="headerlink" title="专线接入"></a>专线接入</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144116524.png" alt="image-20230128144116524" style="zoom:50%;"><ul><li><ol><li>创建物理专线</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144144095.png" alt="image-20230128144144095" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144151523.png" alt="image-20230128144151523" style="zoom:50%;"><ul><li><ol start="2"><li>创建专线网关</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144221985.png" alt="image-20230128144221985" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144228111.png" alt="image-20230128144228111" style="zoom:50%;"><ul><li><ol start="3"><li>创建专线通道</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144300084.png" alt="image-20230128144300084" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144305071.png" alt="image-20230128144305071" style="zoom:50%;"><ul><li><ol start="4"><li>配置对应的路由表</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144323430.png" alt="image-20230128144323430" style="zoom:50%;"><ul><li><ol start="5"><li>设置告警</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144339766.png" alt="image-20230128144339766" style="zoom:50%;"><h3 id="不同区域连通配置"><a href="#不同区域连通配置" class="headerlink" title="不同区域连通配置"></a>不同区域连通配置</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144350917.png" alt="image-20230128144350917" style="zoom:50%;"><h4 id="对等连接"><a href="#对等连接" class="headerlink" title="对等连接"></a>对等连接</h4><ul><li>同账号创建对等连接</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144531907.png" alt="image-20230128144531907" style="zoom:50%;"><ul><li>跨账号创建对等连接</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144551140.png" alt="image-20230128144551140" style="zoom:50%;"><ul><li>实验环境拓扑</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144618154.png" alt="image-20230128144618154" style="zoom:50%;"><ul><li><p>实验目标：通过对等连接实现跨账号网段1和网段2的互通</p></li><li><ol><li>创建对等连接</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144706518.png" alt="image-20230128144706518" style="zoom:50%;"><ul><li>（可选）2. 接受对等连接</li><li><ol start="3"><li>为对等连接配置本端和对端路由表</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144736536.png" alt="image-20230128144736536" style="zoom:50%;"><h2 id="安全配置"><a href="#安全配置" class="headerlink" title="安全配置"></a>安全配置</h2><h3 id="创建网络-ACL"><a href="#创建网络-ACL" class="headerlink" title="创建网络 ACL"></a>创建网络 ACL</h3><ul><li>【私有网络】-【安全】-【网络ACL】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144834090.png" alt="image-20230128144834090" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144838291.png" alt="image-20230128144838291" style="zoom:50%;"><h3 id="网络-ACL-配置"><a href="#网络-ACL-配置" class="headerlink" title="网络 ACL 配置"></a>网络 ACL 配置</h3><ul><li>【策略ID】-【入站规则】/【出站规则】-【编辑】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144857702.png" alt="image-20230128144857702" style="zoom:50%;"><h3 id="关联子网"><a href="#关联子网" class="headerlink" title="关联子网"></a>关联子网</h3><ul><li>【策略ID】-【基本信息】-【新增关联】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144914654.png" alt="image-20230128144914654" style="zoom:50%;"><h3 id="删除网络-ACL"><a href="#删除网络-ACL" class="headerlink" title="删除网络 ACL"></a>删除网络 ACL</h3><ul><li>若【删除】按钮置灰，则表示本网络 ACL 正与子网相关联，需要先解除这些关联后才能进行删除操作。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128144932471.png" alt="image-20230128144932471" style="zoom:50%;"><h2 id="操作实战"><a href="#操作实战" class="headerlink" title="操作实战"></a>操作实战</h2><h3 id="搭建对端-VPN-网关连接-VPC"><a href="#搭建对端-VPN-网关连接-VPC" class="headerlink" title="搭建对端 VPN 网关连接 VPC"></a>搭建对端 VPN 网关连接 VPC</h3><ul><li>环境说明：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145028282.png" alt="image-20230128145028282" style="zoom:50%;"><ul><li><p>配置思路：</p><ul><li>① 购买腾讯云 VPN 网关</li><li>② 使用 Ipsec-tools 开源工具搭建 VPN 网关</li></ul></li><li><ol><li>安装 Ipsec-tools（以CentOS 6.4为例）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh ipsec-tools-0.8.0-25.3.x86_64.rpm</span><br></pre></td></tr></table></figure><p>或：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh ipsec-tools-0.8.0-25.3.i686.rpm</span><br></pre></td></tr></table></figure></li><li><p>检查安装成果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">racoon –V</span><br></pre></td></tr></table></figure></li><li><ol start="2"><li>配置 Ipsec 策略</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/racoon/setkey.conf</span><br></pre></td></tr></table></figure><ul><li>配置如下：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145324129.png" alt="image-20230128145324129" style="zoom:50%;"></li></ul><ul><li><ol start="3"><li>配置密钥</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/racoon/psk.txt</span><br></pre></td></tr></table></figure><ul><li>配置如下：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145413992.png" alt="image-20230128145413992" style="zoom:50%;"><ul><li>执行以下命令：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 600 psk.txt   </span><br><span class="line"><span class="built_in">chown</span> root psk.txt</span><br></pre></td></tr></table></figure></li><li><ol start="4"><li>配置 IKE</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/racoon/racoon.conf</span><br></pre></td></tr></table></figure><ul><li>配置如图：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145553139.png" alt="image-20230128145553139" style="zoom:50%;"></li></ul><ul><li><ol start="5"><li>启动 Ipsec-tools</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line">/usr/sbin/setkey -f /etc/racoon/setkey.conf</span><br><span class="line">/usr/sbin/racoon -f /etc/racoon/racoon.conf</span><br></pre></td></tr></table></figure><ul><li>检查通道状态</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setkey -D</span><br></pre></td></tr></table></figure></li></ul><h3 id="公网网关访问外网优化配置"><a href="#公网网关访问外网优化配置" class="headerlink" title="公网网关访问外网优化配置"></a>公网网关访问外网优化配置</h3><ul><li>环境说明：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145658369.png" alt="image-20230128145658369" style="zoom: 50%;"><ul><li><p>配置思路：</p><ul><li>普通 CVM 没有外网 IP，但是可以借助公网网关访问 Internet</li></ul></li><li><ol><li>创建网关子网</li></ol></li><li><ol start="2"><li>购买公网网关</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145836743.png" alt="image-20230128145836743" style="zoom:50%;"><ul><li><ol start="3"><li>创建网关子网路由表并关联子网</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145910841.png" alt="image-20230128145910841" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145914550.png" alt="image-20230128145914550" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145918810.png" alt="image-20230128145918810" style="zoom:50%;"><ul><li><ol start="4"><li>配置普通子网路由表</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128145949138.png" alt="image-20230128145949138" style="zoom:50%;"></li></ul><h3 id="搭建高可用主备集群配置"><a href="#搭建高可用主备集群配置" class="headerlink" title="搭建高可用主备集群配置"></a>搭建高可用主备集群配置</h3><ul><li>环境说明：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128150014967.png" alt="image-20230128150014967" style="zoom:50%;"><ul><li>配置思路：<ul><li>通过 keepalived 搭建高可用主备集群</li></ul></li><li><ol><li>申请 VIP</li></ol></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128150349288.png" alt="image-20230128150349288" style="zoom:50%;"><ul><li><ol start="2"><li>主备子机安装 keepalived（1.2.24 版本以上）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum –y install keepalived </span><br></pre></td></tr></table></figure></li><li><ol start="3"><li>确定主备需求</li></ol><ul><li>无常主模式，即双机选举主设备的优先级相同。</li><li>常主常备模式，即需要让其中一台设备在无故障时尽量当主的场景。</li></ul></li></ul><ul><li><ol start="4"><li>修改配置 keepalived.conf</li></ol></li></ul><table><thead><tr><th><strong>参数</strong></th><th><strong>常主常备模式</strong></th><th><strong>无常主模式</strong></th></tr></thead><tbody><tr><td>state</td><td>主机填  MASTER 备机填 BACKUP</td><td>均填写  BACKUP</td></tr><tr><td>interface</td><td>改成本机网卡名</td><td>改成本机网卡名</td></tr><tr><td>priority</td><td>主机值高于备</td><td>相同</td></tr><tr><td>unicast_src_ip</td><td>本机内网  IP</td><td>本机内网  IP</td></tr><tr><td>unicast_peer</td><td>对端机器内网  IP</td><td>对端机器内网  IP</td></tr><tr><td>virtual_ipaddress</td><td>内网  VIP</td><td>内网  VIP</td></tr><tr><td>track_interface</td><td>本机网卡名</td><td>本机网卡名</td></tr></tbody></table><ul><li><ol start="5"><li>使用 notify_action.sh 进行简单的日志记录</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/keepalived/notify_action.sh </span><br></pre></td></tr></table></figure></li><li><ol start="6"><li>主备云服务器本机主 IP 没有外网 IP 的场景</li></ol></li></ul><ul><li><ol start="7"><li>验证主备倒换时 VIP 及外网 IP 是否正常切换</li></ol></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/keepalived start </span><br></pre></td></tr></table></figure><p>或：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start keepalived </span><br></pre></td></tr></table></figure><p>或：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service keepalived start </span><br></pre></td></tr></table></figure><h2 id="课程总结-3"><a href="#课程总结-3" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了<ul><li>私有网络产品的基本配置操作</li><li>私有网络中网络配置管理</li><li>私有网络产品实战应用</li></ul></li></ul><h1 id="数据存储部署实战"><a href="#数据存储部署实战" class="headerlink" title="数据存储部署实战"></a>数据存储部署实战</h1><h2 id="对象存储配置"><a href="#对象存储配置" class="headerlink" title="对象存储配置"></a>对象存储配置</h2><h3 id="对象存储概述"><a href="#对象存储概述" class="headerlink" title="对象存储概述"></a>对象存储概述</h3><ul><li>对象存储的基本概念<ul><li>存储桶：存储桶即 Bucket ，在 COS 中用于存储对象。</li><li>对象：对象即 Object，COS 中存储的基本单元。</li><li>地域：地域即 Region，表示 COS 的数据中心所在的地域。</li><li>APPID</li><li>默认访问地址</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128151623333.png" alt="image-20230128151623333" style="zoom:50%;"><h3 id="对象存储配置操作流程"><a href="#对象存储配置操作流程" class="headerlink" title="对象存储配置操作流程"></a>对象存储配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务是理解存储桶的工作原理，在腾讯云控制台上完成创建、删除存储桶，上传、下载和删除对象等相关操作。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128151651389.png" alt="image-20230128151651389" style="zoom:50%;"><h3 id="创建存储桶"><a href="#创建存储桶" class="headerlink" title="创建存储桶"></a>创建存储桶</h3><ul><li>创建存储桶<ul><li>通过存储桶列表<ul><li>登录云对象存储控制台，导航到“存储桶列表”。</li><li>点击“创建存储桶”，弹出对话框。</li><li>填写名称、权限等信息，点击“确定”。</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128151747841.png" alt="image-20230128151747841" style="zoom:50%;"><ul><li><p>为存储桶设置防盗链</p><ul><li>名单类型：<ul><li>黑名单：限制名单内的域名访问存储桶的默认访问地址。</li><li>白名单：限制名单外的域名访问存储桶的默认访问地址。</li></ul></li><li>允许空 referer：<ul><li>HTTP 请求中，header 为空 referer</li></ul></li><li>Referer：<ul><li>支持设置最多10条域名且为相同前缀匹配。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128151937216.png" alt="image-20230128151937216" style="zoom:50%;"></li></ul><h3 id="创建文件夹并上传对象"><a href="#创建文件夹并上传对象" class="headerlink" title="创建文件夹并上传对象"></a>创建文件夹并上传对象</h3><ul><li>基本概念介绍<ul><li>对象：对象是腾讯云 COS 中存储的基本单元，对象被存放到存储桶中。</li><li>对象键：对象键是对象在存储桶中的唯一标识。</li></ul></li></ul><table><thead><tr><th>类型</th><th>详细内容</th></tr></thead><tbody><tr><td>字母数字字符</td><td>[0-9  , a-z , A-Z]</td></tr><tr><td>特殊字符</td><td>!、-、_、.、*</td></tr></tbody></table><ul><li>访问地址：腾讯云的对象访问地址构成为[存储桶域名]/[对象键]。</li><li>上传对象注意事项<ul><li>对象数量和容量大小限制</li><li>断电续传</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128152207601.png" alt="image-20230128152207601" style="zoom:50%;"><ul><li>创建文件夹</li><li>在创建对象前，需新建承载对象的文件夹。<ul><li>创建文件夹<ul><li>文件夹名称长度限制在 255 字符内</li><li>不支持保留字符和字段</li></ul></li><li>操作：完成文件夹的创建。</li></ul></li><li>上传对象操作<ul><li>进入文件列表；</li><li>选择上传对象；</li><li>设置对象属性（可选）；</li><li>确认上传完成。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128152721476.png" alt="image-20230128152721476" style="zoom:50%;"><h3 id="下载对象"><a href="#下载对象" class="headerlink" title="下载对象"></a>下载对象</h3><ul><li>设置对象的访问权限<ul><li>支持为对象设置两种权限类型：<ul><li><strong>公共权限：</strong>包括继承权限、私有读写、公有读私有写。</li><li><strong>用户权限：</strong>主账号默认拥有对象所有权限。COS 还支持添加子账号有数据读取、数据写入、权限读取、权限写入，甚至<strong>完全控制</strong>的最高权限。</li></ul></li><li>操作：</li><li>完成对象权限配置相关操作。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128152850198.png" alt="image-20230128152850198" style="zoom:50%;"><ul><li><p>搜索要下载的对象</p><ul><li><p>方法一：搜索存储桶当前对象</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128152929754.png" alt="image-20230128152929754" style="zoom:50%;"></li><li><p>方法二：搜索多级文件夹下的对象</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128153019294.png" alt="image-20230128153019294" style="zoom:50%;"></li></ul><ul><li>查看对象信息并下载对象<ul><li>查看对象信息：<ul><li>对象名称</li><li>对象大小</li><li>修改时间</li><li>对象权限</li></ul></li><li>下载对象：<ul><li>在所选对象右侧“下载”。</li><li>选中单个对象，在“更多操作”下拉列表中“下载”。</li><li>在对象右侧“详情”，单击“下载对象”即可下载，或单击”复制临时链接”到浏览器下载。</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128153144470.png" alt="image-20230128153144470" style="zoom:50%;"><h3 id="删除对象"><a href="#删除对象" class="headerlink" title="删除对象"></a>删除对象</h3><ul><li>删除单个对象的操作步骤<ul><li>进入存储桶列表，选择要删除的对象，单击【删除】；</li><li>单击【确定】即可删除对象。</li><li>注意：删除后数据不可恢复！</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128153227174.png" alt="image-20230128153227174" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128153232697.png" alt="image-20230128153232697" style="zoom:50%;"><h3 id="删除文件夹和存储桶"><a href="#删除文件夹和存储桶" class="headerlink" title="删除文件夹和存储桶"></a>删除文件夹和存储桶</h3><ul><li>当不再需要使用某个存储桶时，可以对其进行删除操作。<ul><li>在对象存储控制台找到想要删除的存储桶，先把存储桶中的文件夹进行删除，再找到存储桶列表，单击【删除】。</li><li>弹出删除存储桶对话框中，单击【确定】即可删除存储桶。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128153306706.png" alt="image-20230128153306706" style="zoom: 50%;"><h3 id="客户端工具-COSBrowser"><a href="#客户端工具-COSBrowser" class="headerlink" title="客户端工具 - COSBrowser"></a>客户端工具 - COSBrowser</h3><ul><li>对象存储有独立的可视化界面工具，有桌面端和移动端。<ul><li>桌面端：支持Windows、MacOS、Linux</li><li>移动端：支持Android、IOS</li><li>使用该工具简单实现资源的查看、传输和管理。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128153409850.png" alt="image-20230128153409850" style="zoom:50%;"><ul><li>以 Windows 桌面版为例，操作步骤如下：<ul><li>下载安装</li><li>登录</li><li>支持操作：<ul><li>上传、下载</li><li>重命名</li><li>删除</li><li>新建</li><li>复制、粘贴</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128153521449.png" alt="image-20230128153521449" style="zoom:50%;"><h2 id="文件存储配置"><a href="#文件存储配置" class="headerlink" title="文件存储配置"></a>文件存储配置</h2><h3 id="文件系统配置操作流程"><a href="#文件系统配置操作流程" class="headerlink" title="文件系统配置操作流程"></a>文件系统配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务是熟悉文件系统操作流程</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128154046987.png" alt="image-20230128154046987" style="zoom:50%;"><h3 id="创建网络文件系统"><a href="#创建网络文件系统" class="headerlink" title="创建网络文件系统"></a>创建网络文件系统</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128154106042.png" alt="image-20230128154106042" style="zoom:50%;"><h4 id="创建-Windows-网络文件系统"><a href="#创建-Windows-网络文件系统" class="headerlink" title="创建 Windows 网络文件系统"></a>创建 Windows 网络文件系统</h4><ul><li>第一步 创建和配置 CVM 实例</li><li>第二步 创建文件系统及挂载点</li><li>第三步 连接实例</li><li>第四步 挂载文件系统</li><li>第五步 终止资源</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128163752589.png" alt="image-20230128163752589" style="zoom:50%;"><ul><li>创建和配置 CVM 实例<ul><li>选择地域与机型</li><li>选择镜像</li><li>选择存储与网络</li><li>设置信息</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128163840849.png" alt="image-20230128163840849" style="zoom:50%;"><ul><li>创建文件系统及挂载点<ul><li>进入腾讯云控制台，导航到 CFS 控制台；</li><li>在 CFS 控制台，创建文件系统；</li><li>在文件系统列表中获取挂载点信息。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128164446504.png" alt="image-20230128164446504" style="zoom:50%;"><ul><li>连接实例<ul><li>获取公网 IP；</li><li>通过 mstsc 远程桌面管理工具连接到 Windows 实例；</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128164826174.png" alt="image-20230128164826174" style="zoom:50%;"><ul><li>挂载文件系统<ul><li>登录 Windows 实例，安装 NFS 服务器角色；</li><li>安装 NFS 客户端功能；</li><li>验证 NFS 服务是否启动；</li><li>添加匿名访问用户和用户组；</li><li>挂载文件系统。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128165105331.png" alt="image-20230128165105331" style="zoom:50%;"><ul><li>终止资源<ul><li>卸载共享目录；</li><li>终止 CVM 实例；</li><li>终止文件系统。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128165144870.png" alt="image-20230128165144870" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128165150221.png" alt="image-20230128165150221" style="zoom:50%;"><h4 id="创建-Linux-网络文件系统"><a href="#创建-Linux-网络文件系统" class="headerlink" title="创建 Linux 网络文件系统"></a>创建 Linux 网络文件系统</h4><ul><li><p>创建 Linux 网络文件系统五大步骤</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128165600001.png" alt="image-20230128165600001" style="zoom:50%;"></li><li><p>其中，第一步，第二步，第三步和第五步与创建Windows网络文件系统的步骤类似，下面不重复介绍。</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128165616536.png" alt="image-20230128165616536" style="zoom:50%;"><p>​                                                                                                                     Linux 网络文件系统原理图</p><ul><li>挂载文件系统<ul><li>启动 NFS 客户端<ul><li>sudo yum install nfs-utils</li></ul></li><li>创建待挂载目标目录<ul><li>mkdir /localfolder/</li></ul></li><li>NFS 挂载<ul><li>mount -t nfs4 10.104.12.96:/ /localfolder</li></ul></li><li>查看挂载点信息<ul><li>df -h</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128165817466.png" alt="image-20230128165817466" style="zoom:50%;"><ul><li>完成创建 Linux 网络文件系统相关操作</li><li>操作：<ul><li>新建一个 Linux 的CVM实例；</li><li>在云管理平台上新建一个名称为“Linux-test”的文件系统；</li><li>连接到 Linux 实例，挂载文件系统；</li><li>销毁 Linux 实例，销毁文件系统。</li></ul></li></ul><h3 id="管理文件系统"><a href="#管理文件系统" class="headerlink" title="管理文件系统"></a>管理文件系统</h3><ul><li>文件系统基本操作配置<ul><li>完成下面文件系统基本操作配置：</li><li>查看文件系统状态及用量</li><li>查看文件系统及挂载点信息</li><li>修改文件系统名称</li><li>删除文件系统</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128170006730.png" alt="image-20230128170006730" style="zoom:50%;"><ul><li><p>权限管理</p><ul><li>来访地址：单个 IP、单个网段或“*”表示所有。</li><li>读写权限：只读或者读写。</li><li>优先级：可以在 1-100 中设置整数位的优先级，1 为最高。</li><li>用户权限：<ul><li>all_squash：所有访问用户都会被映射为匿名用户或用户组；</li><li>no_all_squash：访问用户会先与本机用户匹配，匹配失败后再映射为匿名用户或用户组；</li><li>root_squash：将来访的 root 用户映射为匿名用户或用户组；</li><li>no_root_squash：来访的 root 用户保持 root 帐号权限</li></ul></li><li>操作1：新建权限组，并添加权限规则</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128170529114.png" alt="image-20230128170529114" style="zoom:50%;"><ul><li>操作2：为文件系统配置权限组</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128170545242.png" alt="image-20230128170545242" style="zoom:50%;"></li></ul><h3 id="访问文件系统"><a href="#访问文件系统" class="headerlink" title="访问文件系统"></a>访问文件系统</h3><h4 id="访问文件系统的方式"><a href="#访问文件系统的方式" class="headerlink" title="访问文件系统的方式"></a>访问文件系统的方式</h4><ul><li>根据 CVM 和文件存储 CFS 所在的位置的差异，访问方式也有差别：<ul><li>跨可用区访问</li><li>跨 VPC / 跨地域访问</li></ul></li></ul><h4 id="跨可用区访问文件系统"><a href="#跨可用区访问文件系统" class="headerlink" title="跨可用区访问文件系统"></a>跨可用区访问文件系统</h4><ul><li>跨可用区访问<ul><li>多台 CVM 分布在同地域的不同可用区，又需要共享文件存储，可将 CVM 和 CFS 配置在同一 VPC 下：</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128170744509.png" alt="image-20230128170744509" style="zoom:50%;"><h4 id="跨-VPC-跨地域访问文件系统"><a href="#跨-VPC-跨地域访问文件系统" class="headerlink" title="跨 VPC/跨地域访问文件系统"></a>跨 VPC/跨地域访问文件系统</h4><ul><li><p>跨 VPC/跨地域访问文件系统的场景及解决方案</p><ul><li><p>跨 VPC / 跨地域访问的场景：</p><ul><li>有多台 CVM 分布在不同 VPC 下，但是又需要共享文件存储；</li><li>CVM 与 CFS 在不同 VPC 下时；</li><li>CVM 与 CFS 分布在不同地域时。</li></ul></li><li><p>通过“对等连接” 的方式实现跨VPC、跨地域的互访。</p></li></ul></li></ul><ul><li><p>跨 VPC/跨地域访问 - 对等连接</p><ul><li><p>对等连接互通性不传递：</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128171215416.png" alt="image-20230128171215416" style="zoom:50%;"></li><li><p>同地域跨 VPC 对等链接 VS 跨地域对等连接：</p></li></ul><table><thead><tr><th><strong>比较项</strong></th><th><strong>同地域对等连接</strong></th><th><strong>跨地域对等连接</strong></th></tr></thead><tbody><tr><td>底层架构</td><td>基于腾讯云单地域内的本地内网</td><td>基于腾讯云跨地域的内部  MPLS 网络</td></tr><tr><td>带宽</td><td>与公有云互联最大支持:5Gbps     与黑石互联最大支持:1Gbps</td><td>最大  1Gbps</td></tr><tr><td>计费规则</td><td>免费</td><td>实际带宽按天计费</td></tr><tr><td>可用性</td><td>99.95%以上，无单点故障</td><td>99.95%以上，无单点故障</td></tr><tr><td>跨账号连接</td><td>支持</td><td>支持</td></tr><tr><td>访问权限</td><td>全部资源</td><td>全部资源</td></tr><tr><td>功能限制</td><td>对等连接两端  VPC 网段不可重复；多个对等连接间互不影响</td><td>对等连接两端  VPC 网段不可重复</td></tr></tbody></table></li></ul><ul><li>跨 VPC/跨地域访问-对等连接<ul><li>示例：<ul><li>网段1：广州的VPC1中子网A192.168.1.0/24。</li><li>网段2：北京的VPC2中子网B10.0.1.0/24。</li></ul></li><li>操作步骤：<ul><li>创建对等连接。</li><li>接受对等连接。</li><li>在两端设置路由表。</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128171814447.png" alt="image-20230128171814447" style="zoom:50%;"><h2 id="存储网关配置"><a href="#存储网关配置" class="headerlink" title="存储网关配置"></a>存储网关配置</h2><h3 id="存储网关概述"><a href="#存储网关概述" class="headerlink" title="存储网关概述"></a>存储网关概述</h3><ul><li>存储网关概念：<ul><li>存储网关（Cloud Storage Gateway）是一种混合云存储方案，旨在帮助企业或个人实现本地存储与公有云存储的无缝衔接。</li></ul></li><li>存储网关类型：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172006674.png" alt="image-20230128172006674" style="zoom:50%;"><h3 id="存储网关配置操作流程"><a href="#存储网关配置操作流程" class="headerlink" title="存储网关配置操作流程"></a>存储网关配置操作流程</h3><ul><li><strong>任务目标</strong><ul><li>本章节主要任务是理解存储网关的相关概念，并在腾讯云平台上完成创建网关、使用网关，以及管理网关、卷和文件系统等操作配置。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172047318.png" alt="image-20230128172047318" style="zoom:50%;"><p>​                                                                                                                    存储网关配置操作流程图</p><h3 id="创建网关"><a href="#创建网关" class="headerlink" title="创建网关"></a>创建网关</h3><ul><li>安装网关的机器：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172139169.png" alt="image-20230128172139169" style="zoom:50%;"><ul><li><p>创建网关的操作步骤：</p><ul><li>选择地区</li><li>选择网关类型：卷网关、文件网关、磁带网关</li><li>选择网关的运行平台：VMware、腾讯的 CVM</li><li>连接网关</li><li>激活网关</li><li>配置本地存储</li></ul></li></ul><h3 id="使用网关"><a href="#使用网关" class="headerlink" title="使用网关"></a>使用网关</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172321460.png" alt="image-20230128172321460" style="zoom:50%;"><h4 id="使用卷网关"><a href="#使用卷网关" class="headerlink" title="使用卷网关"></a>使用卷网关</h4><ul><li>创建卷<ul><li>创建卷选项：<ul><li>地区</li><li>网关</li><li>卷名称</li><li>iSCSI Target</li><li>卷内容</li><li>卷容量</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172423008.png" alt="image-20230128172423008" style="zoom:50%;"><ul><li>Linux 客户端上使用卷<ul><li>在 Linux 上使用卷操作：</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172545420.png" alt="image-20230128172545420" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172551494.png" alt="image-20230128172551494" style="zoom:50%;"><ul><li>Windows 客户端上使用卷<ul><li>在 Windows 上使用卷操作：</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172732689.png" alt="image-20230128172732689" style="zoom:80%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172746433.png" alt="image-20230128172746433" style="zoom:50%;"><h4 id="使用文件网关"><a href="#使用文件网关" class="headerlink" title="使用文件网关"></a>使用文件网关</h4><ul><li>创建文件系统<ul><li>完成创建文件网关后，可以将存储桶作为文件系统绑定到文件网关上，然后通过网关提供的 NFS 协议读写存储在 COS 上的文件：<ul><li>选择网关</li><li>Bucket</li><li>文件协议</li><li>存储级别</li><li>允许访问地址</li><li>授权</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128172905886.png" alt="image-20230128172905886" style="zoom:50%;"><ul><li>使用 NFS 文件系统</li><li>在 Linux 上使用 NFS 文件系统：</li><li>启动 NFS 客户端</li><li>NFS v4.0 （或v3.0）挂载</li><li>查看挂载点信息</li><li>卸载共享目录</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128173014046.png" alt="image-20230128173014046" style="zoom:50%;"><ul><li>在 Windows 上使用 NFS 文件系统：<ul><li>开启 NFS 服务</li><li>验证 NFS 服务是否启动</li><li>添加匿名访问用户和用户组</li><li>重启使配置生效</li><li>挂载文件系统</li><li>卸载共享目录</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128173125292.png" alt="image-20230128173125292" style="zoom:50%;"><ul><li>使用 SMB 文件系统<ul><li>创建文件系统后，可以使用 SMB的方式实现文件系统：<ul><li>第一步 创建 SMB 用户并分配权限</li><li>第二步 添加访问白名单</li><li>第三步 在客户端上进行网络驱动器映射</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128173230092.png" alt="image-20230128173230092" style="zoom:50%;"><h4 id="使用磁带网关"><a href="#使用磁带网关" class="headerlink" title="使用磁带网关"></a>使用磁带网关</h4><ul><li>通过 Symantec NetBackup 使用磁带网关<ul><li>通过 Symantec NetBackup 备份软件可以将数据备份到虚拟磁带、对磁带进行存档以及管理虚拟磁带库 (VTL) 设备。</li></ul></li><li>使用磁带网关操作步骤</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128173316951.png" alt="image-20230128173316951" style="zoom:50%;"><h3 id="管理网关"><a href="#管理网关" class="headerlink" title="管理网关"></a>管理网关</h3><ul><li>完成下面操作，实现网关管理：<ul><li>查看网关信息</li><li>编辑网关信息</li><li>管理网络带宽</li><li>管理本地磁盘</li><li>停止、启动、删除网关</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128174155178.png" alt="image-20230128174155178" style="zoom:50%;"><h3 id="管理卷"><a href="#管理卷" class="headerlink" title="管理卷"></a>管理卷</h3><ul><li>完成下面操作，实现卷管理：<ul><li>查看卷信息</li><li>管理 CHAP 身份验证<ul><li>Initiator 名称</li><li>Initiator 密钥：用于验证 iSCSI 启动程序的密码。</li><li>Target 密钥：用于验证 iSCSI 目标程序的密码（双向认证）。</li></ul></li><li>创建快照</li><li>删除卷</li></ul></li></ul><h3 id="管理文件系统-1"><a href="#管理文件系统-1" class="headerlink" title="管理文件系统"></a>管理文件系统</h3><ul><li>完成下面操作，实现文件系统管理：<ul><li>查看文件系统</li><li>共享设置（仅 NFS 文件系统）<ul><li>Squash：设置来访的普通用户及 root 账户权限。</li><li>写入状态：设置来访的用户的对文件系统的权限是 “只读” 还是 “读写”。</li></ul></li><li>访问信息</li><li>删除文件系统</li></ul></li></ul><h2 id="归档存储配置"><a href="#归档存储配置" class="headerlink" title="归档存储配置"></a>归档存储配置</h2><h3 id="归档存储概述"><a href="#归档存储概述" class="headerlink" title="归档存储概述"></a>归档存储概述</h3><ul><li>归档存储的基本概念及产品特性<ul><li>文件库 – Vault：用户存储数据元的容器。</li><li>档案 – Archive：存储在归档存储中的基本实体，由数据和元数据构成。</li><li>缓存池 – Output：缓存池用来提供档案数据信息的临时存储。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128174619396.png" alt="image-20230128174619396" style="zoom:50%;"><ul><li>归档存储与对象存储功能特性差异</li></ul><table><thead><tr><th><strong>产品功能特性</strong></th><th><strong>归档存储</strong></th><th><strong>对象存储</strong></th></tr></thead><tbody><tr><td>组成部分</td><td>文件数据、档案ID</td><td>文件数据、文件索引</td></tr><tr><td>数据访问</td><td>通过档案ID发起数据取回请求</td><td>通过URL实时访问</td></tr><tr><td>文件列表获取</td><td>无法实时获取目前文件库下所有的档案列表</td><td>实时获取</td></tr><tr><td>成本</td><td>成本远低于对象存储</td><td>成本较高</td></tr></tbody></table><h3 id="归档存储配置操作流程"><a href="#归档存储配置操作流程" class="headerlink" title="归档存储配置操作流程"></a>归档存储配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于完成归档存储相关实验操作，包括在归档存储中进行创建文件库、上传档案、管理文件库、档案和档案列表的取回以及删除档案。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128174717156.png" alt="image-20230128174717156" style="zoom:50%;"><h3 id="创建文件库"><a href="#创建文件库" class="headerlink" title="创建文件库"></a>创建文件库</h3><ul><li>操作：创建文件库<ul><li>选择地域</li><li>填写文件库名称</li><li>完成文件库创建</li><li>查看库</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128174806137.png" alt="image-20230128174806137" style="zoom:90%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128174814589.png" alt="image-20230128174814589" style="zoom:90%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128174825195.png" alt="image-20230128174825195" style="zoom:90%;"><h3 id="上传档案"><a href="#上传档案" class="headerlink" title="上传档案"></a>上传档案</h3><ul><li>操作：在文件库中上传档案<ul><li>上传档案</li><li>查看档案 ID</li><li>记录档案 ID，完成档案上传</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128174904761.png" alt="image-20230128174904761" style="zoom:50%;"><h3 id="管理文件库"><a href="#管理文件库" class="headerlink" title="管理文件库"></a>管理文件库</h3><ul><li>权限管理<ul><li>用户权限</li><li>JSON 格式策略（只读）</li><li>内部系统权限</li></ul></li><li>操作：完成用户权限而策略配置<ul><li>通知管理</li><li>标签管理</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128175000029.png" alt="image-20230128175000029" style="zoom:50%;"><h3 id="档案和档案列表取回"><a href="#档案和档案列表取回" class="headerlink" title="档案和档案列表取回"></a>档案和档案列表取回</h3><ul><li>档案取回</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128175018581.png" alt="image-20230128175018581" style="zoom:50%;"><ul><li>档案取回模式：<ul><li>加急模式：需要的时间最短，只需要 1 到 5 分钟；</li><li>标准模式：使用标准模式，一般需要 3 到 5 小时；</li><li>批量模式：成本最低，一般在 5 到 12 小时可完成。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128175104994.png" alt="image-20230128175104994" style="zoom:50%;"><ul><li>档案列表取回场景：<ul><li>需要删除档案，但没有记录档案 ID</li><li>需要取回档案，但没有记录档案 ID</li><li>需要查看档案列表</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128175206786.png" alt="image-20230128175206786" style="zoom:50%;"><h3 id="删除档案"><a href="#删除档案" class="headerlink" title="删除档案"></a>删除档案</h3><ul><li><p>删除档案的两种情况：</p><ul><li><p>用户已记录档案 ID</p><ul><li>查找需要删除的档案 ID</li><li>在文件库管理界面选择“删除档案”</li><li>输入档案ID，删除档案</li></ul></li><li><p>用户没有记录档案 ID</p><ul><li>如果用户没有记录档案ID，需先取回档案ID</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128175327698.png" alt="image-20230128175327698" style="zoom:50%;"><h2 id="课程总结-4"><a href="#课程总结-4" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍腾讯云存储相关的所有基本操作：<ul><li>腾讯云存储控制台的基本操作</li><li>对象存储的存储桶、对象的配置</li><li>文件存储的创建和管理</li><li>存储网关的操作配置</li><li>归档存储的基本使用管理</li></ul></li></ul><h1 id="云数据库操作实战"><a href="#云数据库操作实战" class="headerlink" title="云数据库操作实战"></a>云数据库操作实战</h1><h2 id="数据库-MySQL-配置"><a href="#数据库-MySQL-配置" class="headerlink" title="数据库 MySQL 配置"></a>数据库 MySQL 配置</h2><h3 id="数据库-MySQL-配置操作流程"><a href="#数据库-MySQL-配置操作流程" class="headerlink" title="数据库 MySQL 配置操作流程"></a>数据库 MySQL 配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于熟悉腾讯云MySQL的基本操作，包括腾讯云MySQL数据库的初始化、云端访问、数据导入和迁移、数据库实例和生命周期管理等。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212425960.png" alt="image-20230128212425960" style="zoom:50%;"><p>​                                                                                                            数据库 MySQL 配置操作流程</p><h3 id="初始化腾讯云-MySQL-数据库"><a href="#初始化腾讯云-MySQL-数据库" class="headerlink" title="初始化腾讯云 MySQL 数据库"></a>初始化腾讯云 MySQL 数据库</h3><ol><li>【腾讯云控制台】-&gt;【云产品】-&gt;【云数据库MySQL】</li><li>【MySQL】-&gt;【实例列表】</li><li>【初始化】</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212553019.png" alt="image-20230128212553019" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212559012.png" alt="image-20230128212559012" style="zoom:50%;"><ol start="4"><li>配置初始化相关参数<ul><li>支持的字符集</li><li>表名大小写敏感</li><li>自定义端口</li><li>root 账户密码</li><li>确认密码</li></ul></li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212707989.png" alt="image-20230128212707989" style="zoom: 67%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212716491.png" alt="image-20230128212716491" style="zoom: 67%;"><h3 id="MySQL-云数据库的云端访问"><a href="#MySQL-云数据库的云端访问" class="headerlink" title="MySQL 云数据库的云端访问"></a>MySQL 云数据库的云端访问</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212754277.png" alt="image-20230128212754277" style="zoom:50%;"><h4 id="内网访问方法"><a href="#内网访问方法" class="headerlink" title="内网访问方法"></a>内网访问方法</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212809482.png" alt="image-20230128212809482" style="zoom:50%;"><h4 id="外网访问方法"><a href="#外网访问方法" class="headerlink" title="外网访问方法"></a>外网访问方法</h4><ul><li>开启外网访问地址</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212832209.png" alt="image-20230128212832209" style="zoom: 50%;"><ul><li>外网访问语法</li></ul><blockquote><p>mysql -h [云数据库外网地址] -P [云数据库端口号] -u [云数据库帐号] -p[云数据库密码]</p></blockquote><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128212907911.png" alt="image-20230128212907911" style="zoom:50%;"><h3 id="MySQL-云数据库管理"><a href="#MySQL-云数据库管理" class="headerlink" title="MySQL 云数据库管理"></a>MySQL 云数据库管理</h3><ul><li>管理操作：<ul><li>查看及修改</li><li>实例监控</li><li>数据库管理</li><li>安全组</li><li>备份恢复</li><li>操作日志</li><li>只读实例</li><li>连接检查</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213009572.png" alt="image-20230128213009572" style="zoom:50%;"><h3 id="导入和离线迁移数据"><a href="#导入和离线迁移数据" class="headerlink" title="导入和离线迁移数据"></a>导入和离线迁移数据</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213017676.png" alt="image-20230128213017676" style="zoom:50%;"><ol><li>新建DTS数据迁移服务</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213035291.png" alt="image-20230128213035291" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213041549.png" alt="image-20230128213041549" style="zoom: 80%;"><ol start="2"><li>选择数据库并下载备份文件至本地</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213105503.png" alt="image-20230128213105503" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213113636.png" alt="image-20230128213113636" style="zoom: 80%;"><ol start="3"><li>通过 MySQL 命令行工具进行还原</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213132825.png" alt="image-20230128213132825" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213138337.png" alt="image-20230128213138337" style="zoom:50%;"><h3 id="MySQL-云数据库实例与生命周期管理"><a href="#MySQL-云数据库实例与生命周期管理" class="headerlink" title="MySQL 云数据库实例与生命周期管理"></a>MySQL 云数据库实例与生命周期管理</h3><table><thead><tr><th><strong>实例类型</strong></th><th><strong>概述</strong></th><th><strong>备注</strong></th></tr></thead><tbody><tr><td>主实例</td><td>含有只读实例的实例</td><td>可读可写，在实例列表可见</td></tr><tr><td>只读实例</td><td>仅提供读功能的实例</td><td>无法单独存在，必须隶属于某个主实例</td></tr><tr><td>灾备实例</td><td>提供跨可用区、跨地域灾备能力的实例</td><td>灾备实例在同步时仅可读，可主动提升为主实例</td></tr></tbody></table><table><thead><tr><th><strong>实例复制类型</strong></th><th><strong>原理</strong></th></tr></thead><tbody><tr><td>异步复制</td><td>Master 在执行完更新操作后立即向应用程序返回响应，然后  Master  再向  Slave  复制数据。数据更新过程中  Master  不需要等待  Slave  的响应。</td></tr><tr><td>半同步复制</td><td>Master 在执行完更新操作后立即向  Slave  复制数据，Slave  接收到数据并写到  relay  log 中（无需执行）  后才向 Master  返回成功信息</td></tr><tr><td>强同步复制</td><td>Master 在执行完更新操作后立即向  Slave  复制数据，Slave  接收到数据并执行完  后才向 Master  返回成功信息</td></tr></tbody></table><ul><li>数据回档操作：【实例列表】-&gt;【更多操作】 -&gt;【回档】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213413683.png" alt="image-20230128213413683" style="zoom: 80%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128213423347.png" alt="image-20230128213423347" style="zoom:80%;"><h2 id="数据库-MariaDB-配置"><a href="#数据库-MariaDB-配置" class="headerlink" title="数据库 MariaDB 配置"></a>数据库 MariaDB 配置</h2><h3 id="MariaDB-数据库配置操作流程"><a href="#MariaDB-数据库配置操作流程" class="headerlink" title="MariaDB 数据库配置操作流程"></a>MariaDB 数据库配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于熟悉腾讯云MariaDB数据库的基本操作，包括腾讯云MariaDB数据库的初始化、云端访问、数据导入和实现读写分离。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128214408807.png" alt="image-20230128214408807" style="zoom:50%;"><h3 id="初始化-MariaDB-数据库"><a href="#初始化-MariaDB-数据库" class="headerlink" title="初始化 MariaDB 数据库"></a>初始化 MariaDB 数据库</h3><p>初始化步骤：【 MariaDB （ TDSQL ）】-&gt;【实例列表】 -&gt; 【更多】 -&gt; 【初始化】</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128214511291.png" alt="image-20230128214511291" style="zoom: 80%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128214520510.png" alt="image-20230128214520510" style="zoom: 67%;"><h3 id="访问-MariaDB-数据库"><a href="#访问-MariaDB-数据库" class="headerlink" title="访问 MariaDB 数据库"></a>访问 MariaDB 数据库</h3><ol><li>选择数据库实例：</li></ol><p>【 MariaDB （ TDSQL ）】-&gt;【实例列表】</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128214605248.png" alt="image-20230128214605248" style="zoom:50%;"><ol start="2"><li>创建账号并设置账号权限</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128214940055.png" alt="image-20230128214940055" style="zoom: 80%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128214949210.png" alt="image-20230128214949210" style="zoom:80%;"><ol start="3"><li>开启外网地址：【实例列表】—【实例详情】 —【开启】</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128215016209.png" alt="image-20230128215016209" style="zoom:50%;"><h3 id="使用-mysqldump-导入数据"><a href="#使用-mysqldump-导入数据" class="headerlink" title="使用 mysqldump 导入数据"></a>使用 mysqldump 导入数据</h3><ol><li>使用 mysqldump将本地数据库数据导出为数据文件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -h localIp -u userName -p --opt --default-character-set=utf8 --hex-blob dbName --skip-triggers &gt; /tmp/dbName.sql</span><br></pre></td></tr></table></figure><ol start="2"><li>使用 mysqldump 导出存储过程、触发器和函数</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -h localIp -u userName -p --opt --default-character-set=utf8 --hex-blob dbName -R | sed -e <span class="string">&#x27;s/DEFINER[ ]*=[ ]*[^*]*\*/\*/&#x27;</span> &gt; /tmp/triggerProcedure.sql</span><br></pre></td></tr></table></figure><ol start="3"><li>将导出文件上传到云服务器CVM上</li><li>登录CVM,将数据导入到云数据库中</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -h xxx.xxx.xxx.xxx:xxxx –u userName -p dbName &lt; /tmp/dbName.sql</span><br><span class="line">mysql -h xxx.xxx.xxx.xxx:xxxx -u userName -p dbName &lt; /tmp/triggerProcedure.sql</span><br></pre></td></tr></table></figure><h3 id="实现-MariaDB-数据库的读写分离"><a href="#实现-MariaDB-数据库的读写分离" class="headerlink" title="实现 MariaDB 数据库的读写分离"></a>实现 MariaDB 数据库的读写分离</h3><ol><li>创建只读账号</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128215202360.png" alt="image-20230128215202360" style="zoom: 60%;"><ol start="2"><li>只读账号设置</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128215222958.png" alt="image-20230128215222958" style="zoom:60%;"><ul><li>主机读</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp order by sal，deptno desc；</span><br></pre></td></tr></table></figure><ul><li>从机读</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/*slave*/ select * from emp order by sal，deptno desc；</span><br></pre></td></tr></table></figure><h2 id="数据库-SQL-Server-配置"><a href="#数据库-SQL-Server-配置" class="headerlink" title="数据库 SQL Server 配置"></a>数据库 SQL Server 配置</h2><h3 id="SQL-Server-数据库配置操作流程"><a href="#SQL-Server-数据库配置操作流程" class="headerlink" title="SQL Server 数据库配置操作流程"></a>SQL Server 数据库配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于熟悉腾讯云SQL Server数据库的基本操作，包括腾讯云SQL Server数据库的创建、初始化、数据库连接和数据迁移。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225531542.png" alt="image-20230128225531542" style="zoom:50%;"><h3 id="创建-SQL-Server-实例"><a href="#创建-SQL-Server-实例" class="headerlink" title="创建 SQL Server 实例"></a>创建 SQL Server 实例</h3><ol><li>新建SQL Server云数据库实例</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225549104.png" alt="image-20230128225549104" style="zoom:50%;"><ol start="2"><li>创建 SQL Server 账号</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225611779.png" alt="image-20230128225611779" style="zoom: 50%;"><h3 id="连接-SQL-Server-云数据库"><a href="#连接-SQL-Server-云数据库" class="headerlink" title="连接 SQL Server 云数据库"></a>连接 SQL Server 云数据库</h3><ul><li><p>配置 Windows 云服务器端</p><ol><li>在数据库管理中创建数据库</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225655797.png" alt="image-20230128225655797" style="zoom:80%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225701490.png" alt="image-20230128225701490" style="zoom:50%;"><ol start="2"><li>设置数据库权限</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225750460.png" alt="image-20230128225750460" style="zoom:67%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225755608.png" alt="image-20230128225755608" style="zoom:67%;"><ol start="3"><li>在腾讯云 Windows 云服务器上下载安装  SQL Server Management Studio</li><li>查看实例内网地址，如下图：</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230128225945351.png" alt="image-20230128225945351" style="zoom: 67%;"><ol start="5"><li>使用SQL Server Management Studio连接云数据库</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129100839366.png" alt="image-20230129100839366" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129100846782.png" alt="image-20230129100846782" style="zoom:50%;"></li></ul><ul><li>本地端配置</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129100923079.png" alt="image-20230129100923079" style="zoom:50%;"><h3 id="数据迁移"><a href="#数据迁移" class="headerlink" title="数据迁移"></a>数据迁移</h3><ol><li>将备份文件上传至中转存储中</li><li>创建传输任务，如图：</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129100943216.png" alt="image-20230129100943216" style="zoom:50%;"><ol start="3"><li>设置数据传输任务</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101000360.png" alt="image-20230129101000360" style="zoom:50%;"><h2 id="数据库-PostgreSQL-配置"><a href="#数据库-PostgreSQL-配置" class="headerlink" title="数据库 PostgreSQL 配置"></a>数据库 PostgreSQL 配置</h2><h3 id="PostgreSQL-数据库配置操作流程"><a href="#PostgreSQL-数据库配置操作流程" class="headerlink" title="PostgreSQL 数据库配置操作流程"></a>PostgreSQL 数据库配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于熟悉腾讯云 PostgreSQL 数据库的基本操作，包括腾讯云 PostgreSQL 数据库的创建、初始化、数据库连接和将本地实例数据导入腾讯云 PostgreSQL 数据库</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101142105.png" alt="image-20230129101142105" style="zoom: 50%;"><h3 id="PostgreSQL-数据库实例的初始化"><a href="#PostgreSQL-数据库实例的初始化" class="headerlink" title="PostgreSQL 数据库实例的初始化"></a>PostgreSQL 数据库实例的初始化</h3><ul><li>初始化步骤：【PostgreSQL】 —【实例列表】—【新建】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101206830.png" alt="image-20230129101206830" style="zoom:50%;"><ul><li>输入参数以进行初始化</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101220376.png" alt="image-20230129101220376" style="zoom:50%;"><h3 id="实例访问地址的获取与连接"><a href="#实例访问地址的获取与连接" class="headerlink" title="实例访问地址的获取与连接"></a>实例访问地址的获取与连接</h3><ul><li>【实例详情】——【基本信息】<ul><li>内网地址</li><li>外网地址（需开通）</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101257534.png" alt="image-20230129101257534" style="zoom:50%;"><ol><li>下载安装pgAdmin</li><li>打开pgAdmin，新建数据库连接，输入参数</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101334524.png" alt="image-20230129101334524" style="zoom:50%;"><ol start="3"><li>启用PSQL控制台连接数据库</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101353712.png" alt="image-20230129101353712" style="zoom:50%;"><h3 id="数据导入至-PostgreSQL-云数据库"><a href="#数据导入至-PostgreSQL-云数据库" class="headerlink" title="数据导入至 PostgreSQL 云数据库"></a>数据导入至 PostgreSQL 云数据库</h3><ol><li><p>准备好 PostgreSQL 实例</p></li><li><p>逻辑备份源实例数据</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pg_dump -U username -h hostname -p port databasename -f filename</span><br></pre></td></tr></table></figure><ol start="3"><li><p>将备份文件上传至云服务器</p></li><li><p>导入数据</p><ul><li>① 使用命令导入数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql -U username -h hostname -d desintationdb -p port -f dumpfilename.sql</span><br></pre></td></tr></table></figure><ul><li>② 使用pgAdmin工具导入数据（数据总量较小）</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101547374.png" alt="image-20230129101547374" style="zoom:50%;"></li></ol><h2 id="弹性缓存-Redis-配置"><a href="#弹性缓存-Redis-配置" class="headerlink" title="弹性缓存 Redis 配置"></a>弹性缓存 Redis 配置</h2><h3 id="弹性缓存-Redis-配置操作流程"><a href="#弹性缓存-Redis-配置操作流程" class="headerlink" title="弹性缓存 Redis 配置操作流程"></a>弹性缓存 Redis 配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于熟悉腾讯云弹性缓存 Redis 的基本操作，包括腾讯云弹性缓存 Redis 的创建和数据迁移。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101714627.png" alt="image-20230129101714627" style="zoom:50%;"><h3 id="Redis-实例创建"><a href="#Redis-实例创建" class="headerlink" title="Redis 实例创建"></a>Redis 实例创建</h3><ul><li>创建实例：【控制台】-&gt;【弹性缓存Redis】 -&gt;【实例列表】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129101730078.png" alt="image-20230129101730078" style="zoom:50%;"><h3 id="实例初始化"><a href="#实例初始化" class="headerlink" title="实例初始化"></a>实例初始化</h3><ul><li>初始化实例</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102200404.png" alt="image-20230129102200404" style="zoom:50%;"><h3 id="数据迁移-1"><a href="#数据迁移-1" class="headerlink" title="数据迁移"></a>数据迁移</h3><ol><li>新建迁移任务</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102223023.png" alt="image-20230129102223023" style="zoom:50%;"><ol start="2"><li>填写迁移任务基本信息</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102238013.png" alt="image-20230129102238013" style="zoom:50%;"><ol start="3"><li>填写迁移任务基本参数设置</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102253245.png" alt="image-20230129102253245" style="zoom:50%;"><ol start="4"><li>通过校验后启动迁移任务</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102317307.png" alt="image-20230129102317307" style="zoom:50%;"><ol start="5"><li>迁移完成后点击【完成】断开同步</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102338731.png" alt="image-20230129102338731" style="zoom:50%;"><h2 id="文档数据库-MongoDB-配置"><a href="#文档数据库-MongoDB-配置" class="headerlink" title="文档数据库 MongoDB 配置"></a>文档数据库 MongoDB 配置</h2><h3 id="MongoDB-配置操作流程"><a href="#MongoDB-配置操作流程" class="headerlink" title="MongoDB 配置操作流程"></a>MongoDB 配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于熟悉腾讯云文档数据库MongoDB的基本操作，包括腾讯云文档数据库MongoDB的创建、初始化、数据库连接和数据导入导出。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102512125.png" alt="image-20230129102512125" style="zoom:50%;"><h3 id="MongoDB-实例创建"><a href="#MongoDB-实例创建" class="headerlink" title="MongoDB 实例创建"></a>MongoDB 实例创建</h3><ul><li>在腾讯云官网上选择参数进行购买</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102533418.png" alt="image-20230129102533418" style="zoom:50%;"><h3 id="MongoDB-实例初始化与连接"><a href="#MongoDB-实例初始化与连接" class="headerlink" title="MongoDB 实例初始化与连接"></a>MongoDB 实例初始化与连接</h3><ul><li>新购买的实例需要初始化才能正常使用</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102547728.png" alt="image-20230129102547728" style="zoom:50%;"><ul><li>rwuser（MONGODB-CR认证）URI连接示例：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb://rwuser:password@10.66.100.186:27017/somedb?authMechanism=MONGODB-CR&amp;authSource=admin</span><br></pre></td></tr></table></figure><ul><li>mongouser（SCRAM-SHA-1认证）URI连接示例：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb://mongouser:password@10.66.100.186:27017/somedb?authSource=admin</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>用户名</strong></th><th><strong>认证机制</strong></th><th><strong>URI 处理</strong></th></tr></thead><tbody><tr><td>rwuser</td><td>MONGODB-CR</td><td>必须加上参数“authMechanism=MONGODB-CR”</td></tr><tr><td>mongouser 以及在云控制台创建的用户</td><td>SCRAM-SHA-1（推荐）</td><td>不用加任何参数</td></tr></tbody></table><h3 id="MongoDB-数据导入和导出"><a href="#MongoDB-数据导入和导出" class="headerlink" title="MongoDB 数据导入和导出"></a>MongoDB 数据导入和导出</h3><ol><li>使用 shell 客户端连接腾讯云 MongoDB 数据库；</li><li>导入数据到腾讯云MongoDB：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongorestore --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --<span class="built_in">dir</span>=/data/dump_testdb</span><br></pre></td></tr></table></figure><ol start="3"><li>导出数据以备份：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodump --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --db=testdb -o /data/dump_testdb</span><br></pre></td></tr></table></figure><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102748929.png" alt="image-20230129102748929" style="zoom:50%;"><ol start="4"><li>Mongoexport 导出示例：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongoexport --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --db=testdb --collection=testcollection  -o /data/export_testdb_testcollection.json</span><br></pre></td></tr></table></figure><ol start="5"><li>Mongoimport 导入示例：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongoimport --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --db=testdb --collection=testcollection2  --file=/data/export_testdb_testcollection.json</span><br></pre></td></tr></table></figure><h3 id="MongoDB-分片集群"><a href="#MongoDB-分片集群" class="headerlink" title="MongoDB 分片集群"></a>MongoDB 分片集群</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102848617.png" alt="image-20230129102848617" style="zoom:50%;"><ul><li>分片集群控制台</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102911429.png" alt="image-20230129102911429" style="zoom:50%;"><ul><li>备份和回档</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129102953481.png" alt="image-20230129102953481" style="zoom:50%;"><ul><li>集群实例监控</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103006059.png" alt="image-20230129103006059" style="zoom:50%;"><h2 id="分布式数据库-TDSQL-配置"><a href="#分布式数据库-TDSQL-配置" class="headerlink" title="分布式数据库 TDSQL 配置"></a>分布式数据库 TDSQL 配置</h2><h3 id="TDSQL-配置操作流程"><a href="#TDSQL-配置操作流程" class="headerlink" title="TDSQL 配置操作流程"></a>TDSQL 配置操作流程</h3><ul><li>任务目标<ul><li>本章节主要任务在于熟悉腾讯云分布式数据库TDSQL的基本操作，包括腾讯云分布式数据库TDSQL的购买、初始化、连接和分别从单机实例、分布式实例导入数据</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103216196.png" alt="image-20230129103216196" style="zoom:50%;"><h3 id="TDSQL-购买"><a href="#TDSQL-购买" class="headerlink" title="TDSQL 购买"></a>TDSQL 购买</h3><ul><li>选择购买实例配置</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103231662.png" alt="image-20230129103231662" style="zoom:50%;"><h3 id="TDSQL-初始化与连接"><a href="#TDSQL-初始化与连接" class="headerlink" title="TDSQL 初始化与连接"></a>TDSQL 初始化与连接</h3><ol><li>选择未初始化的实例</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103317943.png" alt="image-20230129103317943" style="zoom:50%;"><ol start="2"><li>选择初始化配置</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103332806.png" alt="image-20230129103332806" style="zoom:50%;"><ol start="3"><li>创建账号</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103346992.png" alt="image-20230129103346992" style="zoom:50%;"><ol start="4"><li>配置账号基本信息</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103407493.png" alt="image-20230129103407493" style="zoom:50%;"><ol start="5"><li>配置账号权限</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103425948.png" alt="image-20230129103425948" style="zoom:50%;"><ol start="6"><li>开启实例外网地址用于连接</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103443957.png" alt="image-20230129103443957" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129103450599.png" alt="image-20230129103450599" style="zoom:50%;"><h3 id="从单击实例导入到分布式实例"><a href="#从单击实例导入到分布式实例" class="headerlink" title="从单击实例导入到分布式实例"></a>从单击实例导入到分布式实例</h3><ul><li><p>准备导入导出环境</p><ul><li><p>云服务器（可选）</p></li><li><p>分布式云数据库 TDSQL</p></li></ul></li></ul><ol><li>导入源表的表结构</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -utest -ptest1234 -d -S /data/4003/prod/mysql.sock caccts t_acct_water_0 &gt; table.sql</span><br></pre></td></tr></table></figure><ol start="2"><li>导出源表的表数据</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -c -t -utest -ptest1234  -S /data/4003/prod/mysql.sock caccts t_acct_water_0 &gt; data.sql</span><br></pre></td></tr></table></figure><ol start="3"><li>修改建表语句并在目的表中创建表结构<ul><li>例如：参照如下格式语句添加主键和 shardkey</li></ul></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE（ </span><br><span class="line">列名称1 数据类型, </span><br><span class="line">列名称2 数据类型, </span><br><span class="line">列名称3 数据类型, </span><br><span class="line">....， </span><br><span class="line">PRIMARY KEY(<span class="string">&#x27;列名称n’)） </span></span><br><span class="line"><span class="string">ENGINE=INNODB DEFAULT CHARSET=xxxx </span></span><br><span class="line"><span class="string">shardkey=keyname</span></span><br></pre></td></tr></table></figure><ol start="4"><li>导入数据</li></ol><ul><li>例如：连接TDSQL for Percona、MariaDB</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u username -p password -h IP -P port(登录MySQL服务器)</span><br><span class="line">use dbname（进入数据库）</span><br></pre></td></tr></table></figure><ul><li>例如：导入表结构和表数据</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /文件路径/tablenew.sql；（先导入表结构）</span><br><span class="line"><span class="built_in">source</span> /文件路径/data.sql；（再导入数据）</span><br><span class="line">select count(*) from tablename;（校验导入情况）</span><br></pre></td></tr></table></figure><h3 id="从分布式实例导入到分布式实例"><a href="#从分布式实例导入到分布式实例" class="headerlink" title="从分布式实例导入到分布式实例"></a>从分布式实例导入到分布式实例</h3><ol><li>安装 MariaDB 版本的 mysqldump</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb-server</span><br></pre></td></tr></table></figure><ol start="2"><li>导出源库的表结构</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysqldump --no-tablespaces --default-character-set=utf8 --hex-blob --skip-add-drop-table -c </span><br><span class="line">    --skip-lock-tables --skip-opt --skip-triggers --skip-comments --skip-tz-utc --skip-extended-insert </span><br><span class="line">    --skip-disable-keys --skip-quote-names --no-data -uusername -ppassword -hxxx.xxx.xxx.xxx -Pxxxxx </span><br><span class="line">    dbname  | grep -v <span class="string">&#x27;^\/\*\!40&#x27;</span> &gt; schema.sql;</span><br></pre></td></tr></table></figure><ol start="3"><li>导出源库的表数据</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysqldump  --no-tablespaces --default-character-set=utf8 --hex-blob --skip-add-drop-table -c </span><br><span class="line">    --skip-lock-tables --skip-opt --skip-triggers --skip-comments --skip-tz-utc --skip-extended-insert </span><br><span class="line">    --skip-disable-keys --skip-quote-names --no-create-info -uandelwu -pandelwu -hxxx.xxx.xxx.xxx -Pxxxxx </span><br><span class="line">    dbname | grep -v <span class="string">&#x27;^\/\*\!40&#x27;</span> &gt; data.sql;</span><br></pre></td></tr></table></figure><ol start="4"><li>在目标库创建 db</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --default-character-set=utf8 -uusername -ppassword -hxxx.xxx.xxx.xxx -Pxxxxx -e <span class="string">&quot;create database dbname;&quot;</span>;</span><br></pre></td></tr></table></figure><ol start="5"><li>在目标库上导入表结构</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --default-character-set=utf8 -uusername -ppassword -hxxx.xxx.xxx.xxx -Pxxxxx dbname &lt; schema.sql</span><br></pre></td></tr></table></figure><ol start="6"><li>在目标库上导入表数据</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --default-character-set=utf8 -uusername -ppassword -hxxx.xxx.xxx.xxx -Pxxxxx dbname  &lt; data.sql</span><br></pre></td></tr></table></figure><h2 id="HTAP-数据库-TBase-配置"><a href="#HTAP-数据库-TBase-配置" class="headerlink" title="HTAP 数据库 TBase 配置"></a>HTAP 数据库 TBase 配置</h2><h3 id="HTAP-数据库创建"><a href="#HTAP-数据库创建" class="headerlink" title="HTAP 数据库创建"></a>HTAP 数据库创建</h3><ol><li>【控制台】——【HTAP数据库】 ——【+新建】</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104244723.png" alt="image-20230129104244723" style="zoom:50%;"><ol start="2"><li>配置 HTAP 数据库</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104307130.png" alt="image-20230129104307130" style="zoom:50%;"><ul><li>开发或测试环境部署建议(最低配置)</li></ul><table><thead><tr><th><strong>节点</strong></th><th><strong>规格</strong></th><th><strong>数量</strong></th></tr></thead><tbody><tr><td>TBase</td><td>8核8G内存</td><td>1</td></tr><tr><td>PD</td><td>4核4G内存</td><td>3</td></tr><tr><td>TiKV</td><td>4核20G内存300G硬盘</td><td>3</td></tr></tbody></table><ul><li>生产环境部署建议</li></ul><table><thead><tr><th><strong>节点</strong></th><th><strong>规格</strong></th><th><strong>数量</strong></th></tr></thead><tbody><tr><td>TBase</td><td>16核32G内存</td><td>2或以上</td></tr><tr><td>PD</td><td>6核8G内存</td><td>3</td></tr><tr><td>TiKV</td><td>8核48G内存800G硬盘</td><td>3或以上</td></tr></tbody></table><h3 id="特殊语法"><a href="#特殊语法" class="headerlink" title="特殊语法"></a>特殊语法</h3><ul><li>启动客户端时添加 –comments 选项，针对 5.7.7 之前的 MySQL 客户端</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 127.0.0.1 -P 4000 -uroot --comments</span><br></pre></td></tr></table></figure><ul><li>使用 TBase_SMJ(t1, t2) 算法</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT /*+ TBase_SMJ(t1, t2) */ * from t1，t2 <span class="built_in">where</span> t1.id = t2.id</span><br></pre></td></tr></table></figure><ul><li>使用 TBase_INLJ(t1, t2) 算法</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT /*+ TBase_INLJ(t1, t2) */ * from t1，t2 <span class="built_in">where</span> t1.id = t2.id</span><br></pre></td></tr></table></figure><h3 id="执行计划"><a href="#执行计划" class="headerlink" title="执行计划"></a>执行计划</h3><ul><li>使用 EXPLAIN 来优化 SQL 语句<ul><li>EXPLAIN 可以和增删改查等语句一起使用，返回结果提供了执行 SQL 详细信息</li><li>通过观察 EXPLAIN 的结果，你可以知道如何给数据表添加索引使得执行计划使用索引从而加速 SQL 语句的执行速度</li></ul></li><li>EXPLAIN 输出格式</li></ul><table><thead><tr><th><strong>属性名</strong></th><th><strong>含义</strong></th></tr></thead><tbody><tr><td>id</td><td>operator 的 id，在整个执行计划中唯一的标识一个 operator</td></tr><tr><td>parents</td><td>这个 operator 的 parent。目前的执行计划可以看做是一个  operator  构成的树状结构，数据从  child  流向 parent，每个 operator  的 parent  有且仅有一个</td></tr><tr><td>operator info</td><td>每个 operator 的详细信息</td></tr><tr><td>count</td><td>预计当前 operator 将会输出的数据条数，基于统计信息以及  operator  的执行逻辑估算而来</td></tr></tbody></table><h3 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h3><table><thead><tr><th><strong>系统变量</strong></th><th><strong>默认值</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>TBase_index_lookup_size</td><td>20000</td><td>设置 index lookup 操作的  batch  大小，OLAP  类应用适合较大的值，OLTP  类应用适合较小的值。</td></tr><tr><td>TBase_distsql_scan_concurrency</td><td>10</td><td>设置 scan 操作的并发度，OLAP  类应用适合较大的值，OLTP  类应用适合较小的值。</td></tr><tr><td>TBase_index_lookup_concurrency</td><td>4</td><td>设置 index lookup 操作的并发度，OLAP  类应用适合较大的值，OLTP  类应用适合较小的值。</td></tr><tr><td>TBase_index_serial_scan_concurrency</td><td>1</td><td>设置顺序 scan 操作的并发度，OLAP  类应用适合较大的值，OLTP  类应用适合较小的值。</td></tr></tbody></table><ul><li>通过 SET 语句设置变量：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> @@TBase_distsql_scan_concurrency = 10</span><br></pre></td></tr></table></figure><ul><li>通过 SET 语句设置全局变量：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> @@global.TBase_distsql_scan_concurrency = 10</span><br></pre></td></tr></table></figure><h2 id="数据传输服务-DTS-配置"><a href="#数据传输服务-DTS-配置" class="headerlink" title="数据传输服务 DTS 配置"></a>数据传输服务 DTS 配置</h2><h3 id="数据迁移整体步骤"><a href="#数据迁移整体步骤" class="headerlink" title="数据迁移整体步骤"></a>数据迁移整体步骤</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104757377.png" alt="image-20230129104757377" style="zoom:50%;"><h3 id="数据迁移操作"><a href="#数据迁移操作" class="headerlink" title="数据迁移操作"></a>数据迁移操作</h3><ol><li>新建 DTS 数据迁移服务</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104814634.png" alt="image-20230129104814634" style="zoom:50%;"><ol start="2"><li>修改配置</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104828030.png" alt="image-20230129104828030" style="zoom:50%;"><ol start="3"><li>选择所要迁移的数据库</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104851031.png" alt="image-20230129104851031" style="zoom:50%;"><ol start="4"><li>校验迁移任务信息</li><li>启动迁移</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104910752.png" alt="image-20230129104910752" style="zoom:50%;"><ol start="6"><li>增量同步</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104928836.png" alt="image-20230129104928836" style="zoom:50%;"><ol start="7"><li>完成迁移</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129104941810.png" alt="image-20230129104941810" style="zoom:50%;"><h3 id="数据订阅"><a href="#数据订阅" class="headerlink" title="数据订阅"></a>数据订阅</h3><ul><li>订阅云数据库TencentDB的增量更新数据步骤：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105004850.png" alt="image-20230129105004850" style="zoom:50%;"><ol><li>新建数据订阅，选择所在地域</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105022538.png" alt="image-20230129105022538" style="zoom:50%;"><ol start="2"><li>对数据订阅通道进行初始化配置，选择源 TencentDB 实例</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105042045.png" alt="image-20230129105042045" style="zoom:50%;"><ol start="3"><li>选择同步类型和订阅对象</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105056146.png" alt="image-20230129105056146" style="zoom: 50%;"><ol start="4"><li>修改消费时间点（可选）</li></ol><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105112152.png" alt="image-20230129105112152" style="zoom:50%;"><h2 id="课程总结-5"><a href="#课程总结-5" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍：<ul><li>不同云数据库实例的配置过程</li><li>本地数据库数据迁移云数据库基本过程</li><li>云数据库的访问与连接</li></ul></li></ul><h1 id="部署可扩展的业务"><a href="#部署可扩展的业务" class="headerlink" title="部署可扩展的业务"></a>部署可扩展的业务</h1><h2 id="弹性伸缩-AS-简介"><a href="#弹性伸缩-AS-简介" class="headerlink" title="弹性伸缩 AS 简介"></a>弹性伸缩 AS 简介</h2><h3 id="弹性伸缩-AS-概念"><a href="#弹性伸缩-AS-概念" class="headerlink" title="弹性伸缩 AS 概念"></a>弹性伸缩 AS 概念</h3><ul><li>弹性伸缩（Auto Scaling）</li><li>根据业务需求和伸缩策略，自动调整计算资源，恰到好处地增加或减少CVM 实例，保证业务平稳健康运行</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105411006.png" alt="image-20230129105411006" style="zoom:50%;"><ul><li>使用与不使用弹性伸缩对比</li></ul><table><thead><tr><th><strong>优势</strong></th><th><strong>使用弹性伸缩 AS</strong></th><th><strong>不使用弹性伸缩 AS</strong></th></tr></thead><tbody><tr><td>自动化</td><td>自动伸缩实例，无需人工干预</td><td>繁琐的手动操作</td></tr><tr><td>省成本</td><td>适量伸缩实例，节省成本</td><td>资源闲置带来浪费</td></tr><tr><td>容错性</td><td>系统自动检测，及时容错</td><td>无法及时容错</td></tr></tbody></table><h3 id="弹性伸缩功能介绍"><a href="#弹性伸缩功能介绍" class="headerlink" title="弹性伸缩功能介绍"></a>弹性伸缩功能介绍</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105446426.png" alt="image-20230129105446426" style="zoom:50%;"><h3 id="弹性伸缩应用场景"><a href="#弹性伸缩应用场景" class="headerlink" title="弹性伸缩应用场景"></a>弹性伸缩应用场景</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105457231.png" alt="image-20230129105457231" style="zoom:50%;"><ul><li>场景一：弹性 web 应用服务</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105528669.png" alt="image-20230129105528669" style="zoom:50%;"><ul><li>场景二：高性能计算集群部署</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105547382.png" alt="image-20230129105547382" style="zoom:50%;"><ul><li>场景三：请求类服务部署</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105607614.png" alt="image-20230129105607614" style="zoom:50%;"><ul><li>场景四：高可用业务部署</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129105631885.png" alt="image-20230129105631885" style="zoom:50%;"><h2 id="弹性伸缩-AS-管理"><a href="#弹性伸缩-AS-管理" class="headerlink" title="弹性伸缩 AS 管理"></a>弹性伸缩 AS 管理</h2><h3 id="弹性伸缩-AS-管理概述"><a href="#弹性伸缩-AS-管理概述" class="headerlink" title="弹性伸缩 AS 管理概述"></a>弹性伸缩 AS 管理概述</h3><ul><li>创建完整的弹性伸缩方案，可以通过以下3步来完成：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129110717434.png" alt="image-20230129110717434" style="zoom:50%;"><h3 id="启动配置管理"><a href="#启动配置管理" class="headerlink" title="启动配置管理"></a>启动配置管理</h3><ul><li>启动配置是自动创建云服务器的模版</li><li>创建启动配置过程：<ul><li>选择地域</li><li>制定参数</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129110808254.png" alt="image-20230129110808254" style="zoom:50%;"><ul><li>启动配置本身不允许编辑，但伸缩组可以更换启动配置</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129110823103.png" alt="image-20230129110823103" style="zoom:50%;"><ul><li>AS 支持提前检测异常</li><li>可以直接在启动配置列表中查看</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129110852350.png" alt="image-20230129110852350" style="zoom:50%;"><h3 id="伸缩组管理"><a href="#伸缩组管理" class="headerlink" title="伸缩组管理"></a>伸缩组管理</h3><ul><li>伸缩组配置管理内容：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129110919917.png" alt="image-20230129110919917" style="zoom:50%;"><ul><li>将负载均衡与伸缩组结合：负载均衡将作为到伸缩组中的实例的所有传入流量的单一接触点</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129110936085.png" alt="image-20230129110936085" style="zoom:50%;"><ul><li>伸缩组是遵循相同规则、面向同一场景的云服务器实例的集合</li><li>创建伸缩组步骤：<ul><li>选择区域</li><li>定义信息</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111004249.png" alt="image-20230129111004249" style="zoom:50%;"><h3 id="扩缩容管理"><a href="#扩缩容管理" class="headerlink" title="扩缩容管理"></a>扩缩容管理</h3><ul><li>配置定时扩缩容任务：使业务根据可预测的负载变化，定时扩展或缩减所使用的云服务器实例数量</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111019863.png" alt="image-20230129111019863" style="zoom:50%;"><ul><li>管理扩缩容告警触发策略：AS可以根据监控的指标动态扩展伸缩组中的实例数量</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111036564.png" alt="image-20230129111036564" style="zoom: 50%;"><ul><li>对于每个伸缩组，可以控制何时扩容缩容，AS还支持手动介入，达到快速手动扩缩容的效果</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111050504.png" alt="image-20230129111050504" style="zoom:50%;"><ul><li>如果需要排查配置或与 Web 应用程序相关的其他问题</li><li>在不触发自动伸缩流程的前提下对应用程序进行更改</li><li>可以暂停伸缩组，完成后再恢复。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111121307.png" alt="image-20230129111121307" style="zoom:50%;"><h3 id="弹性伸缩最佳实践"><a href="#弹性伸缩最佳实践" class="headerlink" title="弹性伸缩最佳实践"></a>弹性伸缩最佳实践</h3><ul><li><p>最佳实践一：为伸缩组设置固定出口IP</p></li><li><p>【需求场景】</p><ul><li>从负载均衡 CLB 接受请求</li><li>集群机器需要主动外访</li><li>外访时希望用固定的外网 IP</li></ul></li><li><p>最佳实践一：系统架构</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111252402.png" alt="image-20230129111252402" style="zoom:50%;"><ul><li>最佳实践二：搭建可伸缩的微信小程序</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111306494.png" alt="image-20230129111306494" style="zoom:50%;"><ul><li>最佳实践三：五分钟节省30%成本（集群版）</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111322352.png" alt="image-20230129111322352" style="zoom:50%;"><ul><li>最佳实践三：新旧方案对比</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111337468.png" alt="image-20230129111337468" style="zoom:50%;"><ul><li>最佳实践三收益分析</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111353176.png" alt="image-20230129111353176" style="zoom:50%;"><h2 id="课程总结-6"><a href="#课程总结-6" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了<ul><li>腾讯云弹性伸缩的基本功能，适用场景</li><li>腾讯云弹性伸缩配置流程，如何配置伸缩组，配置扩缩容等</li><li>腾讯云弹性伸缩最佳实践</li></ul></li></ul><h1 id="部署高可用的业务"><a href="#部署高可用的业务" class="headerlink" title="部署高可用的业务"></a>部署高可用的业务</h1><h2 id="负载均衡配置实战"><a href="#负载均衡配置实战" class="headerlink" title="负载均衡配置实战"></a>负载均衡配置实战</h2><h3 id="负载均衡-1"><a href="#负载均衡-1" class="headerlink" title="负载均衡"></a>负载均衡</h3><h4 id="负载均衡概览"><a href="#负载均衡概览" class="headerlink" title="负载均衡概览"></a>负载均衡概览</h4><ul><li>负载均衡有两种实例类型：负载均衡和传统型负载均衡<ul><li>负载均衡：支持 TCP/UDP/HTTP/HTTPS 协议，提供基于域名和 URL 路径的均衡能力，支持灵活转发</li><li>传统型负载均衡：内网不支持 HTTP/HTTPS 协议，配置方法简单</li></ul></li></ul><ul><li>负载均衡使用场景一：流量分发和消除单点故障</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111942934.png" alt="image-20230129111942934" style="zoom:50%;"><ul><li>负载均衡使用场景二：横向扩展</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129111959600.png" alt="image-20230129111959600" style="zoom:50%;"><ul><li>负载均衡使用场景三：全局负载均衡</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112029684.png" alt="image-20230129112029684" style="zoom:50%;"><ul><li>使用约束限制</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112113558.png" alt="image-20230129112113558" style="zoom:80%;"><h4 id="负载均衡实例配置流程"><a href="#负载均衡实例配置流程" class="headerlink" title="负载均衡实例配置流程"></a>负载均衡实例配置流程</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112142773.png" alt="image-20230129112142773" style="zoom:50%;"><h4 id="创建负载均衡实例"><a href="#创建负载均衡实例" class="headerlink" title="创建负载均衡实例"></a>创建负载均衡实例</h4><ul><li>关键属性<ul><li>选择地域</li><li>实例类型</li><li>网络类型</li><li>所属项目</li><li>实例名</li><li>购买数量</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112240064.png" alt="image-20230129112240064" style="zoom:50%;"><h4 id="为负载均衡实例配置域名"><a href="#为负载均衡实例配置域名" class="headerlink" title="为负载均衡实例配置域名"></a>为负载均衡实例配置域名</h4><ul><li>配置域名的目的是将域名解析到负载均衡实例的公网服务地址上。<ul><li>登录腾讯云【云产品】-【域名与网站】</li><li>【域名管理】-【注册域名】</li><li>进入域名解析页面 - 添加CNAME记录</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112325563.png" alt="image-20230129112325563" style="zoom:50%;"><h3 id="配置监听器"><a href="#配置监听器" class="headerlink" title="配置监听器"></a>配置监听器</h3><h4 id="监听器概述"><a href="#监听器概述" class="headerlink" title="监听器概述"></a>监听器概述</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112431735.png" alt="image-20230129112431735" style="zoom:50%;"><ul><li><p>负载均衡服务主要由负载均衡监听器提供。监听器负责监听负载均衡实例上的请求，执行策略分发流量至后端服务器等服务。</p></li><li><p>支持的协议类型</p><ul><li>HTTP（应用层）：适用需要对数据内容进行识别的应用，如Web应用、小的手机游戏等</li><li>HTTPS（应用层）：适用于需要加密传输的应用。</li><li>TCP（传输层）：适用于注重可靠性，对数据准确性要求高，速度可以相对较慢的场景，如文件传输、发送或接收邮件、远程登录</li><li>UDP（传输层）：适用关注实时性而相对不注重可靠性的场景，如视频聊天、金融实时行情推送</li><li>TCP SSL（传输层）：适用于 TCP 协议下对安全性要求非常高的场景，支持基于 TCP 的自定义协议</li></ul></li><li><p>HTTPS 监听器的安全机制</p><ul><li>负载均衡通过证书解密来自客户端的请求，然后再将请求发送到后端实例上。</li></ul></li><li><p>监听器基本配置流程</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112648826.png" alt="image-20230129112648826" style="zoom:50%;"><h4 id="创建监听器"><a href="#创建监听器" class="headerlink" title="创建监听器"></a>创建监听器</h4><ul><li>创建负载均衡监听器</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112709160.png" alt="image-20230129112709160" style="zoom:50%;"><h4 id="转发组配置"><a href="#转发组配置" class="headerlink" title="转发组配置"></a>转发组配置</h4><ul><li>负载均衡 CLB 的四层转发业务流程<ul><li>RS 绑定到监听器中</li><li>监听器内可独立设置转发端口和权重</li><li>在监听器内设置会话保持，健康检查</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112747650.png" alt="image-20230129112747650" style="zoom:50%;"><ul><li>负载均衡 CLB 的七层转发业务流程<ul><li>RS 绑定到转发组</li><li>转发组内可以独立设置转发端口和权重</li><li>转发组内可以设置会话保持，健康检查</li><li>支持多域名转发功能</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129112911366.png" alt="image-20230129112911366" style="zoom: 50%;"><ul><li>转发组工作流程</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113001031.png" alt="image-20230129113001031" style="zoom:50%;"><ul><li>七层转发匹配规则：优先精确匹配，之后依照规则模糊匹配</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113027758.png" alt="image-20230129113027758" style="zoom:50%;"><ul><li>点击【创建转发规则】可以为监听器配置域名+URL</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113116721.png" alt="image-20230129113116721" style="zoom:50%;"><h4 id="绑定云主机"><a href="#绑定云主机" class="headerlink" title="绑定云主机"></a>绑定云主机</h4><ul><li>通过【绑定云主机】选取我们配置好服务的机器</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113130851.png" alt="image-20230129113130851" style="zoom:50%;"><h4 id="证书配置"><a href="#证书配置" class="headerlink" title="证书配置"></a>证书配置</h4><ul><li>创建 HTTPS 监听器时，至少需要提供服务器证书来进行单向认证</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113156763.png" alt="image-20230129113156763" style="zoom:50%;"><ul><li>利用私钥生成证书请求文件</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113241759.png" alt="image-20230129113241759" style="zoom:50%;"><h4 id="重定向配置"><a href="#重定向配置" class="headerlink" title="重定向配置"></a>重定向配置</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113255160.png" alt="image-20230129113255160" style="zoom:50%;"><ul><li>配置好 HTTPS 监听器</li><li>启用重定向功能</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113317462.png" alt="image-20230129113317462" style="zoom:50%;"><h3 id="后端云服务器操作"><a href="#后端云服务器操作" class="headerlink" title="后端云服务器操作"></a>后端云服务器操作</h3><h4 id="管理后端云服务器"><a href="#管理后端云服务器" class="headerlink" title="管理后端云服务器"></a>管理后端云服务器</h4><ul><li>负载均衡将请求路由至运行正常的后端云服务器实例，如果请求对实例的需求上升，用户需要向负载均衡器添加更多实例以处理需求</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113403581.png" alt="image-20230129113403581" style="zoom:50%;"><ul><li>【负载均衡实例详情】-【监听器管理】-【绑定云主机】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113420144.png" alt="image-20230129113420144" style="zoom: 50%;"><h4 id="安全组配置"><a href="#安全组配置" class="headerlink" title="安全组配置"></a>安全组配置</h4><ul><li>负载均衡的后端云服务器实例可以通过安全组进行访问控制，起到防火墙的作用</li></ul><table><thead><tr><th><strong>类型</strong></th><th><strong>安全组配置说明</strong></th></tr></thead><tbody><tr><td>公网负载均衡</td><td>需要在后端  CVM 的安全组上放通 CLB 的 VIP，CLB 使用 VIP 来探测后端 CVM 的健康状态</td></tr><tr><td>内网负载均衡</td><td>如果CLB 属于 VPC 网络，需要在后端 CVM 的安全组上放通 CLB 的 VIP（用作健康检查）；如果CLB 属于基础网络，无需在后端 CVM 的安全组上配置，默认放通健康检查 IP</td></tr><tr><td>传统型内网负载均衡</td><td>如果实例创建于2016年12月5日前且网络类型为 VPC 网络，则需要在后端 CVM 的安全组上放通 CLB 的 VIP（用作健康检查）；其他类型的传统型内网 CLB 无需在后端 CVM 的安全组上配置，默认放通健康检查 IP</td></tr></tbody></table><ul><li>【云服务器详情】-【安全组】-【配置安全组】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113455750.png" alt="image-20230129113455750" style="zoom:50%;"><h3 id="均衡算法选择与权重配置实例"><a href="#均衡算法选择与权重配置实例" class="headerlink" title="均衡算法选择与权重配置实例"></a>均衡算法选择与权重配置实例</h3><h4 id="负载均衡算法介绍"><a href="#负载均衡算法介绍" class="headerlink" title="负载均衡算法介绍"></a>负载均衡算法介绍</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113548223.png" alt="image-20230129113548223" style="zoom:50%;"><h4 id="负载均衡算法配置实例"><a href="#负载均衡算法配置实例" class="headerlink" title="负载均衡算法配置实例"></a>负载均衡算法配置实例</h4><table><thead><tr><th><strong>序号</strong></th><th><strong>场景</strong></th><th><strong>权重配置建议</strong></th></tr></thead><tbody><tr><td>1</td><td>有3台配置相同的RS，权重都设置为10，此时新增1台RS。</td><td>使用最小连接数的均衡方式，  快速的让第四台RS的负载提升</td></tr><tr><td>2</td><td>用户首次接触云服务，网站负载较低</td><td>购买相同配置的RS，权重都设为10，采用加权轮询的均衡方式</td></tr><tr><td>3</td><td>5台服务器用于承载简单的静态网站访问，且5台服务器的计算能力的比例为 9：3：3：3：1</td><td>将RS权重比例设置为90，30，30，30，10，采用加权轮询的均衡方式</td></tr><tr><td>4</td><td>10台RS用于承担海量的WEB访问请求，某台RS经常会因为负载过高而重启</td><td>根据RS的性能进行相应的权重设置，给负载过高的RS设置较小的权值</td></tr><tr><td>5</td><td>3台RS用于处理若干长连接请求，且这3太服务器的计算能力比例为3：1：1</td><td>采用最小连接数的均衡方式，并适当降低繁忙服务器的权重</td></tr><tr><td>6</td><td>用户希望后续客户端的请求可以分配到同一服务器上</td><td>采用ip_hash的均衡方式进行流量分发</td></tr></tbody></table><h3 id="实现监控与告警"><a href="#实现监控与告警" class="headerlink" title="实现监控与告警"></a>实现监控与告警</h3><h4 id="监控告警概述"><a href="#监控告警概述" class="headerlink" title="监控告警概述"></a>监控告警概述</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113816608.png" alt="image-20230129113816608" style="zoom:50%;"><ul><li>一定周期内监控某些特定指标</li><li>根据给定阀值每隔若干时间段发送告警</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113852099.png" alt="image-20230129113852099" style="zoom:50%;"><h4 id="获取监控数据"><a href="#获取监控数据" class="headerlink" title="获取监控数据"></a>获取监控数据</h4><ul><li>【负载均衡控制台】-【实例ID】-【监控】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113916175.png" alt="image-20230129113916175" style="zoom:50%;"><h4 id="配置告警"><a href="#配置告警" class="headerlink" title="配置告警"></a>配置告警</h4><ul><li>目的：给某台负载均衡实例外网监听器配置告警策略，每 1 分钟收集一次入包量数据，若入包量连续两次大于100个/秒，则触发告警。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129113950644.png" alt="image-20230129113950644" style="zoom: 50%;"><ul><li>第一步：新建告警策略，配置基础选项</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114013937.png" alt="image-20230129114013937" style="zoom:50%;"><ul><li>第二步：配置告警对象</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114026789.png" alt="image-20230129114026789" style="zoom:50%;"><ul><li>第三步：设置告警触发条件</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114041152.png" alt="image-20230129114041152" style="zoom:50%;"><ul><li>第四步：配置告警渠道</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114052552.png" alt="image-20230129114052552" style="zoom:50%;"><h2 id="CDN-加速配置实战"><a href="#CDN-加速配置实战" class="headerlink" title="CDN 加速配置实战"></a>CDN 加速配置实战</h2><h3 id="启用-CDN-服务"><a href="#启用-CDN-服务" class="headerlink" title="启用 CDN 服务"></a>启用 CDN 服务</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114254034.png" alt="image-20230129114254034" style="zoom:50%;"><h3 id="域名管理"><a href="#域名管理" class="headerlink" title="域名管理"></a>域名管理</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114416682.png" alt="image-20230129114416682" style="zoom:50%;"><h4 id="接入域名"><a href="#接入域名" class="headerlink" title="接入域名"></a>接入域名</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114619177.png" alt="image-20230129114619177" style="zoom:50%;"><h5 id="添加域名"><a href="#添加域名" class="headerlink" title="添加域名"></a>添加域名</h5><ul><li>第一步：在 CDN 控制台中接入域名，享受腾讯云 CDN 提供的加速服务。登录 【CDN 控制台】，单击左侧【域名管理】菜单，选择【添加域名】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114713838.png" alt="image-20230129114713838" style="zoom:50%;"><h5 id="域名配置——域名"><a href="#域名配置——域名" class="headerlink" title="域名配置——域名"></a>域名配置——域名</h5><ul><li><p>第二步：进入【添加域名】 页面，输入需要加速的域名</p><ul><li><p>可以输入一个或多个（点击添加输入多个）域名</p></li><li><p>本章涉及到的大多数“域名配置”操作都在此页面进行。</p></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114832576.png" alt="image-20230129114832576" style="zoom: 67%;"><ul><li>第三步：当域名数量较多时，可以划分项目对域名进行管理；<ul><li>选择该加速域名【所属项目】</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129114859466.png" alt="image-20230129114859466" style="zoom:50%;"><h5 id="域名配置——所属项目"><a href="#域名配置——所属项目" class="headerlink" title="域名配置——所属项目"></a>域名配置——所属项目</h5><ul><li>第三步：当域名数量较多时，可以划分项目对域名进行管理；<ul><li>选择该加速域名【所属项目】</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115001292.png" alt="image-20230129115001292" style="zoom:50%;"><h5 id="域名配置——源站管理"><a href="#域名配置——源站管理" class="headerlink" title="域名配置——源站管理"></a>域名配置——源站管理</h5><ul><li>第四步：选择【源站类型】，并填写相应的【源站设置】。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115033160.png" alt="image-20230129115033160" style="zoom:50%;"><h5 id="域名配置——加速服务业务类型"><a href="#域名配置——加速服务业务类型" class="headerlink" title="域名配置——加速服务业务类型"></a>域名配置——加速服务业务类型</h5><ul><li>第五步：选择加速服务的业务类型，如静态加速、下载加速等。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115116642.png" alt="image-20230129115116642" style="zoom:50%;"><h5 id="域名配置——加速服务基础配置"><a href="#域名配置——加速服务基础配置" class="headerlink" title="域名配置——加速服务基础配置"></a>域名配置——加速服务基础配置</h5><ul><li>第六步：如果希望对用户请求URL中“？”之后的参数进行过滤，可以勾选【基本配置】-【开启过滤参数】</li><li>此外，为避免无限期缓存源站信息，需要做【缓存过期配置】。</li><li>完成配置后，单击【提交】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115453930.png" alt="image-20230129115453930" style="zoom:50%;"><h5 id><a href="#" class="headerlink" title></a></h5><h4 id="配置-CNAME"><a href="#配置-CNAME" class="headerlink" title="配置 CNAME"></a>配置 CNAME</h4><h4 id="腾讯云-CNAME-配置"><a href="#腾讯云-CNAME-配置" class="headerlink" title="腾讯云 CNAME  配置"></a>腾讯云 CNAME  配置</h4><ul><li><p>若DNS 服务商为腾讯云，可通过如下步骤添加 CNAME 记录。</p></li><li><p>第一步， 登录【域名服务】控制台，单击要添加 CNAME 记录的域名右侧的【解析】。</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115549718.png" alt="image-20230129115549718" style="zoom:50%;"><ul><li>第二步， 跳转到指定域名的记录管理页面，单击【添加记录】。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115604959.png" alt="image-20230129115604959" style="zoom:50%;"><ul><li>第三步，在主机记录处填写域名前缀（如：www），将 记录类型 设置为 CNAME，在 记录值 处填写 CNAME 域名，单击【保存】，即可添加 CNAME 记录</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115626091.png" alt="image-20230129115626091" style="zoom:50%;"><h4 id="验证-CNAME"><a href="#验证-CNAME" class="headerlink" title="验证 CNAME"></a>验证 CNAME</h4><ul><li>不同的 DNS 服务商，CNAME 生效的时间略有不同，一般在半个小时之内生效。您可以通过 nslookup 或 dig 的方式来查询 CNAME 是否生效</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115704330.png" alt="image-20230129115704330" style="zoom:50%;"><h3 id="源站信息配置"><a href="#源站信息配置" class="headerlink" title="源站信息配置"></a>源站信息配置</h3><h4 id="修改源站"><a href="#修改源站" class="headerlink" title="修改源站"></a>修改源站</h4><ul><li>登录CDN控制台，选择左侧菜单栏的【域名管理】，单击所要编辑的域名右侧的【管理】，进入该加速域名的“域名管理控制台”。 </li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115806382.png" alt="image-20230129115806382" style="zoom:50%;"><ul><li>在“基本配置”页面，可以看到源站信息模块，可查看域名当前的源站配置。单击“源站信息-主源站”右上角【编辑】图标，可以对主源站的源站类型及源站地址进行修改。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115824059.png" alt="image-20230129115824059" style="zoom:50%;"><h4 id="添加热备源站"><a href="#添加热备源站" class="headerlink" title="添加热备源站"></a>添加热备源站</h4><ul><li>针对源站为【自有源】类型的域名，可为其添加热备源站配置，当回源请求至主源站错误（包括 4XX、5XX 错误码及 TCP 连接错误）后，会直接回源至热备源站</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115842781.png" alt="image-20230129115842781" style="zoom:50%;"><h4 id="切换主备设置"><a href="#切换主备设置" class="headerlink" title="切换主备设置"></a>切换主备设置</h4><ul><li>配置好备用源站后，单击【主备切换】图标即可一键切换主源站/备用源站的配置。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129115856253.png" alt="image-20230129115856253" style="zoom:50%;"><h4 id="回源-HOST-设置"><a href="#回源-HOST-设置" class="headerlink" title="回源 HOST 设置"></a>回源 HOST 设置</h4><ul><li>登录 CDN 控制台，单击左侧目录的【域名管理】，进入管理页面</li><li>在列表中找到您需要编辑的域名所在行，单击操作栏的【管理】</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129120000602.png" alt="image-20230129120000602" style="zoom:50%;"><ul><li>默认情况下，子域名的回源 HOST 为所配置的加速域名，泛域名回源 HOST 为访问域名。也可以根据自身业务情况配置自定义回源 HOST。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129120044183.png" alt="image-20230129120044183" style="zoom:50%;"><h3 id="访问控制配置"><a href="#访问控制配置" class="headerlink" title="访问控制配置"></a>访问控制配置</h3><h4 id="访问控制概述"><a href="#访问控制概述" class="headerlink" title="访问控制概述"></a>访问控制概述</h4><ul><li>腾讯云支持通过控制台或 API 接口自助配置基于 referer、客户端 IP 的访问控制策略，支持 IP 访问限频、带宽上限，有效抵御内容盗链和 CC 攻击</li></ul><table><thead><tr><th><strong>配置</strong></th><th><strong>实现功能</strong></th><th><strong>使用场景</strong></th></tr></thead><tbody><tr><td>过滤参数</td><td>控制在缓存时是否对用户请求  URL 中 “?” 之后的参数进行过滤</td><td>资源URL中不同参数代表相同的内容，建议开启，提升缓存命中率</td></tr><tr><td>防盗链</td><td>对业务资源的访问来源进行控制</td><td>避免恶意用户盗刷</td></tr><tr><td>IP黑白名单</td><td>根据业务需要对用户请求的源  IP 配置过滤策略</td><td>解决恶意  IP 盗刷、攻击等问题</td></tr><tr><td>IP访问限频</td><td>对一个源IP 在每一个节点每一秒钟访问次数进行限制</td><td>抵御CC攻击</td></tr><tr><td>视频拖拽</td><td>视频点播场景中，当用户拖拽播放进度时，会按请求精确返回数据</td><td>开启过滤参数，源站支持  range 请求</td></tr></tbody></table><h4 id="过滤参数配置"><a href="#过滤参数配置" class="headerlink" title="过滤参数配置"></a>过滤参数配置</h4><h5 id="默认配置效果"><a href="#默认配置效果" class="headerlink" title="默认配置效果"></a>默认配置效果</h5><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129120356869.png" alt="image-20230129120356869" style="zoom:50%;"><h5 id="启用过滤参数"><a href="#启用过滤参数" class="headerlink" title="启用过滤参数"></a>启用过滤参数</h5><ul><li>登录 CDN 控制台，单击左侧目录的【域名管理】，进入管理页面，在列表中找到您需要编辑的域名所在行，单击操作栏的【管理】</li><li>单击【访问控制】选项卡，在过滤参数配置模块，进行过滤参数配置</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129120418700.png" alt="image-20230129120418700" style="zoom:50%;"><h5 id="开启过滤参数效果"><a href="#开启过滤参数效果" class="headerlink" title="开启过滤参数效果"></a>开启过滤参数效果</h5><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129120432370.png" alt="image-20230129120432370" style="zoom:50%;"><h4 id="防盗链配置"><a href="#防盗链配置" class="headerlink" title="防盗链配置"></a>防盗链配置</h4><ul><li>登录 CDN 控制台，在左侧目录中，单击【域名管理】，进入管理页面</li><li>在列表中，找到您需要编辑的域名所在行，单击操作栏的【管理】</li><li>单击【访问控制】选项卡，可在防盗链配置模块进行配置</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129120457123.png" alt="image-20230129120457123" style="zoom:50%;"><ul><li><p><strong>配置</strong> <strong>referer</strong> <strong>白名单</strong></p><ul><li>单击防盗链配置处【编辑】图标，选中 <strong>referer 白名单</strong>，可进行白名单配置。</li></ul></li></ul><ul><li><strong>配置 referer 黑名单</strong><ul><li>单击防盗链配置处【编辑】图标，选中 <strong>referer</strong> <strong>黑名单</strong>，可进行黑名单配置。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129120835997.png" alt="image-20230129120835997" style="zoom:50%;"><h4 id="IP-黑白名单配置"><a href="#IP-黑白名单配置" class="headerlink" title="IP 黑白名单配置"></a>IP 黑白名单配置</h4><ul><li>CDN 提供了 IP 黑白名单配置功能，可以根据业务需要对用户请求的源 IP 配置过滤策略，解决恶意 IP 盗刷、攻击等问题。</li><li>单击【访问控制】，可以在 <strong>IP</strong> <strong>黑白名单配置</strong> 模块进行配置，默认情况下，IP 黑白名单未启用</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129141635561.png" alt="image-20230129141635561" style="zoom:50%;"><ul><li><strong>配置 IP 白名单</strong><ul><li>单击开启IP黑白名单，默认选中 <strong>IP</strong> <strong>白名单</strong>，可进行白名单配置</li></ul></li><li><strong>配置 IP 黑名单</strong><ul><li>单击开启IP黑白名单，选中 <strong>IP</strong> <strong>黑名单</strong>，可进行黑名单配置</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129141924351.png" alt="image-20230129141924351" style="zoom:50%;"><h4 id="IP访问限频配置"><a href="#IP访问限频配置" class="headerlink" title="IP访问限频配置"></a>IP访问限频配置</h4><ul><li>CDN 提供了 IP 访问限频配置，通过对每一个 IP 在每一个节点每一秒钟访问次数进行限制，进行 CC 攻击的抵御。</li><li>单击【访问控制】，可以看到 <strong>IP 访问限频配置</strong> 模块，点击开启按钮进行配置。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129143845540.png" alt="image-20230129143845540" style="zoom:50%;"><ul><li>单击按钮打开 IP 访问限频，此时系统会根据最近 30 天的单 IP 平均访问量给出一个建议阈值，可以在下方 <strong>当前单</strong> <strong>IP</strong> <strong>访问阈值</strong> 看到给定的默认阈值</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144011682.png" alt="image-20230129144011682" style="zoom:50%;"><ul><li>单击【编辑】按钮，可以设置单 IP 访问阈值。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144045732.png" alt="image-20230129144045732" style="zoom:50%;"><h4 id="视频拖拽配置"><a href="#视频拖拽配置" class="headerlink" title="视频拖拽配置"></a>视频拖拽配置</h4><ul><li>视频拖拽主要产生于视频点播场景中，当用户拖拽播放进度时可以准确响应。</li><li>单击【访问控制】，可以看到<strong>视频拖拽</strong> 模块，点击开启按钮。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144121933.png" alt="image-20230129144121933" style="zoom:50%;"><ul><li>单击按钮打开视频拖拽，若 过滤参数配置 为关闭状态，开启视频拖拽会自动开启过滤参数。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144139536.png" alt="image-20230129144139536" style="zoom:50%;"><p><strong>参数说明</strong></p><table><thead><tr><th><strong>文件类型</strong></th><th><strong>Meta 信息</strong></th><th><strong>Start 参数说明</strong></th><th><strong>请求示例</strong></th></tr></thead><tbody><tr><td>MP4</td><td>源站视频的  meta 信息必须在文件头部</td><td>start  表示时间，单位是秒</td><td><a href="http://www.test.com/demo.mp4?start=10">http://www.test.com/demo.mp4?start=10</a>  表示从第10秒开始播放</td></tr><tr><td>FLV</td><td>源站视频必须带有  meta 信息</td><td>start  表示字节</td><td><a href="http://www.test.com/demo.flv?start=10">http://www.test.com/demo.flv?start=10</a>  表示从第10个字节开始播放</td></tr><tr><td>TS</td><td>无特殊要求</td><td>同MP4的Start参数说明</td><td><a href="http://www.test.com/demo.ts?start=10">http://www.test.com/demo.ts?start=10</a>  表示从第10秒开始播放</td></tr></tbody></table><h3 id="缓存配置"><a href="#缓存配置" class="headerlink" title="缓存配置"></a>缓存配置</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144216345.png" alt="image-20230129144216345" style="zoom: 50%;"><h4 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h4><ul><li>在不对缓存时间做配置的情况下，腾讯云会默认关闭高级缓存过期配置。</li><li>单击【缓存配置】，可以看到 <strong>缓存过期配置</strong> 模块。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144244271.png" alt="image-20230129144244271" style="zoom: 50%;"><h4 id="新增缓存配置"><a href="#新增缓存配置" class="headerlink" title="新增缓存配置"></a>新增缓存配置</h4><ul><li>除了默认配置，还可以根据自身业务需求，新增缓存时间配置，腾讯云CDN 支持四种方式的缓存过期时间设置。</li></ul><table><thead><tr><th><strong>方式</strong></th><th><strong>特点</strong></th><th><strong>使用场景</strong></th></tr></thead><tbody><tr><td>按文件类型</td><td>填充文件类型后缀，每项用  ; 隔开，内容区分大小写，必须是以 . 开头的文件后缀</td><td>需要对某类文件设置统一缓存时间</td></tr><tr><td>按文件夹</td><td>每项用  ; 隔开，必须以“/”开头，不能以“/”结尾</td><td>需要对某个文件夹设置缓存时间</td></tr><tr><td>按全路径文件</td><td>每项用  ; 隔开，内容区分大小写，支持*匹配某一类型文件</td><td>为某一具体文件，或某文件夹下的某一类文件设置缓存时间</td></tr><tr><td>首页</td><td>指定首页设置缓存时间</td><td>首页所有内容统一缓存时间</td></tr></tbody></table><ul><li>合理的配置缓存时间，能够有效的提升命中率，降低回源率，节省带宽。</li><li>单击【新增缓存配置】，选择类型，填充内容，设置缓存时间，单击“确认”，即可添加缓存配置。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144326147.png" alt="image-20230129144326147" style="zoom:50%;"><h4 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h4><ul><li>当设置了多条缓存策略时，相互之间会有重复，配置项列表底部优先级高于顶部优先级。</li><li>单击【调整优先级】可以调整配置顺序。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144351256.png" alt="image-20230129144351256" style="zoom: 50%;"><ul><li>使用右侧上下箭头调整缓存过期时间配置的顺序，单击【保存】即可完成调整。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144410260.png" alt="image-20230129144410260" style="zoom:50%;"><ul><li>当设置了多条缓存策略时，相互之间会有重复，配置项列表底部优先级高于顶部优先级。假设某域名配置了如下缓存配置：</li></ul><table><thead><tr><th><strong>缓存策略</strong></th><th><strong>匹配方式</strong></th></tr></thead><tbody><tr><td>所有文件  30天</td><td>匹配第一条所有文件，命中，此时缓存时间为  30 天</td></tr><tr><td>.php .jsp .aspx 0秒</td><td>匹配第二条，未命中</td></tr><tr><td>.jpg  .png .gif 300秒</td><td>匹配第三条，命中，此时缓存时间为  300 秒</td></tr><tr><td>/test/*.jpg  400秒</td><td>匹配第四条，命中，此时缓存时间为  400 秒</td></tr><tr><td>/test/abc.jpg  200秒</td><td>匹配第五条，命中，此时缓存时间为  200 秒</td></tr></tbody></table><p>​     因此最终缓存时间为 200 秒，以最后一次匹配生效。</p><h3 id="回源配置"><a href="#回源配置" class="headerlink" title="回源配置"></a>回源配置</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144504369.png" alt="image-20230129144504369" style="zoom:50%;"><h4 id="中间源配置"><a href="#中间源配置" class="headerlink" title="中间源配置"></a>中间源配置</h4><ul><li>开启了中间源后，用户的请求回源行为会在中间源进行收敛，由中间源统一回源获取数据，为提升您的 CDN 加速效果，有效缓解回源后源站的访问压力。</li><li>以下左侧为开启中间源配置（默认）效果；右侧为关闭效果。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144528599.png" alt="image-20230129144528599" style="zoom:50%;"><ul><li>单击【回源配置】，可以看到 中间源配置 模块。默认情况下中间源配置为开启状态。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144541058.png" alt="image-20230129144541058" style="zoom:50%;"><h4 id="Range-回源配置"><a href="#Range-回源配置" class="headerlink" title="Range 回源配置"></a>Range 回源配置</h4><ul><li>CDN 提供 Range 回源配置功能，Range 是 Http 请求头中的字段，用于文件指定部分的请求</li><li>单击【回源配置】，可以看到 <strong>Range</strong> <strong>回源配置</strong> 模块，点击按钮，可以开启或关闭</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144619443.png" alt="image-20230129144619443" style="zoom:50%;"><ul><li>假设用户甲请求资源：<a href="http://www.test.com/test.apk%EF%BC%8C%E8%8A%82%E7%82%B9%E6%94%B6%E5%88%B0%E8%AF%B7%E6%B1%82%E5%90%8E%EF%BC%8C%E5%8F%91%E7%8E%B0%E7%BC%93%E5%AD%98%E7%9A%84%E2%80%9Ctest.apk%E2%80%9D%E6%96%87%E4%BB%B6%E5%B7%B2%E8%BF%87%E6%9C%9F%EF%BC%8C%E6%AD%A4%E6%97%B6%E5%8F%91%E8%B5%B7%E5%9B%9E%E6%BA%90%E8%AF%B7%E6%B1%82%EF%BC%8C%E5%88%99%EF%BC%9A">http://www.test.com/test.apk，节点收到请求后，发现缓存的“test.apk”文件已过期，此时发起回源请求，则：</a><ul><li><strong>当</strong> <strong>Range</strong> <strong>回源开启时</strong>：节点回源使用 Range 请求，分片获取资源并缓存。若此时用户乙发起的也为 Range 请求，当节点上存储的分片已满足 Range 中指定的字节段，则会直接返回给用户，无需等所有分片获取完毕。</li><li><strong>当</strong> <strong>Range</strong> <strong>回源关闭时</strong>：节点会直接向源站获取整个资源，待完整获取资源后再返回给用户。</li></ul></li></ul><h4 id="回源跟随-301-302-配置"><a href="#回源跟随-301-302-配置" class="headerlink" title="回源跟随 301/302 配置"></a>回源跟随 301/302 配置</h4><ul><li><p>开启CDN 提供回源跟随 301/302 配置后，当节点回源请求返回 301/302 状态码时，CDN 节点会直接向跳转地址请求资源而不返回 301/302 给用户。</p></li><li><p>单击【回源配置】，可以看到 <strong>回源跟随</strong> <strong>301/302</strong> <strong>配置</strong> 模块，点击按钮可以开启或关闭该功能。</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144733720.png" alt="image-20230129144733720" style="zoom: 67%;"><ul><li>假设用户请求资源：<a href="http://www.test.com/1.jpg%EF%BC%8C%E5%9C%A8%E8%8A%82%E7%82%B9%E6%9C%AA%E5%91%BD%E4%B8%AD%E7%BC%93%E5%AD%98%EF%BC%8C%E5%88%99%E8%8A%82%E7%82%B9%E4%BC%9A%E8%AF%B7%E6%B1%82%E6%BA%90%E7%AB%99%E8%8E%B7%E5%8F%96%E6%89%80%E9%9C%80%E8%B5%84%E6%BA%90%EF%BC%8C%E8%8B%A5%E6%BA%90%E7%AB%99%E8%BF%94%E5%9B%9E%E7%9A%84">http://www.test.com/1.jpg，在节点未命中缓存，则节点会请求源站获取所需资源，若源站返回的</a> HTTP Response 状态码为301/302，跳转指向地址为 <a href="http://www.abc.com/1.jpg%EF%BC%8C%E5%88%99%EF%BC%9A">http://www.abc.com/1.jpg，则：</a></li><li><strong>当回源跟随</strong> <strong>301/302</strong> <strong>开启时</strong>：<ol><li>节点将该 HTTP Response 直接返回给用户</li><li>用户向 <a href="http://www.abc.com/1.jpg">http://www.abc.com/1.jpg</a> 发起请求，若该域名未接入 CDN，则不会有加速效果</li><li>若此时用户 B 也向 <a href="http://www.test.com/1.jpg">http://www.test.com/1.jpg</a> 发起请求，则会重复上述流程</li></ol></li></ul><h3 id="CDN-高级配置"><a href="#CDN-高级配置" class="headerlink" title="CDN 高级配置"></a>CDN 高级配置</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144828879.png" alt="image-20230129144828879" style="zoom:50%;"><h4 id="带宽封顶配置"><a href="#带宽封顶配置" class="headerlink" title="带宽封顶配置"></a>带宽封顶配置</h4><ul><li>如果为了抵抗超强 DDoS 攻击或者控制 CDN 费用，可以选择启用带宽封顶功能。</li><li>单击【高级配置】，可以看到 <strong>带宽封顶配置</strong> 模块，点击按钮开启或关闭该功能。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144855065.png" alt="image-20230129144855065" style="zoom:50%;"><ul><li>单击按钮开启带宽封顶，默认情况下，带宽阈值为 <strong>10Gbps</strong>，到达阈值后会 <strong>访问回源</strong>。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144910859.png" alt="image-20230129144910859" style="zoom:50%;"><ul><li>单击【编辑】图标，可以设置带宽阈值及超出阈值后对用户请求的处理方式。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144925771.png" alt="image-20230129144925771" style="zoom:67%;"><ul><li>超出封顶阈值后，腾讯云会通过邮件、短信方式通知，也可以自行在 CDN 控制台查看域名状态。不论设置为【访问回源】还是【访问返回 404】，域名均转为 <strong>已关闭</strong> 状态。【访问回源】/【访问返回 404】行为生效时间约为 <strong>5-15</strong> <strong>分钟</strong>。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129144939679.png" alt="image-20230129144939679" style="zoom:50%;"><h4 id="HTTPS-设置"><a href="#HTTPS-设置" class="headerlink" title="HTTPS 设置"></a>HTTPS 设置</h4><ul><li>HTTPS 是一种在 HTTP 协议基础上进行传输加密的安全协议，能够有效保障数据传输安全。</li><li>单击 【高级配置】，找到 <strong>HTTPS</strong> <strong>配置</strong> 模块。单击【前往配置】，跳转至 <strong>证书管理</strong> 页面配置证书。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145011790.png" alt="image-20230129145011790" style="zoom:50%;"><ul><li>证书 <strong>配置成功</strong> 后，会出现【强制跳转 HTTPS】开关。开启后，即使用户发起 HTTP 请求，也会强制跳转为 HTTPS 请求进行访问。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145024972.png" alt="image-20230129145024972" style="zoom:50%;"><ul><li>在成功为域名配置了 HTTPS 证书后，可以开启 HTTP2.0。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145042725.png" alt="image-20230129145042725" style="zoom:50%;"><h4 id="SEO-优化配置"><a href="#SEO-优化配置" class="headerlink" title="SEO 优化配置"></a>SEO 优化配置</h4><ul><li>SEO 优化配置是解决域名接入 CDN 后，因 CDN 频繁变更 IP 而影响域名搜索结果权重问题的功能。</li><li>单击【高级配置】，可以看到<strong>SEO</strong> <strong>优化配置</strong> 模块。默认情况下，搜索引擎自动回源为关闭状态。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145137179.png" alt="image-20230129145137179" style="zoom:50%;"><h4 id="HTTP-Header-配置"><a href="#HTTP-Header-配置" class="headerlink" title="HTTP Header 配置"></a>HTTP Header 配置</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145155992.png" alt="image-20230129145155992" style="zoom:50%;"><h5 id="添加-HTTP-header"><a href="#添加-HTTP-header" class="headerlink" title="添加 HTTP header"></a>添加 HTTP header</h5><ul><li>使用腾讯云提供的 HTTP header 配置功能，当您的用户请求业务资源时，可以在返回的 <strong>响应消息</strong> 添加您配置的头部，以实现跨域访问等目的。</li><li>单击【高级配置】，可以看到 <strong>HTTP header</strong> <strong>配置</strong> 模块，单击【添加 HTTP header】。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145237346.png" alt="image-20230129145237346" style="zoom:50%;"><ul><li>可以在下拉菜单中选择需要添加的 HTTP header 及填写其对应配置，单击【添加参数】可以增加一个 header，每个 header 仅允许添加一次。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145250085.png" alt="image-20230129145250085" style="zoom:50%;"><ul><li>单击【确定】，即可完成配置，配置生效时间大概 5 分钟。</li></ul><h5 id="管理-HTTP-Header"><a href="#管理-HTTP-Header" class="headerlink" title="管理 HTTP Header"></a>管理 HTTP Header</h5><ul><li>也可以对已经添加的 HTTP header 进行【修改】或【删除】。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145425163.png" alt="image-20230129145425163" style="zoom:50%;"><h5 id="HTTP-Header"><a href="#HTTP-Header" class="headerlink" title="HTTP Header"></a>HTTP Header</h5><p>HTTP 的消息通常包括以下两种：客户端向服务端发送的<strong>请求消息，</strong>服务端向客户端发送的<strong>响应消息，</strong>它们均由一个起始行，一个或多个头部，一个标明头部结束的空行和可选的消息体组成。</p><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145447196.png" alt="image-20230129145447196" style="zoom:50%;"><h4 id="智能压缩"><a href="#智能压缩" class="headerlink" title="智能压缩"></a>智能压缩</h4><ul><li>开启智能压缩后，CDN 在返回内容时会按照设定规则对资源进行 GZIP 、 Brotli 压缩，有效减少传输内容大小，节省开销</li><li>单击【高级配置】，可以看到<strong>智能压缩</strong> 模块。默认情况下，智能压缩为开启状态。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145544534.png" alt="image-20230129145544534" style="zoom:50%;"><ul><li>单击【编辑】，可以按需调整压缩对象、文件大小范围及压缩方式支持指定后缀压缩 GZIP 支持压缩范围 0M~30MB</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129145617675.png" alt="image-20230129145617675" style="zoom:50%;"><h2 id="课程总结-7"><a href="#课程总结-7" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了<ul><li>部署云负载均衡服务的基本流程和概念</li><li>配置 CLB 监听，后端云服务器，实现监控与告警，负载均衡轮询算法的步骤</li><li>启用云CDN服务的基本流程和相关概念</li><li>配置CDN域名，源站，CDN访问控制，缓存过期，回源的步骤</li></ul></li></ul><h1 id="监控云上业务环境"><a href="#监控云上业务环境" class="headerlink" title="监控云上业务环境"></a>监控云上业务环境</h1><h2 id="云监控-CM-简介"><a href="#云监控-CM-简介" class="headerlink" title="云监控 CM 简介"></a>云监控 CM 简介</h2><h3 id="云监控-CM-概述"><a href="#云监控-CM-概述" class="headerlink" title="云监控 CM 概述"></a>云监控 CM 概述</h3><ul><li><p>云监控 CM（Cloud Monitor）是一项针对云资源进行监控的服务</p></li><li><p>云监控的作用是实时监控云资源，通过提取云产品关键指标，用图表进行展示。</p></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150010509.png" alt="image-20230129150010509" style="zoom:50%;"><h3 id="云监控产品功能"><a href="#云监控产品功能" class="headerlink" title="云监控产品功能"></a>云监控产品功能</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150024797.png" alt="image-20230129150024797" style="zoom:50%;"><h3 id="云监控应用场景"><a href="#云监控应用场景" class="headerlink" title="云监控应用场景"></a>云监控应用场景</h3><table><thead><tr><th><strong>应用场景</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>云产品监控</td><td>快速查看产品运行状态及指标的使用情况，并为监控项设置报警规则。</td></tr><tr><td>自定义监控</td><td>自定义监控补充了云产品监控的不足，进行采集能实时、精准地了解业务的健康状况。</td></tr><tr><td>事件监控</td><td>监控重要事件信息，对事件类型上报的数据进行查询、设置告警等操作。</td></tr><tr><td>及时处理异常场景</td><td>告警策略达到告警阈值时发送告警信息，可及时获取异常通知并查询异常原因。</td></tr><tr><td>及时扩容场景</td><td>设置告警规则了解云产品现状，在业务量上升后能够及时收到告警通知，并可根据监控数据进行相应的服务扩容。</td></tr></tbody></table><h2 id="云监控-CM-管理"><a href="#云监控-CM-管理" class="headerlink" title="云监控 CM 管理"></a>云监控 CM 管理</h2><h3 id="云监控-CM-管理概述"><a href="#云监控-CM-管理概述" class="headerlink" title="云监控 CM 管理概述"></a>云监控 CM 管理概述</h3><ul><li>云监控CM（Cloud Monitor）关键词<ul><li>指标</li><li>命名空间</li><li>数据粒度</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150126578.png" alt="image-20230129150126578" style="zoom:50%;"><ul><li>CM 指标属性：<ul><li>时间戳<ul><li>原始数据采集的时间</li></ul></li><li>单位<ul><li>原始数据的度量单位</li></ul></li><li>时间段<ul><li>云监控统计数据的间隔时间长度</li></ul></li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150230419.png" alt="image-20230129150230419" style="zoom:50%;"><h3 id="云监控-CM-运维管理流程"><a href="#云监控-CM-运维管理流程" class="headerlink" title="云监控 CM 运维管理流程"></a>云监控 CM 运维管理流程</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150251105.png" alt="image-20230129150251105" style="zoom:50%;"><h4 id="云监控概况"><a href="#云监控概况" class="headerlink" title="云监控概况"></a>云监控概况</h4><ul><li>核心异常情况<ul><li>云服务器 ping 不可达</li><li>云服务器磁盘只读</li><li>云服务器无监控数据</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150602444.png" alt="image-20230129150602444" style="zoom:50%;"><h4 id="Dashboard-运维管理"><a href="#Dashboard-运维管理" class="headerlink" title="Dashboard 运维管理"></a>Dashboard 运维管理</h4><ul><li>Dashboard 概述：<ul><li>Dashboard提供了自定义监控面板的服务，实现自定义关键的指标进行盯屏展示功能</li></ul></li><li>应用场景：<ul><li>跨产品跨实例订阅关键指标监控图表，监控大盘盯屏展示</li><li>大批量实例指标数据汇聚展示功能，大批量监控解决方案</li><li>故障排障时对各实例进行关键指标数据对比</li><li>灵活调节图表顺序、展示区间、刷新频率及粒度，满足个性化的视图需求</li></ul></li></ul><ul><li>创建和查看 Dashboard</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150811780.png" alt="image-20230129150811780" style="zoom:50%;"><h3 id="告警服务运维管理流程"><a href="#告警服务运维管理流程" class="headerlink" title="告警服务运维管理流程"></a>告警服务运维管理流程</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150851317.png" alt="image-20230129150851317" style="zoom:50%;"><ul><li>在某些产品状态改变时，可以创建告警来及时通知采取措施</li><li>告警包含内容：<ul><li>告警触发条件</li><li>告警对象</li><li>告警接收组</li><li>告警接收方式</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129150923993.png" alt="image-20230129150923993" style="zoom:50%;"><ul><li>告警状态信息：</li></ul><table><thead><tr><th><strong>告警状态</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>未恢复</td><td>没有被处理或正在被处理的告警。</td></tr><tr><td>恢复</td><td>已经恢复正常状态。</td></tr><tr><td>数据不足</td><td>产生告警的告警策略已被删除。  云服务器从一个项目迁移至另一个项目。  未安装或者卸载云监控控件，无数据上报。</td></tr></tbody></table><ul><li>策略内容<ul><li>名称</li><li>类型</li><li>告警触发条件</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129151020819.png" alt="image-20230129151020819" style="zoom:50%;"><h4 id="配置关联及解关对象"><a href="#配置关联及解关对象" class="headerlink" title="配置关联及解关对象"></a>配置关联及解关对象</h4><ul><li>创建完告警策略后，需要为其关联一些告警对象</li><li>说明哪些实例对象达到告警触发条件时会发送告警</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129151058275.png" alt="image-20230129151058275" style="zoom:50%;"><h4 id="CM-告警接受组管理"><a href="#CM-告警接受组管理" class="headerlink" title="CM 告警接受组管理"></a>CM 告警接受组管理</h4><ul><li>CM 告警接收组管理：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129151136017.png" alt="image-20230129151136017" style="zoom: 50%;"><h4 id="查看监控数据"><a href="#查看监控数据" class="headerlink" title="查看监控数据"></a>查看监控数据</h4><ul><li>若需要监控查看云服务器指标数据并且产生告警，需在云服务器上安装监控组件。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129151203366.png" alt="image-20230129151203366" style="zoom:50%;"><ul><li>云监控图标：<ul><li>直观、迅速响应</li></ul></li><li>监控图标类型<ul><li>单个资源的监控图标</li><li>跨资源的监控图表</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129151303048.png" alt="image-20230129151303048" style="zoom:50%;"><ul><li>根据显示时选择的不同时间段，统计数据的粒度不同</li></ul><table><thead><tr><th><strong>显示****时间跨度</strong></th><th><strong>默认统计数据粒度</strong></th><th><strong>可选统计数据粒度</strong></th></tr></thead><tbody><tr><td>≤  1 小时</td><td>1  分钟、5 分钟</td><td>1  分钟、5 分钟</td></tr><tr><td>≤  24小时</td><td>5分钟</td><td>1分钟、5分钟、1小时</td></tr><tr><td>≤  3天</td><td>1小时</td><td>1分钟、5分钟、1小时、1天</td></tr><tr><td>≤  14天</td><td>1小时</td><td>1小时、1天</td></tr><tr><td>≤  31天</td><td>1天</td><td>1小时、1天</td></tr></tbody></table><h2 id="课程总结-8"><a href="#课程总结-8" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程介绍了<ul><li>什么是 CM，CM 支持的功能</li><li>利用 CM 进行运维管理的流程</li><li>如何配置告警，查看监控数据</li></ul></li></ul><h1 id="云上视频业务"><a href="#云上视频业务" class="headerlink" title="云上视频业务"></a>云上视频业务</h1><h2 id="视频基础知识"><a href="#视频基础知识" class="headerlink" title="视频基础知识"></a>视频基础知识</h2><h3 id="视频业务介绍"><a href="#视频业务介绍" class="headerlink" title="视频业务介绍"></a>视频业务介绍</h3><h4 id="业务发展现状"><a href="#业务发展现状" class="headerlink" title="业务发展现状"></a>业务发展现状</h4><ul><li>视频载体的演变</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129151734131.png" alt="image-20230129151734131" style="zoom:50%;"><ul><li><p>视频业务的发展现状</p><ul><li>2000s后，已经能够使用众多的终端设备进行视频的观看。随着视频终端设备的普及和多样化，视频业务发展的形式也呈现多样化：<ul><li><strong>有线电视</strong>：通过电视机观看视频，传统获取视频流的方式</li><li><strong>现场直播</strong>：实时观看视频，并提供给多个设备</li><li><strong>视频点播</strong>：预先录制的视频内容随时随地传送到多个设备</li><li><strong>时移观看</strong>：现场直播和VOD功能的集成，通过重播、剪辑等功能扩展产品</li></ul></li><li>随着图像质量的提高，视频内容的清晰度要求也越来越高：</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129151901247.png" alt="image-20230129151901247" style="zoom: 67%;"><ul><li>传统视频业务需要关注<ul><li>IT 基础架构的建设</li><li>IT 基础架构的运维管理</li><li>应用的开发</li><li>视频的拍摄、上传、转码、存储、分发、播放等</li><li>视频内容</li></ul></li><li>云上的视频业务只需要专注于<ul><li>视频内容的生产与运营</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152113652.png" alt="image-20230129152113652" style="zoom: 80%;"></li></ul><h4 id="视频业务分类"><a href="#视频业务分类" class="headerlink" title="视频业务分类"></a>视频业务分类</h4><ul><li>直播<ul><li>游戏直播、秀场直播、在线教育、广电新媒体、电商直播</li></ul></li><li>点播<ul><li>视频门户、电子商务、版权保护、广电或OTT用户、短视频应用</li></ul></li><li>视频处理<ul><li>视频网站、在线视频、广电行业、OTT智能电视、电子商务</li></ul></li><li>实时音视频<ul><li>视频通话、万人低延时直播</li></ul></li></ul><h4 id="视频业务关键要素"><a href="#视频业务关键要素" class="headerlink" title="视频业务关键要素"></a>视频业务关键要素</h4><ul><li>视频业务关键要素<ul><li>分辨率、帧速率和比特率</li><li>色彩空间和位深度<ul><li>RGB、CMYK、Lab</li><li>图像的色彩越丰富，“位”就越多</li></ul></li><li>编码器和容器<ul><li>mpeg-1、mpeg-2、mpeg-4、h.264和h.265</li><li>.mp4、.mkv、.rmvb</li></ul></li></ul></li></ul><table><thead><tr><th><strong>分辨率</strong></th></tr></thead><tbody><tr><td>4K（3840×2160）及以下</td></tr><tr><td>2K（2560  x1440）及以下</td></tr><tr><td>FHD  (1920 x 1080) 及以下</td></tr><tr><td>HD  (1280 x 720) 及以下</td></tr><tr><td>SD  (640 x 480) 及以下</td></tr></tbody></table><h4 id="-1"><a href="#-1" class="headerlink" title></a></h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152347824.png" alt="image-20230129152347824" style="zoom:50%;"><h3 id="腾讯云视频产品矩阵"><a href="#腾讯云视频产品矩阵" class="headerlink" title="腾讯云视频产品矩阵"></a>腾讯云视频产品矩阵</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152411723.png" alt="image-20230129152411723" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152424594.png" alt="image-20230129152424594" style="zoom:50%;"><h2 id="云直播业务与平台"><a href="#云直播业务与平台" class="headerlink" title="云直播业务与平台"></a>云直播业务与平台</h2><h3 id="视频直播服务介绍"><a href="#视频直播服务介绍" class="headerlink" title="视频直播服务介绍"></a>视频直播服务介绍</h3><ul><li>云直播（Cloud Streaming Services，CSS）依托腾讯强大的技术平台，将腾讯视频等核心业务底层能力开放给用户</li><li>为用户提供专业稳定快速的直播接入和分发服务，具有低延迟、高安全、高性能、易接入、多终端、多码率支持等特点</li><li>云直播全面满足超低延迟和超大并发访问量的音视频需求，并提供腾讯自研的推流 SDK 和播放器 SDK，方便客户端定制自己的推流端和播放端 App</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152646994.png" alt="image-20230129152646994" style="zoom:50%;"><ul><li>直播产品方案及策略</li></ul><table><thead><tr><th><strong>产品方案</strong></th><th><strong>目标客户及策略</strong></th></tr></thead><tbody><tr><td>游戏直播</td><td>•为游戏直播平台提供上行加速、高质量转码和加速分发等服务，  •直播 SDK 和直播云服务互通可帮助游戏直播平台快速建立直播能力  •助力游戏平台实现低延时低卡顿的全网直播</td></tr><tr><td>秀场直播</td><td>•为秀场直播提供直播秒开、色彩滤镜、手动曝光等功能  •快速上手，开启即用，提高直播人气，活跃直播气氛</td></tr><tr><td>在线教育</td><td>•为在线教育客户提供便捷的一站式服务  •通过灵活的控制台、API 方式上传拉取教学视频，更有播放器密码、动态  URL  防盗链两大安全功能，保护用户精心制作的教学内容  •提供全面开放播放器接口，便于用户自定义限时播放、禁止拖拽等各类教学功能</td></tr><tr><td>广电新媒体</td><td>•为在广电新媒体行业提供完善的视频直播服务，新闻类、媒体类和综艺类等专业直播服务平台可快速接入  •实现传统媒体向互联网媒体的低门槛转型</td></tr><tr><td>电商直播</td><td>•助力电商平台发展，使商家更加全面地传递了商品信息  •促进用户的有效决策，降低营销成本，增加成交量</td></tr></tbody></table><ul><li>腾讯云直播产品优势</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152742623.png" alt="image-20230129152742623" style="zoom:50%;"><h3 id="云直播平台介绍"><a href="#云直播平台介绍" class="headerlink" title="云直播平台介绍"></a>云直播平台介绍</h3><ul><li>直播平台的工作原理<ul><li>通过直播源将视频内容推流到直播平台上，通过CDN将视频流分发到各个节点，观众通过不同终端设备从节点上拉流，实现直播功能。</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152810637.png" alt="image-20230129152810637" style="zoom:50%;"><ul><li>标准直播 LVB 平台的架构<ul><li>智能处理<ul><li>截图</li><li>鉴黄</li></ul></li><li>直播录制</li><li>直播转码</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152850909.png" alt="image-20230129152850909" style="zoom:50%;"><h3 id="腾讯云直播功能特性"><a href="#腾讯云直播功能特性" class="headerlink" title="腾讯云直播功能特性"></a>腾讯云直播功能特性</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152910506.png" alt="image-20230129152910506" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152928603.png" alt="image-20230129152928603" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129152941421.png" alt="image-20230129152941421" style="zoom:50%;"><h3 id="基于腾讯云直播产品的应用案例"><a href="#基于腾讯云直播产品的应用案例" class="headerlink" title="基于腾讯云直播产品的应用案例"></a>基于腾讯云直播产品的应用案例</h3><ul><li>斗鱼直播系统<ul><li>**7000 + **直播房间</li><li>同时在线<strong>百万</strong>观众</li><li>直播<strong>录制 + 回看</strong>功能</li><li>直播<strong>实时鉴黄</strong>功能</li><li>月截图<strong>几亿</strong>张</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153056886.png" alt="image-20230129153056886" style="zoom:95%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153104821.png" alt="image-20230129153104821" style="zoom:50%;"><h3 id="腾讯云直播产品计费模式"><a href="#腾讯云直播产品计费模式" class="headerlink" title="腾讯云直播产品计费模式"></a>腾讯云直播产品计费模式</h3><ul><li>标准直播计费概述</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153123274.png" alt="image-20230129153123274" style="zoom:50%;"><h3 id="常见故障案例"><a href="#常见故障案例" class="headerlink" title="常见故障案例"></a>常见故障案例</h3><h4 id="直播卡顿问题排查"><a href="#直播卡顿问题排查" class="headerlink" title="直播卡顿问题排查"></a>直播卡顿问题排查</h4><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153210185.png" alt="image-20230129153210185" style="zoom:50%;"><ul><li>单个用户问题分析-收集信息<ul><li>用户打开utp.qq.com，截图发送，主要目的是定位用户的省份，运营商，localdns</li><li>用户打开<a href="http://www.speedtest.net/%EF%BC%8C">http://www.speedtest.net/，</a> 截图发送，主要是用第三方进行用户的网络测速</li><li>用户播放的码率是哪一种</li><li>用户是用哪一个平台看的，android，ios，pc</li><li>用户使用的播放器是什么</li><li>如果用户是开发人员，可以让用户抓包发送给腾讯云工单客服进行问题排查</li><li>访问的服务器IP信息</li></ul></li><li>单个用户问题分析-排查流程<ul><li>首先根据用户的IP和运营商看调度服务器的IP和运营商是否正确，主要排查是否就近覆盖，跨运营商调度等</li><li>让用户也打开优酷或者腾讯视频，看是否会卡顿，如果同样都会卡顿，那基本上是用户网络的问题</li><li>让用户配置到更快的节点看是否卡顿，如果仍然卡顿，很可能就是覆盖点的问题或者网络联通问题，需要找官网工单客服一起联调</li></ul></li></ul><h4 id="解决直播问题的常用工具"><a href="#解决直播问题的常用工具" class="headerlink" title="解决直播问题的常用工具"></a>解决直播问题的常用工具</h4><ul><li>抓包工具，wireshark</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153330447.png" alt="image-20230129153330447" style="zoom:50%;"><ul><li><p>FFmpeg 工具</p><ul><li>FFmpeg 是一套可以用来记录、转换数字音频、视频，并能将其转化为流的开源计算机程序</li><li>可用于拉流推流</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153402527.png" alt="image-20230129153402527" style="zoom:50%;"><ul><li>flv 分析工具，flvbugger</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153543977.png" alt="image-20230129153543977" style="zoom:50%;"><h4 id="其他常见故障"><a href="#其他常见故障" class="headerlink" title="其他常见故障"></a>其他常见故障</h4><ul><li>配置完成CNAME后，依旧显示CNAME未配置是什么原因？<ul><li>如果刚刚配置完CNAME，请先耐心等待，因CNAME配置生效需15分组 - 30分钟。</li></ul></li><li>我并没有使用直播转码，为什么会产生转码账单？<ul><li>云直播转码包括直播实时转码、云端混流和添加水印三种，若您使用了混流或水印功能亦会产生转码账单。</li></ul></li><li>推流不成功是什么原因？<ul><li>推流不成功可以按以下思路排查：<ul><li>域名是否 CNAME 到了腾讯云地址</li><li>网路是否正常</li><li>txTime 是否过期；txSecret 是否正确</li><li>推流 URL 是否被占用</li></ul></li></ul></li></ul><ul><li>直播无法正常观看<ul><li>可按照以下思路排查：<ul><li>检查播放 URL：检查是否拿了推流地址进行播放</li><li>检查视频流：若主播结束推流，则不能观看</li><li>检查播放端：如果视频流非常健康，需要检查播放器是否存在问题</li><li>防火墙拦截：这是常见的一种情况，不少客户的公司网络环境会限制视频播放，限制的原理是由防火墙侦测 HTTP 请求的是否是流媒体资源</li><li>检查推流端：如果是直播 URL 根本不能播放，而且防火墙没有限制，那么很大概率是推流不成功。推流不成功则按照上述介绍过的方法排查。</li></ul></li></ul></li></ul><h2 id="云点播业务与平台"><a href="#云点播业务与平台" class="headerlink" title="云点播业务与平台"></a>云点播业务与平台</h2><h3 id="视频点播服务介绍"><a href="#视频点播服务介绍" class="headerlink" title="视频点播服务介绍"></a>视频点播服务介绍</h3><ul><li>腾讯云视频点播服务：基于腾讯在音视频领域多年的技术积累与基础设施建设，为客户提供包括音视频采集上传、存储管理、媒体资源管理、自动化转码处理、加速播放为一体的一站式VPaaS（Video Platform as a Service）解决方案。</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153915676.png" alt="image-20230129153915676" style="zoom:50%;"><ul><li>腾讯云视频点播服务业务概览</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129153943367.png" alt="image-20230129153943367" style="zoom:50%;"><h3 id="云点播平台介绍"><a href="#云点播平台介绍" class="headerlink" title="云点播平台介绍"></a>云点播平台介绍</h3><ul><li>云点播平台工作原理<ul><li>视频数据经过身份认证采集到存储集群和视频转码集群</li><li>存储集群和转码集群将视频分发到各个节点</li><li>客户端从节点获取视频，用户观看</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129154016378.png" alt="image-20230129154016378" style="zoom:50%;"><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129154032075.png" alt="image-20230129154032075" style="zoom:50%;"><h3 id="腾讯云点播功能特性"><a href="#腾讯云点播功能特性" class="headerlink" title="腾讯云点播功能特性"></a>腾讯云点播功能特性</h3><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129154052712.png" alt="image-20230129154052712" style="zoom:50%;"><h3 id="基于腾讯云点播产品的应用案例"><a href="#基于腾讯云点播产品的应用案例" class="headerlink" title="基于腾讯云点播产品的应用案例"></a>基于腾讯云点播产品的应用案例</h3><ul><li>云点播的常见解决方案<ul><li>短视频<ul><li>典型应用：快手、微视</li><li>腾讯云方案：短视频 SDK + 点播云 + 优图美视</li></ul></li><li>电子商务：<ul><li>典型应用：京东、唯品会</li><li>腾讯云方案：点播存储管理 + 转码处理 + 视频加速CDN + 播放器 SDK</li></ul></li><li>客厅大屏 OTT<ul><li>典型客户：酷开电视、TCL 雷鸟</li><li>腾讯云方案：点播存储管理 + 转码处理 + 视频加速 CDN</li></ul></li></ul></li></ul><ul><li>短视频应用案例<ul><li>短视频的功能模块框架</li></ul></li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129154236267.png" alt="image-20230129154236267" style="zoom:50%;"><h3 id="腾讯云点播产品计费模式"><a href="#腾讯云点播产品计费模式" class="headerlink" title="腾讯云点播产品计费模式"></a>腾讯云点播产品计费模式</h3><ul><li>云点播产品计费概述</li></ul><img src="/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230129154252971.png" alt="image-20230129154252971" style="zoom:50%;"><h3 id="常见故障案例-1"><a href="#常见故障案例-1" class="headerlink" title="常见故障案例"></a>常见故障案例</h3><ul><li><p>为什么视频发布后不能自动播放？</p><ul><li>如果不作任何设置，视频上传发布会应用默认配置，即不开启自动播放。您可以修改该配置，即在发布时勾选“自动播放”。</li></ul></li><li><p>播放视频时，播放器区域内出现黑边</p><ul><li>设置播放器的尺寸比率与视频实际的尺寸比率一致， 例如：视频的分辨率为 1280 x 720，播放器的尺寸可以设置为640 x 360或者1280 x 720等，只要满足16:9（1280:720）的宽高比，就能完全显示视频，播放器不会出现黑边。如果视频自带黑边，则需要在转码的时候切掉视频的黑边内容，改变视频的分辨率。</li></ul></li><li><p>视频播放失败</p><ul><li><p>视频播放有多种原因，当出现视频播放失败，定位问题的基本思路是：</p><ul><li>配置网络抓包，查看网络请求情况。</li><li>查看浏览器控制台报错情况。</li><li>检查视频格式，浏览器是否支持播放。</li></ul></li><li><p>常见的视频播放失败原因及解决方案</p><ul><li><p>跨协议拦截：在 HTTPS 协议的页面播放 HTTP 协议的视频时，浏览器会处于安全考虑进行拦截。</p><p>解决方案：HTTP 协议的页面播放 HTTP 的视频，HTTPS 协议的页面播放 HTTPS 的视频。</p></li><li><p>CDN无视频：访问视频地址返回 404。</p><p>解决方案：通过腾讯云技术人员定位并修复 CDN 资源。</p></li><li><p>CDN鉴权失败：访问视频地址返回403，无法加载视频。</p><p>解决方案：需确认是否开启 referer 防盗链或者 key 防盗链，视频播放时是否具备校验参数。</p></li></ul></li><li><p>异常视频</p><ul><li><p>转码后的视频出现花屏，黑屏，卡顿，无法播放等现象，可能是原始视频有问题或者视频转码失败。</p><p>解决方案：需要定位原始视频是否有问题，如果是转码问题请联系技术客服处理。</p></li></ul></li></ul></li></ul><h2 id="课程总结-9"><a href="#课程总结-9" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了<ul><li>云视频的基本概念</li><li>云直播业务及平台的基本使用流程和相关概念</li><li>云点播业务及业务平台的基本使用流程和相关概念</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;腾讯云运维概述&quot;&gt;&lt;a href=&quot;#腾讯云运维概述&quot; class=&quot;headerlink&quot; title=&quot;腾讯云运维概述&quot;&gt;&lt;/a&gt;腾讯云运维概述&lt;/h1&gt;&lt;h2 id=&quot;腾讯云产品概览&quot;&gt;&lt;a href=&quot;#腾讯云产品概览&quot; class=&quot;headerlink&quot; title=&quot;腾讯云产品概览&quot;&gt;&lt;/a&gt;腾讯云产品概览&lt;/h2&gt;&lt;h3 id=&quot;腾讯云产品全景图&quot;&gt;&lt;a href=&quot;#腾讯云产品全景图&quot; class=&quot;headerlink&quot; title=&quot;腾讯云产品全景图&quot;&gt;&lt;/a&gt;腾讯云产品全景图&lt;/h3&gt;&lt;img src=&quot;/2023/02/01/Tencent%20Cloud%20SysOps%20Associate%20Engineer/image-20230108152147183.png&quot; alt=&quot;image-20230108152147183&quot; style=&quot;zoom: 50%;&quot;&gt;</summary>
    
    
    
    <category term="腾讯云" scheme="https://laijune.github.io/categories/%E8%85%BE%E8%AE%AF%E4%BA%91/"/>
    
    
    <category term="云运维" scheme="https://laijune.github.io/tags/%E4%BA%91%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>云从业者</title>
    <link href="https://laijune.github.io/2023/01/01/Tencent%20Cloud%20Practitioner/"/>
    <id>https://laijune.github.io/2023/01/01/Tencent%20Cloud%20Practitioner/</id>
    <published>2023-01-01T12:00:01.000Z</published>
    <updated>2023-02-07T12:08:37.961Z</updated>
    
    <content type="html"><![CDATA[<h1 id="云计算基础介绍"><a href="#云计算基础介绍" class="headerlink" title="云计算基础介绍"></a>云计算基础介绍</h1><h2 id="数据中心发展阶段"><a href="#数据中心发展阶段" class="headerlink" title="数据中心发展阶段"></a>数据中心发展阶段</h2><h3 id="企业自建-EDC"><a href="#企业自建-EDC" class="headerlink" title="企业自建 EDC"></a>企业自建 EDC</h3><p><code>EDC: Enterprise Data Centers</code></p><ul><li><strong>面临的挑战：</strong><ul><li>建设难度高、运维管理复杂</li><li>扩展调整不便、上线周期长</li></ul></li></ul><ul><li><p><strong>TCO 总拥有成本较高</strong></p><p>TCO = CapEx + OpEx + OppCost</p><p><code>TCO: Total Cost of Ownership</code></p></li></ul><span id="more"></span><ul><li><p><strong>TVO  总拥有价值不明显</strong></p><p>TVO = IT 带来的业务价值与收益</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226102451399.png" alt="image-20221226102451399" style="zoom: 50%;"><ul><li><p><strong>数据中心等级 T1 - T4</strong></p><ul><li><p>可靠性、安全性</p></li><li><p>运维管理能力</p></li><li><p>基础设施可用性</p><p>​                           承诺服务时间 - 宕机时间</p><p>可用性  =   ———————————————— x 100%    <strong>（核心指标）</strong></p><p>​                                     承诺服务时间</p></li></ul></li></ul><ul><li><strong>腾讯云 DC 必须在 T3 级以上</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226102911532.png" alt="image-20221226102911532" style="zoom: 80%;"><p>基本容量：只是满足了业务的基本设备和容量，并没有冗余和备份</p><p>冗余组件：备份是离线的备份，并不能快速的补充</p><p>并行维护：在冗余的基础上，主系统和备系统同时运行，可以实时切换</p><p>双活容错：即 “两地三中心” 的机制 ，比如银行</p><p><strong><code>两地三中心部署架构</code></strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226105114583.png" alt="image-20221226105114583" style="zoom: 80%;"><ul><li><p>同城双中心：<br>地域 A 三区和地域 A 五区组成同城双中心，地域 A 三区宕机后可切换到地域 A 五区，以保护数据库。</p></li><li><p>两地：<br>地域 A 和地域 B 组成两地，即使在地域 A 的三区、五区的机房全部宕机后，业务也可切换到地域 B 的机房。</p></li></ul><blockquote><p><strong>摘要：</strong>Uptime Institute成立于1993年，是全球公认 的数据中心标准组织和第三方认证机构。</p></blockquote><h3 id="企业自建-IDC"><a href="#企业自建-IDC" class="headerlink" title="企业自建 IDC"></a>企业自建 IDC</h3><p><code>IDC: Internet Data Center</code></p><p><strong>企业自行承担机房的所有工作：</strong></p><p>规划建设类：机房设计、土建 … …</p><p>部署类：服务器、存储 … …</p><p>运维类：监控、告警、安全运维 … …</p><p>业务系统部署、安全运维、可用性、可靠性</p><p><strong>缺点：</strong></p><p>成本高昂</p><p><code>思考：自建机房存在哪些挑战 ?</code></p><p>成本：人力成本、材料成本、维护成本 … </p><p>安全：出口、灭火器消防栓、通风口的规划建设 …</p><blockquote><p>需要承担服务器、存储、网络等硬件资源成本，还有高昂的专线网络费用</p><p>机房场地、电力、空调、日常维护机房管理等开销居高不下</p><p>需要充分的专业技术人员负责设备维护，有效保障网络的稳定性</p><p>要保持稳定的网络宽带，恒温、防尘、防火、防潮、防静电等良好的运行环境</p></blockquote><h3 id="IDC-托管-租用"><a href="#IDC-托管-租用" class="headerlink" title="IDC 托管 / 租用"></a>IDC 托管 / 租用</h3><ul><li>IDC 资源出租（空间、主机、带宽）、分为<strong>托管型、租用型</strong></li><li><strong>相比 EDC：</strong>成本更低、上线更快、标准化、电信级可靠性、运维管理等。</li></ul><p><code>托管型: 只是租用机房,带宽和电力维护,而L2层的服务器和存储是自己购买的,我们只需要部署硬件上面的系统</code></p><p><code>租用型: 租用范围更广,硬件和设备都不要,服务器、存储都从运营商购买,只需要运维自己的业务系统即可</code></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226112453744.png" alt="image-20221226112453744" style="zoom:80%;"><h3 id="云计算定义"><a href="#云计算定义" class="headerlink" title="云计算定义"></a>云计算定义</h3><ul><li><p><strong>起源：</strong>企业使用 IT 资源，不再需要自建 DC，自组运维团队，可以<font color="blue">像水或电一样由专门公司提供，企业直接付费使用</font>。</p><p>​                                                                                                                 —《IT不再重要》，尼古拉斯.卡尔，2003 年。</p></li><li><p><strong>提出：</strong>2006年 Google CEO 埃里克 提出云计算（Cloud Computing）概念。2006年 AWS 成立，云计算落地。</p></li></ul><ul><li><p><strong>NIST 定义：</strong><font color="blue">云计算是一种按需使用，按量付费的服务模式，</font>提供可用的、便捷的、按需的网络访问， 可配置的计算资源共享池。</p><pre><code>`NIST: National Institute of Standards and Technology`</code></pre></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226114158002.png" alt="image-20221226114158002" style="zoom:67%;"><h3 id="云计算特征"><a href="#云计算特征" class="headerlink" title="云计算特征"></a>云计算特征</h3><table><thead><tr><th align="center"><strong>云计算特征</strong></th><th align="center"><strong>特征描述</strong></th></tr></thead><tbody><tr><td align="center">超大规模</td><td align="center">公有云动辄几十万台到上百万台的规模；私有云也有数百上千台</td></tr><tr><td align="center">高可靠性</td><td align="center">多副本容错机制，提供数据的高可靠性</td></tr><tr><td align="center">多租户隔离</td><td align="center">多个不同租户共享底层的硬件资源，但在上层逻辑上是隔离的</td></tr><tr><td align="center">弹性扩展</td><td align="center">提供动态的弹性伸缩的功能，满足应用和用户规模增长的需求</td></tr><tr><td align="center">按需服务</td><td align="center">提供一个庞大的资源池，可以按需购买</td></tr><tr><td align="center">资源可监控计量</td><td align="center">云平台提供资源的监控和计量功能</td></tr><tr><td align="center">低成本</td><td align="center">用户无需负担高昂的数据中心管理成本，可以较低成本获得有效的资源</td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226114852999.png" alt="image-20221226114852999" style="zoom:80%;"><h3 id="云计算对比"><a href="#云计算对比" class="headerlink" title="云计算对比"></a>云计算对比</h3><table><thead><tr><th align="center"><strong>对比项</strong></th><th align="center"><strong>自建EDC</strong></th><th align="center"><strong>传统IDC</strong></th><th align="center"><strong>云计算</strong></th></tr></thead><tbody><tr><td align="center">租用范围</td><td align="center">0</td><td align="center">L0、L1，部分L2</td><td align="center"><strong>L0-L4</strong></td></tr><tr><td align="center">总体成本</td><td align="center">高</td><td align="center">中</td><td align="center"><strong>低</strong></td></tr><tr><td align="center">上线时间</td><td align="center">慢</td><td align="center">一般</td><td align="center"><strong>很快</strong></td></tr><tr><td align="center">运维管理</td><td align="center">复杂</td><td align="center">一般</td><td align="center"><strong>简单</strong></td></tr><tr><td align="center">扩展性</td><td align="center">很难</td><td align="center">一般</td><td align="center"><strong>弹性扩展</strong></td></tr><tr><td align="center">自主可控</td><td align="center">高</td><td align="center">中</td><td align="center"><strong>（公有云/私有云）</strong></td></tr></tbody></table><h2 id="云计算核心特征"><a href="#云计算核心特征" class="headerlink" title="云计算核心特征"></a>云计算核心特征</h2><h3 id="云计算关键特点"><a href="#云计算关键特点" class="headerlink" title="云计算关键特点"></a>云计算关键特点</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226115516264.png" alt="image-20221226115516264" style="zoom:50%;"><h3 id="云计算服务模式"><a href="#云计算服务模式" class="headerlink" title="云计算服务模式"></a>云计算服务模式</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226115532350.png" alt="image-20221226115532350" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226115551159.png" alt="image-20221226115551159" style="zoom:50%;"><h3 id="云计算技术架构"><a href="#云计算技术架构" class="headerlink" title="云计算技术架构"></a>云计算技术架构</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226115624220.png" alt="image-20221226115624220" style="zoom:50%;"><h3 id="云计算-4-种部署方式"><a href="#云计算-4-种部署方式" class="headerlink" title="云计算 4 种部署方式"></a>云计算 4 种部署方式</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226115638722.png" alt="image-20221226115638722" style="zoom:50%;"><h3 id="公有云与私有云"><a href="#公有云与私有云" class="headerlink" title="公有云与私有云"></a>公有云与私有云</h3><table><thead><tr><th align="center"><strong>编号</strong></th><th align="center"><strong>对比项</strong></th><th align="center"><strong>公有云</strong></th><th align="center"><strong>私有云</strong></th></tr></thead><tbody><tr><td align="center">1</td><td align="center">云厂商与云租户</td><td align="center">不同组织，多租户</td><td align="center">相同组织，单租户</td></tr><tr><td align="center">2</td><td align="center">底层资源</td><td align="center">使用权属于客户  所有权属于服务商</td><td align="center">使用权属于客户  所有权属于客户</td></tr><tr><td align="center">3</td><td align="center">总体成本</td><td align="center">较低</td><td align="center">较高</td></tr><tr><td align="center">4</td><td align="center">运维复杂度</td><td align="center">较简单</td><td align="center">较复杂</td></tr><tr><td align="center">5</td><td align="center">自主可控</td><td align="center">较低</td><td align="center">较高</td></tr></tbody></table><h3 id="混合云"><a href="#混合云" class="headerlink" title="混合云"></a>混合云</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226115732001.png" alt="image-20221226115732001" style="zoom:50%;"><h3 id="社区云"><a href="#社区云" class="headerlink" title="社区云"></a>社区云</h3><ul><li><strong>业务痛点：</strong><ul><li>标准通用的公有云难以满足特定行业定制化需求，主要因业务理解不足、技术储备不够或定制成本太高。</li></ul></li></ul><ul><li><strong>解决方案：</strong><ul><li>社区云：结合社区内的用户需求共性，实现面向区域用户需求的云计算服务模式</li><li>类型一：公有云厂商带领行业伙伴搞行业解决方案，如腾讯云智慧零售</li><li>类型二：行业头部厂商整合IT能力出售给其他企业使用、如招银云创</li></ul></li></ul><h2 id="云计算关键技术"><a href="#云计算关键技术" class="headerlink" title="云计算关键技术"></a>云计算关键技术</h2><h3 id="计算虚拟化"><a href="#计算虚拟化" class="headerlink" title="计算虚拟化"></a>计算虚拟化</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226120018785.png" alt="image-20221226120018785" style="zoom:50%;"><ul><li><strong>全虚拟化：</strong>GuestOS 直接运行在虚拟化层上，无需进行任何修改，如 ESXI；</li><li><strong>半虚拟化：</strong>GuestOS 需要修改安装额外驱动，如 Xen 上 Linux VM 是半虚拟化需要安装 PV Driver，而 Windows VM 是全虚拟化无需修改。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226120428932.png" alt="image-20221226120428932" style="zoom:50%;"><table><thead><tr><th align="center"><strong>对比项</strong></th><th align="center"><strong>ESXi</strong></th><th align="center"><strong>Xen</strong></th><th align="center"><strong>KVM</strong></th></tr></thead><tbody><tr><td align="center">虚拟化种类</td><td align="center">全虚拟化</td><td align="center">全/半虚拟化</td><td align="center">全虚拟化</td></tr><tr><td align="center">CPU 与内存虚拟化</td><td align="center">由 ESXi 内核完成</td><td align="center">由 Xen 内核完成</td><td align="center">由 KVM 内核完成</td></tr><tr><td align="center">磁盘/网络 IO 虚拟化</td><td align="center">由虚拟化内核完成</td><td align="center">由 Dom0 完成</td><td align="center">由 QEMU 完成</td></tr><tr><td align="center">虚拟化调度与管理</td><td align="center">由虚拟化内核完成</td><td align="center">由 Dom0 完成</td><td align="center">Linux 进程管理</td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226135854215.png" alt="image-20221226135854215" style="zoom:50%;"><ul><li><p>自 Linux 2.6.20 起，作为 Linux 内核模块发行。VM 就是 Linux 进程，通过 Linux 进程管理调度。</p></li><li><p>KVM 内核负责 CPU 与内存虚拟化，QEMU 负责 I/O 虚拟化（设备模拟）；需要硬件虚拟化 Intel-VT、AMD-V 支持。</p></li><li><p>因 KVM 性能优、易扩展、易管理等优势，多厂商已逐渐从其他虚拟化平台迁移到 KVM 平台。</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226140201156.png" alt="image-20221226140201156" style="zoom:50%;"><h3 id="分布式存储"><a href="#分布式存储" class="headerlink" title="分布式存储"></a>分布式存储</h3><blockquote><p>讲一下为什么需要分布式存储?<br>答：当数据集的大小超过一台独立物理计算机的存储能力时，就有必要对它进行（partition）并存储到若干台单独的计算机上。</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226140216932.png" alt="image-20221226140216932" style="zoom: 67%;"><ul><li><p>运行在多台节点，自动整合；</p></li><li><p>整合集群内所有存储空间资源，虚拟化并对外提供文件访问服务；</p></li><li><p>更好的扩展性，更大的容量，更适合大规模数据的性能需求。</p></li><li><p>HDFS（Hadoop Distributed File System）Hadoop分布式文件系统。</p></li></ul><p>​                                                    <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226140346526.png" alt="image-20221226140346526" style="zoom:60%;">            <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226140403249.png" alt="image-20221226140403249" style="zoom:60%;"></p><h3 id="网络虚拟化"><a href="#网络虚拟化" class="headerlink" title="网络虚拟化"></a>网络虚拟化</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226140503999.png" alt="image-20221226140503999" style="zoom: 50%;"><blockquote><p>SDN 实现 L2 层网络虚拟化，NFV 实现 L3 层及以上的网络虚拟化。</p></blockquote><table><thead><tr><th align="center"><strong>对比项</strong></th><th align="center"><strong>软件定义网络 SDN</strong></th><th align="center"><strong>网络功能虚拟化 NFV</strong></th></tr></thead><tbody><tr><td align="center">核心特征</td><td align="center">控制平面和数据平面分离； 通用路由器和交换机；控制平面可编程；</td><td align="center">网络功能与硬件解耦；商业化硬件代替专用硬件；数据平面可编程；</td></tr><tr><td align="center">应用场景</td><td align="center">园区网、数据中心网；VPC</td><td align="center">运营商基础网络 (运营商不再需要购买厂商们制造的专用硬件设备，大幅降低了硬件资金投入。)</td></tr><tr><td align="center">优化点</td><td align="center">处理 OSI 中 2-3 层，优化交换机、路由器、无线等。</td><td align="center">处理 OSI 是 4-7 层，优化网络的功能、负载均衡，防火墙，WAN网优化等。</td></tr><tr><td align="center">收益</td><td align="center">成本优化、快速上线、简化运维、灵活扩展</td><td align="center">成本优化、快速上线、简化运维、灵活扩展</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226140936144.png" alt="image-20221226140936144" style="zoom:50%;"><h3 id="云管理平台"><a href="#云管理平台" class="headerlink" title="云管理平台"></a>云管理平台</h3><ul><li>OpenStack是一个开源的云计算管理平台，其核心的服务组件如下：</li></ul><table><thead><tr><th align="center"><strong>服务名称</strong></th><th align="center"><strong>功能描述</strong></th></tr></thead><tbody><tr><td align="center">Nova</td><td align="center">计算服务</td></tr><tr><td align="center">Neutron</td><td align="center">网络服务</td></tr><tr><td align="center">Keystone</td><td align="center">认证与授权服务</td></tr><tr><td align="center">Glance</td><td align="center">镜像服务</td></tr><tr><td align="center">Swift</td><td align="center">对象存储服务</td></tr><tr><td align="center">Cinder</td><td align="center">块存储服务</td></tr><tr><td align="center">Horizon</td><td align="center">图形化管理界面</td></tr><tr><td align="center">Ceilometer</td><td align="center">监控计量服务</td></tr><tr><td align="center">Heat</td><td align="center">编排服务调度</td></tr></tbody></table><ul><li><strong>优势：</strong><ul><li>开源项目</li><li>兼容各种云平台</li><li>标准统一规范</li></ul></li><li><strong>劣势：</strong><ul><li>部署运维升级复杂</li><li>性能与扩展性较差</li><li>容灾能力不足</li></ul></li></ul><ul><li><strong><font color="blue">VStation 是腾讯完全自主研发的云计算管理平台</font></strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226141304613.png" alt="image-20221226141304613" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226141344380.png" alt="image-20221226141344380" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226141402233.png" alt="image-20221226141402233" style="zoom:50%;"><h3 id="应用虚拟化"><a href="#应用虚拟化" class="headerlink" title="应用虚拟化"></a>应用虚拟化</h3><ul><li><strong>容器技术</strong>是一种轻量级虚拟化技术，通过进程隔离，将应用软件及其运行所依赖的资源与配置打包封装，提供独立可移植的运行环境。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226141447068.png" alt="image-20221226141447068" style="zoom:50%;"><ul><li><strong>Docker 容器：</strong><ul><li>最流行的容器技术，标准化、强移植，目标：<strong>Build，Ship and Run Any APP，Anywhere。</strong></li></ul></li><li><strong>容器管理：</strong><ul><li>K8S （Kubernetes）是开源的容器编排管理调度技术。</li></ul></li><li><strong>容器优势：</strong><ul><li>极其轻量：轻量打包，资源少，性能佳。</li><li>秒级部署：容器部署在毫秒与秒之间。</li><li>易于移植：标准化、一次构建，随处部署。</li><li>弹性伸缩：通过编排工具可快速扩展 / 收缩。</li></ul></li></ul><p>​                                            <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226141824522.png" alt="image-20221226141824522" style="zoom:75%;">                                                                        <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226141833130.png" alt="image-20221226141833130" style="zoom:75%;"></p><h3 id="大数据-amp-AI"><a href="#大数据-amp-AI" class="headerlink" title="大数据 &amp; AI"></a>大数据 &amp; AI</h3><ul><li><p><strong>未来互联网就是利用人工智能在云端处理大数据。</strong>                    </p><p>​                                                                                —Pony Ma</p></li><li><p><strong>应用：</strong>大数据（精准营销/决策支持/风控），AI （图像/语音/自动驾驶）。    </p></li></ul><p>​                                        <strong>大数据 4V 特点</strong>                                                                                                                    <strong>人工智能 4 要素</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142020184.png" alt="image-20221226142020184" style="zoom:50%;"><h2 id="云计算影响与市场"><a href="#云计算影响与市场" class="headerlink" title="云计算影响与市场"></a>云计算影响与市场</h2><h3 id="云计算发展阶段"><a href="#云计算发展阶段" class="headerlink" title="云计算发展阶段"></a>云计算发展阶段</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142247579.png" alt="image-20221226142247579" style="zoom: 50%;"><blockquote><p>1960：为了解决机器昂贵的问题；</p><p>2006：亚马逊（AWS）应运而生</p><p>2018：腾讯做出了组织架构调整，喊出口号：向产业互联网进军</p><p>未来：</p></blockquote><h3 id="云计算产业影响"><a href="#云计算产业影响" class="headerlink" title="云计算产业影响"></a>云计算产业影响</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142301409.png" alt="image-20221226142301409" style="zoom: 50%;"><ul><li><strong>产业互联网是什么 ?</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142421571.png" alt="image-20221226142421571" style="zoom:50%;"><ul><li><strong>信息技术助力产业智变</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142516295.png" alt="image-20221226142516295" style="zoom:50%;"><ul><li><strong>产业互联网框架的 5 纬特点</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142601563.png" alt="image-20221226142601563" style="zoom:50%;"><h3 id="云计算组织影响"><a href="#云计算组织影响" class="headerlink" title="云计算组织影响"></a>云计算组织影响</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142614334.png" alt="image-20221226142614334" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142634869.png" alt="image-20221226142634869" style="zoom: 50%;"><h3 id="企业上云诉求与挑战"><a href="#企业上云诉求与挑战" class="headerlink" title="企业上云诉求与挑战"></a>企业上云诉求与挑战</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142713520.png" alt="image-20221226142713520" style="zoom:50%;"><h3 id="中国云市场概括"><a href="#中国云市场概括" class="headerlink" title="中国云市场概括"></a>中国云市场概括</h3><ul><li><strong>中国云计算市场规模突破千亿，持续飞速增长。</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142807012.png" alt="image-20221226142807012" style="zoom:50%;"><ul><li><strong>公有云 / 私有云的 IT 市场份额逐渐上升，上云迁移 / 云转型潜力 / 需求巨大。</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226142945574.png" alt="image-20221226142945574" style="zoom:50%;"><h2 id="腾讯云发展与优势"><a href="#腾讯云发展与优势" class="headerlink" title="腾讯云发展与优势"></a>腾讯云发展与优势</h2><h3 id="腾讯云发展阶段"><a href="#腾讯云发展阶段" class="headerlink" title="腾讯云发展阶段"></a>腾讯云发展阶段</h3><ul><li><strong>腾讯云</strong>以卓越科技实力、丰富的实战经验助力各行各业数字化转型，为全球数百万的企业和开发者提供领先的云计算。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143104096.png" alt="image-20221226143104096" style="zoom:50%;"><h3 id="腾讯云竞争优势"><a href="#腾讯云竞争优势" class="headerlink" title="腾讯云竞争优势"></a>腾讯云竞争优势</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143427685.png" alt="image-20221226143427685" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143440562.png" alt="image-20221226143440562" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143509184.png" alt="image-20221226143509184" style="zoom: 50%;"><ul><li>Grary Sort：排序100TB 数据花98.8秒。</li><li>Minute Sort：60秒可以排序55TB数据。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143614493.png" alt="image-20221226143614493" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143625656.png" alt="image-20221226143625656" style="zoom:55%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143700687.png" alt="image-20221226143700687" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143710046.png" alt="image-20221226143710046" style="zoom:50%;"><h3 id="腾讯云成功案例"><a href="#腾讯云成功案例" class="headerlink" title="腾讯云成功案例"></a>腾讯云成功案例</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226143728561.png" alt="image-20221226143728561" style="zoom: 60%;"><p><strong><code>思考题</code></strong></p><ul><li>混合云将会是发展趋势，涉及公有云+私有云与多云互通，那么目前推动混合云发展的动力和挑战点分别是什么？</li></ul><p>背景：十四五规划强调打造数字经济新优势，明确了以混合云为重点的云服务产业发展路线和 “以混合云为重点培育行业解决方案、系统集成、运维管理等云服务行业” 的发展方向。因此，混合云成为产业内众多服务商和客户关注的焦点。</p><blockquote><p><strong>混合多云将成为未来企业常态架构。</strong>在全球混合云趋势调查中，82%的受访者目前使用混合多云架构来支撑其应用程序，并表示混合多云架构能够使组织实现更敏捷和高扩展性的开发环境，同时加速业务敏捷性和创新。<strong>企业多使用混合云多云架构来满足在工作负载、应用程序开发、及安全进程的场景需求。</strong>数据显示，有超过70%的受访企业通过混合多云架构来解决业务备份、灾难恢复问题和应用程序开发问题。</p></blockquote><p><strong>混合云发展面临安全，运营，成本三大挑战</strong></p><blockquote><p><strong>第一大挑战：多云异构带来安全的新挑战。</strong></p><p><strong>第二大挑战：混合多云环境下，运营复杂度直线升高。</strong></p><p><strong>第三大挑战：混合云环境下，从单一降低成本转向成本管理。</strong></p></blockquote><p><a href>来源：云计算开源产业联盟</a></p><h2 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>数据中心发展阶段：云计算、IDC、EDC 的差异。</li><li>云计算核心特征：5 大特点、4 种部署方式、3 种服务模式。</li><li>云计算关键技术：计算虚拟化、分布式存储、网络虚拟化、云管理平台，容器、人工智能 &amp; 大数据等。</li><li>云计算影响与市场：云计算发展阶段、产业互联网、主流云厂商特点。</li><li>腾讯云发展与优势：腾讯云发展阶段、竞争优势、成功案例。</li></ul><h1 id="腾讯云服务器产品介绍"><a href="#腾讯云服务器产品介绍" class="headerlink" title="腾讯云服务器产品介绍"></a>腾讯云服务器产品介绍</h1><h2 id="云服务器基础知识"><a href="#云服务器基础知识" class="headerlink" title="云服务器基础知识"></a>云服务器基础知识</h2><h3 id="地域与可用区"><a href="#地域与可用区" class="headerlink" title="地域与可用区"></a>地域与可用区</h3><ul><li><strong>可用区（Zone）</strong>同一地域内电力和网络互相独立的物理数据中心。命名【城市 + 编号】。</li><li><strong>地域（region）</strong>：一个独立的地理区域，命名【覆盖范围 + 机房所在城市】。</li><li>腾讯云目前全球支持 <strong>25</strong> 个地域、<strong>53</strong> 个可用区。</li></ul><p><strong>CVM 购买步骤</strong></p><p><strong>1、选择地域与可用区</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226150048276.png" alt="image-20221226150048276" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226150136595.png" alt="image-20221226150136595" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226150154664.png" alt="image-20221226150154664" style="zoom:50%;"><ul><li>私有网络中的云服务可经腾讯云高速互联网络通信；</li><li>负载均衡不支持跨地域的流量转发；（跨地域绑定2.0暂不支持传统型负载均衡。）</li><li>上诉内网互通是均指同一账户下的资源互通。</li></ul><h3 id="云服务器实例"><a href="#云服务器实例" class="headerlink" title="云服务器实例"></a>云服务器实例</h3><ul><li><strong>实例：</strong>一台完整的云服务器（虚拟机），包含CPU、内存、磁盘、网络、操作系统等组件。</li><li><strong>命名：</strong>系列.机型.规格（vCPU核数与内存大小），如 <code>S4.MEDIUM4(标准型S4,2核4GB)</code></li><li><strong>管理：</strong>实例可通过控制台或 API 管理；实例配置可在线调整，重启生效。</li><li><strong>安全：</strong>策略控制、安全组、登陆控制。</li></ul><ul><li>不同系列的实例<strong>硬件型号与规格</strong>不同（CPU、内存、带宽，最大规格等）</li></ul><table><thead><tr><th align="center"><strong>标准型</strong></th><th align="center"><strong>标准型S1</strong></th><th align="center"><strong>标准型</strong>  <strong>S2</strong></th><th align="center"><strong>标准型</strong>  <strong>S3</strong></th><th align="center"><strong>标准型</strong>  <strong>S4</strong></th><th align="center"><strong>标准型S5</strong></th></tr></thead><tbody><tr><td align="center">CPU</td><td align="center">Intel  Xeon CPU</td><td align="center">Xeon  Broadwell（v4）</td><td align="center">Skylake 6133</td><td align="center">Skylake 6148</td><td align="center">Cascade  Lake</td></tr><tr><td align="center">内存</td><td align="center">DDR3</td><td align="center">DDR4</td><td align="center">最新 DDR4</td><td align="center">最新  DDR4</td><td align="center">最新 DDR4</td></tr><tr><td align="center">内网带宽</td><td align="center">10Gbps</td><td align="center">10Gbps</td><td align="center">10Gbps</td><td align="center">25Gbps</td><td align="center">28Gbps</td></tr><tr><td align="center">最大规格</td><td align="center">48核 96GB</td><td align="center">56核 224GB</td><td align="center">80核 320GB</td><td align="center">72核 228GB</td><td align="center">86核 320GB</td></tr></tbody></table><blockquote><p>英特尔至强系列：Xeon</p></blockquote><ul><li><strong>实例类型：</strong>通过不同的配置（CPU、内存、IO、网络等）提供不同的 IO、计算、存储或网络能力，不同的应用场景。实例族指某一类实例类型的集合。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226153822016.png" alt="image-20221226153822016" style="zoom: 50%;"><table><thead><tr><th align="center"><strong>实例类型</strong></th><th align="center"><strong>特点</strong></th><th align="center"><strong>应用场景</strong></th></tr></thead><tbody><tr><td align="center">标准型</td><td align="center">基准性能，可实现计算、内存和网络资源的平衡</td><td align="center">中小型 Web 应用、中小型数据库等</td></tr><tr><td align="center">高 IO 型</td><td align="center">低延时  I/O</td><td align="center">NoSQL  数据库、群集化数据库、  OLTP  系统</td></tr><tr><td align="center">内存型</td><td align="center">大内存；最大 648GB 的内存实例（现在不止了, 可以满足700 GB的内存空间）</td><td align="center">高性能数据库、分布式内存缓存等应用; hadoop 集群或redis</td></tr><tr><td align="center">计算型</td><td align="center">CVM 中最高性能处理器和最高性价比</td><td align="center">高流量  Web  服务器、MMO 游戏服务器、HPC</td></tr><tr><td align="center">GPU型</td><td align="center">搭载  GPU、FPGA 等异构硬件，具有实时高速的并行计算和浮点计算能力</td><td align="center">深度学习、科学计算、视频编解码和图形工作站等高性能应用</td></tr><tr><td align="center">大数据型</td><td align="center">搭载海量存储资源，具有高吞吐特点</td><td align="center">海量日志处理、分布式文件系统和大型数据仓库等吞吐密集型应用</td></tr></tbody></table><blockquote><p>MMO 游戏服务器（Massive Multiplayer Online）大型多人在线游戏类型</p><p>HPC（High Performance Computing）高性能计算集群</p></blockquote><h3 id="云服务器镜像"><a href="#云服务器镜像" class="headerlink" title="云服务器镜像"></a>云服务器镜像</h3><ul><li><p><strong>定义：</strong></p><ul><li>镜像就创建云服务器的模板（装机盘），提供云服务器实例所需的操作系统与软件配置等信息。</li></ul></li><li><p><strong>作用：</strong></p><ul><li>批量部署环境</li><li>特定软件部署</li><li>运行环境备份</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226154251575.png" alt="image-20221226154251575" style="zoom:67%;"><ul><li>镜像部署 VS 手动部署：</li></ul><table><thead><tr><th align="center"></th><th align="center"><strong>镜像部署</strong></th><th align="center"><strong>手动部署</strong></th></tr></thead><tbody><tr><td align="center">部署时长</td><td align="center">3  - 5 分钟</td><td align="center">1 - 2 天</td></tr><tr><td align="center">部署过程</td><td align="center">快速创建合适的云服务器</td><td align="center">自行选择软件、自行安装和调试</td></tr><tr><td align="center">安全性</td><td align="center">腾讯云测试、审核</td><td align="center">依赖开发部署人员的水平</td></tr><tr><td align="center">适用情况</td><td align="center">公共镜像、服务市场镜像、自定义镜像、共享镜像</td><td align="center">完全自行配置，无基础设置</td></tr></tbody></table><ul><li>CVM 的镜像类型：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226154441813.png" alt="image-20221226154441813" style="zoom: 67%;"><h3 id="云服务器存储"><a href="#云服务器存储" class="headerlink" title="云服务器存储"></a>云服务器存储</h3><ul><li>按存储介质：普通硬盘、SSD 硬盘</li><li>按使用场景：系统盘、数据盘</li><li>按架构模式：本地盘、云硬盘、对象存储</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226154731855.png" alt="image-20221226154731855" style="zoom: 50%;"><h3 id="云服务器演进"><a href="#云服务器演进" class="headerlink" title="云服务器演进"></a>云服务器演进</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226154755676.png" alt="image-20221226154755676" style="zoom: 50%;"><p><code>简单来说,将VPS当成一台电脑,这个是虚拟主机服务商提供给你的一台电脑,不过客户只能操作,没有具体的实物,在VPS主机上操作就是像在家里操作电脑一样.</code></p><h2 id="云服务器产品介绍"><a href="#云服务器产品介绍" class="headerlink" title="云服务器产品介绍"></a>云服务器产品介绍</h2><h3 id="云服务器-CVM"><a href="#云服务器-CVM" class="headerlink" title="云服务器 CVM"></a>云服务器 CVM</h3><ul><li>云服务器 CVM（Cloud Virtual Machine）是一种弹性伸缩的计算服务。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226155023008.png" alt="image-20221226155023008" style="zoom:50%;"><ul><li><strong>需求：</strong><ul><li>突发流量井喷</li><li>保障业务，控制成本</li></ul></li></ul><ul><li><strong>方案：</strong><ul><li>标准型 CVM、镜像；</li><li>弹性伸缩组：闲时缩减实例数、忙时增加实例数。</li></ul></li></ul><p>配置示例</p><table><thead><tr><th><strong>产品</strong></th><th><strong>数量</strong></th><th><strong>规格</strong></th></tr></thead><tbody><tr><td><strong>CVM</strong>  <strong>固定服务群</strong></td><td><strong>20台</strong></td><td><strong>标准型S2  2核4G</strong></td></tr><tr><td><strong>CVM</strong>  <strong>弹性伸缩群</strong></td><td><strong>动态调整</strong></td><td><strong>标准型S2  1核1G</strong></td></tr></tbody></table><h3 id="GPU-云服务器"><a href="#GPU-云服务器" class="headerlink" title="GPU 云服务器"></a>GPU 云服务器</h3><ul><li>基于 GPU 应用的计算服务，具有实时高速的并行计算和浮点计算能力。</li><li>突破传统 CPU限制、具有高并行、高吞吐、低时延等特点</li></ul><table><thead><tr><th align="center"><strong>GPU</strong></th><th align="center"><strong>CPU</strong></th></tr></thead><tbody><tr><td align="center">数千个加速核心</td><td align="center">几十个核心</td></tr><tr><td align="center">高效众多ALU，多线程超大并行吞吐。</td><td align="center">复杂逻辑控制单元，  强大ALU</td></tr><tr><td align="center">计算密集、并行计算</td><td align="center">逻辑控制、串行运算</td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226155959078.png" alt="image-20221226155959078" style="zoom: 67%;"><blockquote><p>ALU（Arithmetic Logic Unit）算术逻辑运算单元</p></blockquote><p><strong>计算型 GPU</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226160034664.png" alt="image-20221226160034664" style="zoom:50%;"><ul><li><strong>深度学习：</strong>深度学习训练和推理，图像识别、语音识别等；</li><li><strong>科学计算：</strong>计算金融学、地震分析、分子建模、基因组学等；</li><li><strong>视频编解码：</strong>高清视频转码、安防视频监控、大型视频会议等。</li></ul><p><strong>渲染型 GPU</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221226160306200.png" alt="image-20221226160306200" style="zoom:50%;"><ul><li><strong>图新工作站：</strong>三维设计与渲染、影音动画制作、工程建模与仿真（CAD/CAE）、医学成像、游戏测试等</li><li><strong>非线性编辑：</strong>电影和电视后期制作中的剪接操作，分别进行剪辑、字幕、特技、调色、包装等。</li></ul><ul><li>需求<ul><li>用于 AI 算法建模</li><li>高计算能力</li></ul></li><li>方案：<ul><li>采用 GPU 实例</li><li>缩短深度学习的训练时间</li><li>避免昂贵硬件采购</li></ul></li></ul><table><thead><tr><th align="center"><strong>GPU （Tesla M40）</strong></th><th align="center"><strong>vCPU （Xeon E5 v4）</strong></th><th align="center"><strong>内存 （DDR4）</strong></th><th align="center"><strong>GPU</strong> 内存（GDDR5）</th></tr></thead><tbody><tr><td align="center">1颗</td><td align="center">28核</td><td align="center">60GB</td><td align="center">24GB</td></tr></tbody></table><p>​                                                                                                                GPU入门实例配置</p><h3 id="FPGA-云服务器"><a href="#FPGA-云服务器" class="headerlink" title="FPGA 云服务器"></a>FPGA 云服务器</h3><ul><li><p>基于FPGA（Field Programmable Gate Array）现场可编程阵列的计算服务。可使用 FPGA 镜像在几分钟内部署 FPGA 实例，实现硬件加速。</p></li><li><p><strong>3 种 FPGA 实例类型：</strong></p></li></ul><table><thead><tr><th align="center"><strong>实例规格</strong></th><th align="center"><strong>FPGA</strong></th><th align="center"><strong>vCPU</strong></th><th align="center"><strong>内存（GB）</strong></th><th align="center"><strong>数据盘</strong></th><th align="center"><strong>网络</strong></th></tr></thead><tbody><tr><td align="center">FX2.7xlarge60</td><td align="center">1</td><td align="center">14核</td><td align="center">60</td><td align="center">SSD云盘</td><td align="center">万兆网络</td></tr><tr><td align="center">FX2.14xlarge120</td><td align="center">2</td><td align="center">28核</td><td align="center">120</td><td align="center">SSD云盘</td><td align="center">万兆网络</td></tr><tr><td align="center">FX2.28xlarge240</td><td align="center">4</td><td align="center">56核</td><td align="center">240</td><td align="center">SSD云盘</td><td align="center">万兆网络</td></tr></tbody></table><ul><li>产品优势</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231002757433.png" alt="image-20221231002757433" style="zoom:50%;"><ul><li>应用场景：深度学习模型、实时图像压缩处理等。</li></ul><h3 id="专用宿主机-CDH"><a href="#专用宿主机-CDH" class="headerlink" title="专用宿主机 CDH"></a>专用宿主机 CDH</h3><ul><li>专用宿主机 （CVM Dedicated Host ）提供独享宿主机资源的购买、 搭载虚拟化平台，可创建云主机。</li></ul><p><strong><code>物理上独享,逻辑上隔离; 实例规格自定义</code></strong></p><ul><li><strong>产品优势：</strong><ul><li>物理隔离</li><li>资源独享</li><li>安全合规</li><li>灵活配置</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231005927410.png" alt="image-20221231005927410" style="zoom: 67%;"><ul><li><p>金融业务：安全合规</p></li><li><p>高性能业务：资源独享</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231010029098.png" alt="image-20221231010029098" style="zoom: 80%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231010045548.png" alt="image-20221231010045548" style="zoom:80%;"><h3 id="黑石物理服务器-CPM-2-0"><a href="#黑石物理服务器-CPM-2-0" class="headerlink" title="黑石物理服务器 CPM 2.0"></a>黑石物理服务器 CPM 2.0</h3><ul><li>黑石物理服务器2.0（Cloud Physical Machine，CPM）是一种包年包月的裸金属云服务，为您提供云端独享的高性能、<strong>无虚拟化的</strong>、<strong>安全隔离的物理服务器集群</strong>。</li><li>使用该服务，您只需根据业务特性<strong>弹性伸缩物理服务器数量</strong>，获取物理服务器的时间将被缩短至分钟级。将容量管理及运维工作交由腾讯云，您可专注于业务创新。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231010127830.png" alt="image-20221231010127830" style="zoom:80%;"><p><code>CPM 也有云硬盘</code></p><ul><li>黑石物理服务器 2.0 特性：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231010206840.png" alt="image-20221231010206840" style="zoom: 50%;"><blockquote><p>一键式交付：您的业务应用可以直接访问裸金属云服务器的处理器和内存，无任何虚拟化开销</p><p>服务集成：深度整合 VMware 套件；通过内网互联，对接了腾讯云其他产品（TencentDB，对象存储 COS，消息队列 CMQ）</p></blockquote><ul><li><p>应用场景：</p><ul><li>大数据<ul><li>海量数据采集高速读写</li><li>双 bonding 25G网络</li></ul></li><li>虚拟化<ul><li>自研虚拟化技术</li><li>支持嵌套虚拟化</li></ul></li><li>游戏<ul><li>轻松应对高 IO 高 PPS</li><li>支持实时快速扩容</li></ul></li></ul><p><code>pps: 常用的网络吞吐率单位(即每秒发送多少个分组数据包)</code></p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231211236540.png" alt="image-20221231211236540" style="zoom: 67%;"><h2 id="云服务计费方案"><a href="#云服务计费方案" class="headerlink" title="云服务计费方案"></a>云服务计费方案</h2><h3 id="云服务计费方案-1"><a href="#云服务计费方案-1" class="headerlink" title="云服务计费方案"></a>云服务计费方案</h3><ul><li>云服务器购买渠道</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231211407259.png" alt="image-20221231211407259" style="zoom:95%;"><p><strong>官网购买：通过登录腾讯云官网控制台进行云服务的配置购买。</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231211441749.png" alt="image-20221231211441749" style="zoom: 80%;"><p><strong>API 购买：通过 API 接口，输入相应的参数，购买 CVM 服务器。</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231211523158.png" alt="image-20221231211523158" style="zoom: 50%;"><ul><li>可进行众多产品的选型配置，价格计算；直接购买或导出预算清单。</li></ul><h3 id="包年包月计费模式"><a href="#包年包月计费模式" class="headerlink" title="包年包月计费模式"></a>包年包月计费模式</h3><ul><li><strong>包年包月：</strong>预付费购买，一次性支付一个月、多个月或多年的费用。支付成功后锁定云资源，直到到期未续费而销毁。</li><li><strong>退款说明：</strong>每个账号默认享有一次五天内无理由全额退款。</li><li><strong>使用场景：</strong>具有较稳定的业务场景，需要长期使用云资源，追求低成本。</li><li><strong>计费流程：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231211816086.png" alt="image-20221231211816086" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231213443964.png" alt="image-20221231213443964" style="zoom: 80%;"><h3 id="按量计费模式"><a href="#按量计费模式" class="headerlink" title="按量计费模式"></a>按量计费模式</h3><ul><li><strong>按量计费：</strong>后付费，根据实际使用量或时长按一定的结算周期进行结算。可随时购买或销毁，可灵活升降配置。</li><li><strong>应用场景：</strong>业务发展波动大，资源使用有临时性和突发性。</li><li><strong>计费流程：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231213715911.png" alt="image-20221231213715911" style="zoom:50%;"><ul><li>开通按量计费资源时，系统根据资源结算周期及历史使用情况，预估冻结金额一定的账户余额，下次计费结算或资源释放时会解冻。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231213849332.png" alt="image-20221231213849332" style="zoom:67%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231213933547.png" alt="image-20221231213933547" style="zoom:67%;"><ul><li>不支持代理商代付</li><li>不支持代金券消费</li><li>不支持五天无理由退款</li><li>不支持切换为包年包月</li></ul><h3 id="云服务器计费方案"><a href="#云服务器计费方案" class="headerlink" title="云服务器计费方案"></a>云服务器计费方案</h3><ul><li>CVM 费用 = 实例费用（CPU + 内存）+ 存储费用 + 带宽费用</li><li><strong>计费模式：</strong><ul><li><strong>包年包月：</strong><ul><li>预付费，一次支付一个月或多个月费用。</li></ul></li><li><strong>按量计费：</strong><ul><li>后付费，按秒计费，按小时计费；</li><li>三级阶梯价：0＜T1≤ 96H＜T2≤360H ＜ T3 ；</li><li>部分实例支持关机不收费。</li></ul></li></ul></li></ul><table><thead><tr><th align="center"><strong>计费模式</strong></th><th align="center"><strong>包年包月</strong></th><th align="center"><strong>按量计费</strong></th></tr></thead><tbody><tr><td align="center">付款方式</td><td align="center">预付费</td><td align="center">后付费、购买时冻结费用，每小时结算</td></tr><tr><td align="center">计费单位</td><td align="center">元/月</td><td align="center">元/秒</td></tr><tr><td align="center">单价</td><td align="center">单价较低</td><td align="center">初始单价较高，阶梯降价；连续使用15天后，单价基本接近包年包月</td></tr><tr><td align="center">最少使用时长</td><td align="center">至少使用一个月</td><td align="center">按秒计费，按小时结算。</td></tr><tr><td align="center">实例配置调整</td><td align="center">随时升降配置。每个实例升配无限制，最多进行5次降配。</td><td align="center">随时升降配置，次数无限制。</td></tr></tbody></table><ul><li><strong>包年包月 CVM 实例每月新购配额</strong></li></ul><table><thead><tr><th align="center"><strong>中国广州</strong>  <strong>二区</strong></th><th align="center"><strong>中国广州</strong>  <strong>三区</strong></th><th align="center"><strong>中国上海</strong>  <strong>一区</strong></th><th align="center"><strong>中国上海</strong>  <strong>二区</strong></th><th align="center"><strong>中国北京</strong>  <strong>一区</strong></th><th align="center"><strong>中国北京</strong>  <strong>二区</strong></th><th align="center"><strong>中国香港</strong>  <strong>一区</strong></th><th align="center"><strong>新加坡</strong>  <strong>一区</strong></th><th align="center"><strong>多伦多</strong>  <strong>一区</strong></th><th align="center"><strong>硅谷</strong>  <strong>一区</strong></th></tr></thead><tbody><tr><td align="center">150</td><td align="center">150</td><td align="center">150</td><td align="center">150</td><td align="center">150</td><td align="center">150</td><td align="center">150</td><td align="center">100</td><td align="center">100</td><td align="center">100</td></tr></tbody></table><ul><li><strong>按量付费 CVM 实例每月新购配额</strong></li></ul><table><thead><tr><th align="center"><strong>中国广州</strong>  <strong>二区</strong></th><th align="center"><strong>中国广州</strong>  <strong>三区</strong></th><th align="center"><strong>中国上海</strong>  <strong>一区</strong></th><th align="center"><strong>中国上海</strong>  <strong>二区</strong></th><th align="center"><strong>中国北京</strong>  <strong>一区</strong></th><th align="center"><strong>中国北京</strong>  <strong>二区</strong></th><th align="center"><strong>中国香港</strong>  <strong>一区</strong></th><th align="center"><strong>新加坡</strong>  <strong>一区</strong></th><th align="center"><strong>多伦多</strong>  <strong>一区</strong></th><th align="center"><strong>硅谷</strong>  <strong>一区</strong></th></tr></thead><tbody><tr><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">20</td><td align="center">30</td><td align="center">20</td><td align="center">20</td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20221231214801861.png" alt="image-20221231214801861" style="zoom:67%;"><h2 id="课程总结-1"><a href="#课程总结-1" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>云服务器基础：地域与可用区、实例、镜像、存储</li><li>云服务器产品：CVM、GPU、FPGA、CDH、CPM</li><li>云服务计费方案：按量计费、包年包月、回收机制、冻结机制</li></ul><h1 id="腾讯云网络产品介绍"><a href="#腾讯云网络产品介绍" class="headerlink" title="腾讯云网络产品介绍"></a>腾讯云网络产品介绍</h1><h2 id="腾讯云私有网络-VPC"><a href="#腾讯云私有网络-VPC" class="headerlink" title="腾讯云私有网络 VPC"></a>腾讯云私有网络 VPC</h2><h3 id="私有网络-VPC"><a href="#私有网络-VPC" class="headerlink" title="私有网络 VPC"></a>私有网络 VPC</h3><p><code>基础网络是腾讯云上所有用户的公共网络资源池,所有云服务器的内网 IP 地址都由腾讯云统一分配,无法自定义;</code></p><p><code>由于基础网络资源日益紧缺且无法扩增,2017年xx月xx日后,新注册的账号已不支持基础网络,仅支持私有网络</code></p><ul><li>私有网络（Virtual Private Cloud）是用户自定义的、逻辑隔离的专属云上网络空间。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101154849689.png" alt="image-20230101154849689" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101154905222.png" alt="image-20230101154905222" style="zoom: 50%;"><ul><li>自定义网络</li><li>灵活、高性能的 Internet 访问（NAT 网关、公网网关、弹性 IP）</li><li>稳定、可靠的用户数据中心连接（专线接入、VPN 网关）</li><li>腾讯云上资源灵活互通（对等连接、基础网络互通）</li><li>多维度、全方位安全防护（安全组、网络 ACL）</li></ul><h3 id="VPC-私有网段"><a href="#VPC-私有网段" class="headerlink" title="VPC 私有网段"></a>VPC 私有网段</h3><ul><li><strong>私有网段：</strong><ul><li>10.0.0.0 - 10.255.255.255（掩码12 - 28）</li><li>172.16.0.0 - 172.31.255.255（掩码12 – 28）</li><li>192.168.0.0 - 192.168.255.255 （掩码16 - 28）</li></ul></li><li><strong>子网：</strong><ul><li>云资源（CVM，CDB等）需要部署在子网内；</li><li>通过 DHCP 获得私有 IP，不能在公网路由；</li><li>每个子网可用 IP 数 2^n - 3（n为主机位的位数）。</li></ul></li></ul><p><code>主机号中全0是保留地址,全1是广播地址,以及网关地址</code></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/vpc.png" alt="image-20230201151850206" style="zoom:50%;"><ul><li><p><strong>子网划分</strong></p><ul><li><p>IP地址组成（二进制）： <u>xxxx xxxx . xxxx xxxx . xxxx xxxx . <font color="red">xxxx xxxx</font></u></p><p>​                                           子网设置（掩码24）         主机位</p></li><li><p>子网划分：通过设置子网的位数来决定可用的子网数目与主机 IP 数。 如设子网位数为 m，主机数为：2^(32-m) - 3</p></li></ul></li><li><p><strong>举例：10.3.5.7/24</strong></p><ul><li>二进制：0000 1010 . 0000 0011 . 0000 0101 . <font color="red">0000 0111</font></li><li>主机数量 2^(32-24) -3；</li><li>网络地址 10.3.5.0，广播地址：10.3.5.255，网关地址（可设定）</li></ul></li></ul><h3 id="VPC-路由表"><a href="#VPC-路由表" class="headerlink" title="VPC 路由表"></a>VPC 路由表</h3><ul><li>VPC 内网互通，不同 VPC 内网不通。通过路由表实现子网间、子网与外部的路由通信。</li><li><strong>路由表种类：</strong><ul><li>默认路由表</li><li>自定义路由表</li></ul></li><li><strong>路由策略</strong><ul><li>目的端</li><li>下一条类型</li><li>下一条</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101162448740.png" alt="image-20230101162448740" style="zoom:50%;"><blockquote><ul><li>NAT 网关：将指向目标网段的流量转发到一个 NAT 网关。</li><li>对等连接：将指向目标网段的流量转发到对等连接另一端的 VPC。</li><li>专线网关：将指向目标网段的流量转发到一个专线网关。</li><li>高可用虚拟 IP：将指向目标网段的流量转发到一个高可用虚拟 IP。</li><li>VPN 网关：将指向目标网段的流量转发到一个 VPN 网关。</li><li>云服务器的公网 IP：将指向目标网段的流量转发到私有网络内的一台 CVM 实例的公网 IP（包括普通公网 IP 和弹性 IP）。</li><li>云服务器：将指向目标网段的流量转发到私有网络内的一台 CVM 实例。</li><li>CDC 本地网关：本地专用集群 CDC 通过 CDC 本地网关与用户 IDC 通信。</li></ul></blockquote><h3 id="VPC-访问控制"><a href="#VPC-访问控制" class="headerlink" title="VPC 访问控制"></a>VPC 访问控制</h3><ul><li><strong>网络 ACL：</strong>控制进出子网的数据流（入站/出站）。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101162529478.png" alt="image-20230101162529478" style="zoom: 80%;"><ul><li><strong>安全组：</strong>配置放通或拒绝的端口/协议。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101162636443.png" alt="image-20230101162636443" style="zoom:80%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101162643466.png" alt="image-20230101162643466" style="zoom:80%;"><table><thead><tr><th><strong>安全组</strong></th><th align="center"><strong>网络</strong> <strong>ACL</strong></th></tr></thead><tbody><tr><td>CVM  实例级别的流量控制（第一防御层）</td><td align="center">子网级别的流量控制（第二防御层）</td></tr><tr><td>支持允许规则和拒绝规则</td><td align="center">支持允许规则和拒绝规则</td></tr><tr><td>有状态：返回数据流会被自动允许，不受任何规则影响</td><td align="center">无状态：返回数据流必须被规则明确允许</td></tr><tr><td>只有在启动  CVM  实例的同时，指定安全组或稍后将安全组与实例关联的情况下，操作才会被应用到实例</td><td align="center">自动应用到关联子网内的所有  CVM  实例（备份防御层，若  CVM  实例为绑定安全组，此处可以做备份防御）</td></tr></tbody></table><h3 id="弹性网卡-ENI"><a href="#弹性网卡-ENI" class="headerlink" title="弹性网卡 ENI"></a>弹性网卡 ENI</h3><ul><li>弹性网卡ENI（Elastic Network Interface）是绑定私有网络内云服务器的一种弹性网络接口，可在云服务器间自由迁移。</li><li><strong>ENI 产品优势：</strong><ul><li>多网卡/IP （同一个主机可以设置多个网卡【多个 IP 地址】，这样管理网段、存储网段、业务网段的流量就进行了区分 ）</li><li>网络隔离</li><li>灵活迁移</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101163411778.png" alt="image-20230101163411778" style="zoom: 67%;"><h2 id="腾讯云网络连接服务"><a href="#腾讯云网络连接服务" class="headerlink" title="腾讯云网络连接服务"></a>腾讯云网络连接服务</h2><h3 id="网络连接产品"><a href="#网络连接产品" class="headerlink" title="网络连接产品"></a>网络连接产品</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101163524538.png" alt="image-20230101163524538" style="zoom:50%;"><h3 id="公网接入"><a href="#公网接入" class="headerlink" title="公网接入"></a>公网接入</h3><ul><li>VPC 里的服务器分配私有 IP，无法访问公网，可以绑定公网 IP 来实现。(<strong>通过多网卡</strong>)<ul><li><strong>普通公网 IP：在CVM上申请绑定，与账号无关，解绑后立即释放，无法找回。</strong></li><li><strong>弹性公网 IP：</strong>（Elastic IP，EIP）<ul><li>EIP 可独立申请，绑定 CVM、或 NAT 网关实例</li><li>与账号相关，解绑后继续保留，可重新绑定</li><li>可通过 API/控制台主动释放或欠费自动释放</li></ul><code>EIP 的费用由 IP 资源费用和公网网络费用组成.</code><blockquote><p>当弹性公网 IP 未绑定云资源的时候，不收取公网网络费用，只收取 IP 资源费用；</p><p>当弹性公网 IP 绑定了云资源时，不收取 IP 资源费用，只收取公网网络费用.</p></blockquote></li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101163654137.png" alt="image-20230101163654137" style="zoom:80%;"><p><strong>公网网关</strong></p><p><code>如果每一台服务器都申请公网IP,这个对公网IP的资源有很大的浪费,而比较好的方式可以通过公网网关</code></p><blockquote><p>公网网关其实就是<strong>一台服务器</strong>，开启了<strong>公网转换功能</strong>的服务器</p></blockquote><ul><li>没有公网 IP 的云服务器，可通过位于不同子网的公网网关访问 Internet。</li><li>公网网关就是开启了公网转发功能的云主机。</li><li>只能在购买服务器时进行设置。</li><li>需要建立独立的网关子网。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101163745416.png" alt="image-20230101163745416" style="zoom: 67%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101163755987.png" alt="image-20230101163755987" style="zoom:67%;"><ul><li><strong>NAT 网关</strong><code>Natwork Address Translation: 网络地址转换</code><ul><li>通过 IP 地址转换提供 Internet 访问服务；（将私有 IP 地址转换为公网 IP 地址）</li><li>SNAT（源网络地址转换）；（通过 <strong>IP</strong> 地址转换，将私有 IP 地址转换为公网 IP 地址，<font color="red">很浪费，因为公网 IP 资源是非常稀缺的</font>）</li><li>DNAT（目的网络地址转换）；（通过<strong>端口号</strong>转换，将私有 IP 对应公网 IP 的某一个端口，<font color="green">通过一个公网 IP 加上不同的端口号解决了后端多个私有 IP 的转换</font>）</li><li>网关流控、流量告警、共享带宽包。</li></ul></li></ul><p>　　</p><ul><li><strong>NAT 网关类型</strong><ul><li>小型（最大 100 万连接数）</li><li>中型（最大 300 万连接数）</li><li>大型（最大 1000 万连接数）</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101163955548.png" alt="image-20230101163955548" style="zoom:70%;"><table><thead><tr><th align="center"><strong>属性</strong></th><th align="center"><strong>NAT</strong> <strong>网关</strong></th><th align="center"><strong>公网网关</strong></th></tr></thead><tbody><tr><td align="center">可用性</td><td align="center">双机热备，自动热切换</td><td align="center">手动切换故障网关</td></tr><tr><td align="center">公网带宽</td><td align="center">最大  5Gbps</td><td align="center">取决于云服务器网络带宽</td></tr><tr><td align="center">公网  IP</td><td align="center">最多绑定  10 个弹性 IP（转换能力更强）</td><td align="center">1  个弹性  IP 或普通公网 IP（转换能力弱）</td></tr><tr><td align="center">公网限速</td><td align="center">无</td><td align="center">取决于云服务器限速</td></tr><tr><td align="center">最大连接数</td><td align="center">1000  万</td><td align="center">50  万</td></tr><tr><td align="center">内网  IP</td><td align="center">不占用  VPC  用户的内网  IP</td><td align="center">占用子网内  IP</td></tr><tr><td align="center">安全组</td><td align="center">不支持安全组绑定</td><td align="center">支持安全组绑定</td></tr></tbody></table><blockquote><p><strong>NAT 网关</strong>与云服务器解耦了，<strong>公网网关</strong>受限于云服务器（其本身就是一台云服务器），所以 NAT 网关功能更加强大，价格也会更贵</p></blockquote><h3 id="企业-DC-连接"><a href="#企业-DC-连接" class="headerlink" title="企业 DC 连接"></a>企业 DC 连接</h3><ul><li>专线接入（Direct Connect，DC）提供与公网完全隔离的物理专线接企业 DC 与腾讯云。</li><li><strong>产品组成：</strong>物理专线、专用通道、专线网关</li><li><strong>产品优势：</strong><ul><li>网络质量保证</li><li>多地域接入</li><li>多端口多协议</li><li>主备双路接入</li></ul></li><li><strong>应用场景：</strong><ul><li>混合云</li><li>DC 容灾</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164204924.png" alt="image-20230101164204924" style="zoom: 80%;"><ul><li>VPN 连接（VPN Connections）在 Internet 上构建一条安全加密的网络隧道，实现本地 DC 与腾讯云上资源连通的网络服务。<ul><li><strong>产品组成：</strong>VPN 网关、对端网关、VPN 通道。</li><li><strong>产品优势：</strong>安全可靠通信、快速弹性部署、监控告警与流量控制。</li><li><strong>加密协议：</strong>IKE（秘钥交换协议）和 IPsec 对传输数据进行加密。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164404145.png" alt="image-20230101164404145" style="zoom:67%;"><table><thead><tr><th><strong>对比项</strong></th><th><strong>专线接入</strong></th><th><strong>VPN 连接</strong></th></tr></thead><tbody><tr><td>网络质量</td><td>时延：99.5% 保障，固定路由配置免去拥堵或绕行。  带宽：单线路最大支持  10Gbps，多链路负载均衡。</td><td>时延：  Internet 网络高峰时，路由可能绕行。带宽：单网关最大支持 100Mbps ，可多 VPN 网关配置。</td></tr><tr><td>高可靠</td><td>接入与转发设备采用分布式集群化部署，双线接入，实现全链路高可靠，可用性 99.95% 。</td><td>采用网关双机热备份配置，具备网关层高可靠，Internet 网络链路不可靠。</td></tr><tr><td>安全性</td><td>独占网络链路，无数据泄露风险，安全性高，满足金融、政企等高安全要求</td><td>基于  IPsec 与 IKE 加密传输，可以满足绝大多数网络传输安全性要求。</td></tr><tr><td>NAT 支持</td><td>支持在网关上配置 NAT（少量公网 IP 对应大量私有 IP）</td><td>暂不支持</td></tr><tr><td>部署时间</td><td>申请部署需要数周时间</td><td>实时部署，即买即用。</td></tr></tbody></table><blockquote><p>很多企业的做法是：同时部署专线接入和 VPN 连接</p></blockquote><h3 id="对等连接"><a href="#对等连接" class="headerlink" title="对等连接"></a>对等连接</h3><ul><li>对等连接（Peering Connection，PC）是一种大带宽、高质量的云上资源互通服务，支持多 VPC、多区域、多账户、异构网络互通等。对等连接互通性不传递。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164522007.png" alt="image-20230101164522007" style="zoom: 50%;"><ul><li>VPC 对等连接的互通性不传递</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164625116.png" alt="image-20230101164625116" style="zoom:50%;"><ul><li>跨账号对等连接需要对等确认</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164637234.png" alt="image-20230101164637234" style="zoom:50%;"><blockquote><p>对等连接的费用由发起端承担，如图账号 A</p></blockquote><ul><li>对等连接两端 VPC 网段不能重叠（<font color="red">因为重叠后路由表会出现混乱</font>）</li></ul><table><thead><tr><th><strong>比较项</strong></th><th><strong>同地域对等连接</strong></th><th><strong>跨地域对等连接</strong></th></tr></thead><tbody><tr><td>底层架构</td><td>基于腾讯云单地域本地内网</td><td>基于腾讯云跨地域的内部 MPLS  网络（经过公网）</td></tr><tr><td>最大带宽</td><td>5 Gbps；黑石互联：1  Gbps</td><td>最大 1  Gbps</td></tr><tr><td>计费规则</td><td>免费</td><td>网络带宽按天计费。</td></tr><tr><td>链路可用性</td><td>99.50%</td><td>白金：99.95%；金：99.50%；银：99.00%</td></tr><tr><td>跨账号连接</td><td>支持</td><td>支持</td></tr><tr><td>访问权限</td><td>互相访问全部资源</td><td>互相访问全部资源</td></tr><tr><td>功能限制</td><td>两端 VPC  网段不可重复     多个对等连接间互不影响。</td><td>两端 VPC  网段不可重复      一个 VPC  连接多个  VPC（网段不可重复）</td></tr><tr><td>应用场景</td><td>不同 VPC 互通</td><td>跨地域 VPC 互通、两地三中心容灾</td></tr></tbody></table><p><code>腾讯云计划将于2022年10月31日00时00分下线对等连接-跨地域互联服务,后续不再维护，如果继续使用将会有运营风险</code></p><blockquote><p>对等连接跨地域互联服务升级迁移至云联网，从价格角度，同等服务可用性（99.95%）条件下，云联网价格更优</p></blockquote><h3 id="云联网"><a href="#云联网" class="headerlink" title="云联网"></a>云联网</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/cloudinternet.png" alt="image-20230201175055716" style="zoom: 50%;"><p><code>POP(Point-of-Presence)表示入网点,是访问企业网络内部的接入点</code></p><blockquote><p>假设你家在一个小区里，朋友来找你，他找到小区门口，小区保安开门让他进去。<strong>PoP 就像是访问内网的门口。</strong></p><p>很多企业为求安全会设立内网，内网不能随便访问其他网站，只能访问管理员开放的网站。</p></blockquote><ul><li>全网互联</li><li>智能学习与调度</li><li>路由自动下发</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/ccn.png" alt="image-20230202055742956" style="zoom:50%;"><ul><li><strong>与对等连接互通不传递性</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164757003.png" alt="image-20230101164757003" style="zoom: 67%;"><ul><li><strong>路由限制：</strong><ul><li>不同 VPC 中相同或包含的子网不能互通；</li><li>不同 VPC CIDR 有重叠 ，若其子网不同，可以互通；</li><li>若子网出现冲突，则最先关联云联网的实例生效，后关联的无效。</li></ul></li></ul><table><thead><tr><th>资源</th><th>限制（个）</th></tr></thead><tbody><tr><td>每个账号可以创建的云联网个数</td><td>5</td></tr><tr><td>每个云联网实例可以绑定的网络实例数</td><td>25</td></tr><tr><td>每个云联网路由条目数量</td><td>无限制</td></tr></tbody></table><ul><li>混合云：一次接入、全网互联</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164847909.png" alt="image-20230101164847909" style="zoom: 75%;"><ul><li>游戏加速：全球布局、就近接入</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101164859907.png" alt="image-20230101164859907" style="zoom: 75%;"><h2 id="腾讯云负载均衡服务"><a href="#腾讯云负载均衡服务" class="headerlink" title="腾讯云负载均衡服务"></a>腾讯云负载均衡服务</h2><h3 id="负载均衡-CLB"><a href="#负载均衡-CLB" class="headerlink" title="负载均衡 CLB"></a>负载均衡 CLB</h3><ul><li><strong>负载均衡（Cloud Load Balancer，CLB）</strong>提供安全快捷的流量分发服务。</li><li><strong>工作原理：</strong><ul><li><strong>虚拟 VIP：</strong>统一对外服务 IP，接受访问请求；（负载均衡实例成功购买后，系统将自动分配一个 VIP，该 VIP 为负载均衡向客户端提供服务的 IP 地址。）</li><li><strong>CLB 实例：</strong>通过监听器监听请求并分发流量；（当客户端请求时，负载均衡会根据配置的监听器转发规则进行请求转发。）</li><li><strong>后端 CVM：</strong>处理访问请求并返回结果；</li><li><strong>健康检查：</strong>探测后端 CVM 的健康状态；（在“健康检查”页签，开启健康检查，检查域名和检查路径使用默认的转发域名和转发路径，完成后单击<strong>下一步</strong>）</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101165651737.png" alt="image-20230101165651737" style="zoom:67%;"><ul><li><strong>高性能/高吞吐：</strong><code>qq、微信</code><ul><li>单集群最大支持1.2亿连接数；</li><li>单集群流量峰值40Gb/s，每秒处理包量达600万；</li></ul></li><li><strong>高可用性 99.95%</strong><ul><li>节点健康检查、自动切换； </li><li>跨可用区部署，机房级容灾；</li></ul></li><li><strong>安全保障</strong><ul><li>对每个租户的流量进行严格隔离；</li><li>提供主动 DDoS 防护能力。</li></ul></li></ul><h3 id="流量分发算法"><a href="#流量分发算法" class="headerlink" title="流量分发算法"></a>流量分发算法</h3><p>​                                                                                                                    <strong>四层负载均衡</strong></p><p>​                                                                                                     监听 TCP 与 UDP，基于端口+VIP 转发【传输层协议】</p><p>​                                                                                        <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101170101056.png" alt="image-20230101170101056"></p><p>​                                                                                                                    <strong>七层负载均衡</strong></p><p>​                                                                                            监听 HTTP 与 HTTPS，基于内容（域名/URL）转发【应用层协议】</p><p>​                                                                                      <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101170225270.png" alt="image-20230101170225270" style="zoom: 80%;"></p><blockquote><p><code>image/</code> 后 <code>/</code> 必须保留，代表 image 是默认的目录，而不是名为 image 的文件。</p></blockquote><table><thead><tr><th><strong>算法</strong></th><th><strong>加权轮询 WRRS</strong>（Weighted Round-Robin Scheduling）</th><th><strong>加权最小连接 WLCS（Weighted Least-Connection Scheduling）</strong></th><th><strong>源地址散列</strong> <strong>IP-Hash</strong></th></tr></thead><tbody><tr><td>具体说明</td><td>根据新连接数调度，权值高的服务器先分配连接，处理更多连接，依次轮询。</td><td>设置权值为  wi，当前连接数为 ci，流量分派到ci/wi值最小的服务器。（如果存在 ci/wi 相同的后端服务器实例，再使用加权轮询的方式调度。）</td><td>根据请求的源  IP 地址，使用散列键（Hash Key）从静态分配的散列表找出对应服务器。</td></tr><tr><td>适用场景</td><td>服务时间基本相同、短链接（HTTP）。</td><td>长连接/服务时间不同，如 FTP；新增后端服务器。</td><td>固定分派、会话保持，适合无 cookie 功能的 TCP 协议。</td></tr><tr><td>不适用</td><td><strong>连接的服务时间差距大。</strong></td><td>最小连接数和会话保持不能同时开启</td><td>服务器数量变化或该服务器不可用时有影响。</td></tr></tbody></table><blockquote><p>IP-Hash 工作原理：首先将 IP 地址映射成一个 Hash 值，然后对 Hash 和后端服务器的数量取模，得到相同索引的服务器进行连接。</p></blockquote><h3 id="负载均衡类型"><a href="#负载均衡类型" class="headerlink" title="负载均衡类型"></a>负载均衡类型</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101170800356.png" alt="image-20230101170800356" style="zoom:67%;"><p><code>2021年xx月xx日,传统型负载均衡CLB停止新购.新型负载均衡可以覆盖传统型CLB的全部功能.</code></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171007291.png" alt="image-20230101171007291" style="zoom:50%;"><blockquote><p>腾讯云同时接入了联通和电信运营商的网络，可以避免绕行。</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171015508.png" alt="image-20230101171015508" style="zoom:50%;"><blockquote><p>屏蔽 IP、透明化服务理解：前端访问的都是负载均衡的 <strong>VIP</strong>，即使后端的节点故障或者 IP 发生变化，对于前端来说都是不可感知的、透明的</p></blockquote><h3 id="CLB-应用场景"><a href="#CLB-应用场景" class="headerlink" title="CLB 应用场景"></a>CLB 应用场景</h3><p><strong>流量分发/扩展</strong></p><ul><li>将多台 web 接入层服务器虚拟成一个高性能、高可用的接入层服务池</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171048549.png" alt="image-20230101171048549" style="zoom:50%;"><ul><li>接入层 web 服务器可随公网的访问压力的增加/减少</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171112274.png" alt="image-20230101171112274" style="zoom: 50%;"><p><code>横向扩展：增加节点;</code> &lt;—— 负载均衡（结合 AS，更容易调度分发）</p><p><code>纵向扩展：增加规格</code></p><p><strong>业务访问分离</strong></p><ul><li>通过 CLB 与 CDN 将不同流量分发到对应集群，实现文本、图片与视频访问分离，以获得最优访问体验与性价比。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171138147.png" alt="image-20230101171138147" style="zoom:50%;"><p><strong>出入流量分离</strong></p><ul><li>内部发起与外部访问流量分离、设置不同处理与安全策略<ul><li>主动公网访问：通过 NAT 网关进行私有 IP 与公有 IP 地址转换。</li><li>响应外网请求：通过负载均衡分发流量，屏蔽后端服务器。（安全性，避免出现攻击）</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171217776.png" alt="image-20230101171217776" style="zoom:50%;"><p><strong>混合云</strong></p><ul><li>通过负载均衡将业务流量分发到<strong>企业数据中心</strong>、或<strong>公有云</strong>上。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171237421.png" alt="image-20230101171237421" style="zoom: 50%;"><blockquote><p>假设企业数据中心（EDE）发生了故障，可以通过负载均衡将数据全部转发到公有云上，实现了容灾备份</p></blockquote><h3 id="负载均衡指标"><a href="#负载均衡指标" class="headerlink" title="负载均衡指标"></a>负载均衡指标</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171254054.png" alt="image-20230101171254054" style="zoom:50%;"><h2 id="腾讯云云网络计费方案"><a href="#腾讯云云网络计费方案" class="headerlink" title="腾讯云云网络计费方案"></a>腾讯云云网络计费方案</h2><h3 id="免费的网络产品"><a href="#免费的网络产品" class="headerlink" title="免费的网络产品"></a>免费的网络产品</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171352624.png" alt="image-20230101171352624" style="zoom:50%;"><h3 id="公网接入计费方案"><a href="#公网接入计费方案" class="headerlink" title="公网接入计费方案"></a>公网接入计费方案</h3><ul><li><p><strong>免费使用：</strong></p><ul><li>普通公网 IP；</li><li>已绑定 CVM 或 NAT 网关使用的弹性 IP。</li></ul></li><li><p><strong>弹性 IP 收费：</strong></p><ul><li>未绑定 CVM 或 NAT网关使用时收取闲置占用费。</li><li>闲置的 EIP 费用计算精确到秒</li><li>建议及时将不使用的弹性 IP 释放，保证 IP 资源合理利用，并节省费用。</li></ul></li></ul><blockquote><p>之所以这样设置是因为公网 IP 是有限的，避免用户购买了大量的弹性公网 IP 而不使用造成浪费；</p></blockquote><p><strong>公网网关</strong></p><ul><li>公网网关本质上是一个云服务器实例，因此遵循云服务器的计费方案。</li></ul><table><thead><tr><th><strong>付费模式</strong></th><th><strong>特性</strong></th><th><strong>适合场景</strong></th></tr></thead><tbody><tr><td>包年包月</td><td>预付费</td><td>适合业务量较稳定的长周期业务，  费用较按量计费模式更为低廉。</td></tr><tr><td>按量计费</td><td>后付费</td><td>适合业务量有瞬间大幅波动的场景，  费用按实际使用量计算，无需提前支付费用。</td></tr></tbody></table><p><strong>NAT 网关</strong></p><ul><li><p><strong>费用组成：</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101171551800.png" alt="image-20230101171551800" style="zoom:99%;"><ul><li><strong>网关租用费：</strong>按小时计费、按网关类型（大、中、小型）定价不同。</li><li><strong>外网流量费：</strong>访问 Internet 产生的流量费用。<ul><li>按带宽计费：按公网传输速率（单位为 Mbps）计费；</li><li>按流量计费：按公网传输的数据总量（单位为 GB）计费。</li></ul></li></ul></li></ul><h3 id="网络连接计费方案"><a href="#网络连接计费方案" class="headerlink" title="网络连接计费方案"></a>网络连接计费方案</h3><ul><li>对等连接计费方案<ul><li>同地域对等连接免费使用。（<code>因为同地域走的是腾讯云的内网</code>）</li><li>跨地域对等连接收费方式如下二选一：（<code>跨地域走的是运营商的网络</code>）</li></ul></li></ul><table><thead><tr><th><strong>计费方式</strong></th><th><strong>计费说明</strong></th></tr></thead><tbody><tr><td><strong>日峰值计费</strong></td><td>• 每日费用 = 当日带宽峰值 * 阶梯单价；  •当日带宽峰值按每  5min  平均带宽计算；  •按天计费（元  /  Mbps  / 天）；</td></tr><tr><td><strong>月95计费</strong></td><td>• 每月费用 = 月95带宽峰值 x 有效天数占比 x 阶梯单价；  •月95 带宽峰值：当月取每 5 分钟带宽进行降序排列，去掉前 5%；  •有效占比 = 有效天 /自然月的天数；带宽大于 1 Kbps 为有效天。</td></tr></tbody></table><blockquote><p><strong>当日带宽峰值：</strong>1小时12次，一天 288 次，取 288 次里峰值最高的作为当日带宽峰值；</p><p><strong>月95计费：</strong>288 次 x 当月月数，将数值进行排列，再取除前 5% 外的最高值</p><p><code>阶梯单价：取当月的月95带宽峰值所处区间单价</code></p></blockquote><ul><li><p>云联网计费方案</p><ul><li><strong>免费使用：</strong>同地域网络实例互通不收费。（<code>同地域内网互通,不产生流量</code>）</li><li><strong>计费模式：</strong><ul><li>跨地域网络实例间互通会产生费用，按月95后付费标准收费；</li><li>每月费用 = 云联网内网络实例两两互通产生的跨地域互通流量费用之和；</li><li>两地域间互通每月费用 = 月95带宽峰值 * 有效天数占比 * 阶梯单价</li></ul></li></ul></li><li><p>专线接入计费方案</p><ul><li>费用组成：物理专线费用 + 专线通道</li></ul></li></ul><table><thead><tr><th><strong>收费项</strong></th><th><strong>收费模式</strong></th></tr></thead><tbody><tr><td>物理专线</td><td>•腾讯云收费项：收取一次性接入费  •运营商收费项：光纤铺设费  •IDC 机房提供商：光纤入楼物业费</td></tr><tr><td>专线通道</td><td>•专用通道指专线接入点与云上专线网关之间腾讯云内网部分；  •专线接入点和云上专线网关地域相同，免费使用；  •专线接入点和云上专线网关地域不同，月95带宽值后付费。</td></tr></tbody></table><ul><li>VPN 计费方案<ul><li>费用组成：VPN 网关租用费（按小时计费）+ 流量费用</li></ul></li></ul><table><thead><tr><th><strong>VPN连接</strong></th><th><strong>计费模式</strong></th></tr></thead><tbody><tr><td>VPN通道</td><td>免费使用</td></tr><tr><td>对端网关</td><td>按量后付费</td></tr><tr><td>VPN网关</td><td>按月预付费</td></tr></tbody></table><h3 id="负载均衡计费方案"><a href="#负载均衡计费方案" class="headerlink" title="负载均衡计费方案"></a>负载均衡计费方案</h3><ul><li>内网型 CLB 实例免费；公网型 CLB 按量后付费：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101181331997.png" alt="image-20230101181331997" style="zoom:67%;"><ul><li><strong>实例租用费：</strong>按小时计价和结算，预先冻结 1小时费用。</li><li><strong>外网流量费：</strong><ul><li>按带宽计费：带宽消耗使用云服务器已包含的公网带宽，不另收带宽费用；</li><li>按流量计费：用户使用公网负载均衡会产生出流量，需支付对应流量费用。</li></ul></li></ul><h2 id="课程总结-2"><a href="#课程总结-2" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li><strong>本课程详细介绍了</strong><ul><li>腾讯云私有网络：私有网段、路由表、安全组、网络ACL、弹性网卡</li><li>腾讯云网络连接：弹性IP/公网网关/NAT网关，专线接入/VPN连接，对等连接/云联网</li><li>腾讯云负载均衡：转发机制、流量分发、CLB类型、应用场景</li><li>腾讯云网络计费：免费产品、日峰值计费、月95计费</li></ul></li></ul><h1 id="腾讯云-CDN-加速产品介绍"><a href="#腾讯云-CDN-加速产品介绍" class="headerlink" title="腾讯云 CDN 加速产品介绍"></a>腾讯云 CDN 加速产品介绍</h1><h2 id="CDN-加速基础知识"><a href="#CDN-加速基础知识" class="headerlink" title="CDN 加速基础知识"></a>CDN 加速基础知识</h2><h3 id="内容分发网络"><a href="#内容分发网络" class="headerlink" title="内容分发网络"></a>内容分发网络</h3><ul><li>内容分发网络（Content Delivery Network，CDN）是在现有 Internet 中增加的一层新的网络架构，由遍布全国的高性能加速节点构成。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101203044356.png" alt="image-20230101203044356" style="zoom: 50%;"><ul><li>CDN 可解决一下问题：<ul><li>用户与服务器物理距离远，多次网络转发，延时高且不稳定。</li><li>所在运营商不同，需运营商之间转发。</li><li>网络带宽、处理能力有限，当接收到海量请求时，响应速度、可用性降低。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101203227596.png" alt="image-20230101203227596" style="zoom: 67%;"><h3 id="CDN-访问原理"><a href="#CDN-访问原理" class="headerlink" title="CDN 访问原理"></a>CDN 访问原理</h3><ul><li>传统访问原理</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101203255251.png" alt="image-20230101203255251" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101203350163.png" alt="image-20230101203350163" style="zoom:50%;"><blockquote><p><strong>全局负载均衡（GSLB）</strong>主要的目的是在整个网络范围内将用户的请求定向到最近的节点（或者区域），因此，<strong>就近性判断</strong>是全局负载均衡的主要功能。</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101203408305.png" alt="image-20230101203408305" style="zoom: 50%;"><h3 id="CDN-发展阶段"><a href="#CDN-发展阶段" class="headerlink" title="CDN 发展阶段"></a>CDN 发展阶段</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101203427328.png" alt="image-20230101203427328" style="zoom:50%;"><blockquote><p>1998 年：主要访问的是文本信息，全国各地进行访问，速度很差，通过 CDN 加速；</p><p>2000 年： “泡沫破裂”—— 互联网企业倒闭，加速需求减少，CDN 发展缓慢；</p><p>2004~2007 年：内容不再是文本信息了，像博客之类的内容出现；移动互联网——手机上网需求增加，CDN 快速发展；</p><p>2011年：视频、游戏之类的业务开始出现 … …</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101203530340.png" alt="image-20230101203530340" style="zoom:50%;"><h3 id="腾讯云-CDN-介绍"><a href="#腾讯云-CDN-介绍" class="headerlink" title="腾讯云 CDN  介绍"></a>腾讯云 CDN  介绍</h3><ul><li>腾讯自研 12 年发展，腾讯云 9 年开放。国内节点 1100+，带宽突破 80T，海外融合布局，服务十万客户</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101204020056.png" alt="image-20230101204020056" style="zoom: 67%;"><h4 id="腾讯云-CDN-功能"><a href="#腾讯云-CDN-功能" class="headerlink" title="腾讯云 CDN 功能"></a>腾讯云 CDN 功能</h4><ul><li><p>全面加速 安全可靠</p><ul><li>提供多种加速服务。使用高性能缓存系统。</li></ul></li><li><p>快速接入 管理便捷</p><ul><li>支持自有源站，COS 源等多种源站类型接入。</li></ul></li><li><p>配置全面 报表丰富</p><ul><li>提供多种配置；有实时监控告警及自助排障工具、统计分析报表和日志信息。</li></ul></li><li><p>计费灵活 项目管理</p><ul><li>多种计费方式；提供项目管理支持。</li></ul></li><li><p>平均延时 0.196 秒</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101210908557.png" alt="image-20230101210908557" style="zoom: 50%;"><ul><li>平均可用性 99.996%</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101210940495.png" alt="image-20230101210940495" style="zoom: 50%;"><h2 id="腾讯云-CDN-系统架构"><a href="#腾讯云-CDN-系统架构" class="headerlink" title="腾讯云 CDN 系统架构"></a>腾讯云 CDN 系统架构</h2><h3 id="CDN-系统架构"><a href="#CDN-系统架构" class="headerlink" title="CDN 系统架构"></a>CDN 系统架构</h3><ul><li>腾讯云建成了涵盖“管理——内容——监控”的 CDN 架构平台。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101211311938.png" alt="image-20230101211311938" style="zoom: 50%;"><h3 id="CDN-内容系统"><a href="#CDN-内容系统" class="headerlink" title="CDN 内容系统"></a>CDN 内容系统</h3><ul><li>内容系统应用了多项技术保证运转：<ul><li>DiskTank3 存储引擎</li><li>双层缓存架构</li><li>NWS 节点架构</li><li>TGW 负载均衡</li><li>大禹安全拦截系统</li></ul></li></ul><blockquote><p><code>DiskTank 3 存储引擎</code>：针对不同的大小文件，腾讯云 CDN 节点配备了 SSD 和 SATA 不同的硬件机型，在提供足够的加速性能的同时，保证 CDN 边缘节点的命中率。</p><p><code>双层缓存架构</code>：通常的 CDN 边缘节点架构为<strong>单层架构</strong>，集群内的单机为了兼顾 CPU 的效率和成本，以及挂载硬盘的成本，采用单层配置，如果在边缘节点无法缓存，便会直接回源或是到中间节点请求资源。<strong>此方案节点的命中率以及缓存的使用效率较低</strong>。 为了解决这个问题，腾讯云 CDN 在边缘节点和中间节点集群上采用<strong>双层缓存架构</strong>，即集群内的缓存机器分为两层：第一层的缓存机器挂载全 SSD 硬盘，兼顾速度以及处理的准确性；第二层的缓存节点挂载海量机械硬盘，能够做到存储大量信息。在第一层缓存未命中的情况下，会优先向第二层缓存请求数据。在两层缓存均未命中的情况下，才会向中间节点请求数据。<strong>这个方案能将边缘节点的命中率大大提升！</strong></p><p><code>NWS 节点架构</code>：腾讯云 CDN 边缘节点均采用 NWS 服务器为客户提供最优的服务性能，作为腾讯自研的高性能 HTTP 服务器，比常用的 nginx 等服务器，在功能和性能上均有明显提升。</p><p><code>TGW 负载均衡</code>：全称 Tencent Gateway，是一套实现多网统一接入，支持自动负载均衡的系统，避免了运营商之间的绕行，快速找到源站。</p><p><code>大禹安全拦截系统</code>：腾讯云大禹 DDoS 防御为每一位用户的电脑贴心考虑</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101211433134.png" alt="image-20230101211433134" style="zoom: 50%;"><h3 id="CDN-监控系统"><a href="#CDN-监控系统" class="headerlink" title="CDN 监控系统"></a>CDN 监控系统</h3><ul><li>监控系统是一种多维度、全方位的立体化监控方式，旨在从各个层面对 CDN 节点的服务器状况做出监控和评估，进而调整全网的流量分布状况，保证用户业务服务处于最优状态。 </li></ul><blockquote><ul><li>动态路由协议 OSPF 5 秒禁用故障节点；</li><li>组播心跳机制监控集群，剔除无心跳节点；</li><li>区域内节点相互检测，实时剔除异常节点：可达性、延时、下载速率、丢包率。</li></ul></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101211518571.png" alt="image-20230101211518571" style="zoom: 50%;"><h3 id="CDN-管理系统"><a href="#CDN-管理系统" class="headerlink" title="CDN 管理系统"></a>CDN 管理系统</h3><ul><li>腾讯云的管理系统主要以业务划分，分成四大系统：资源管理系统、安全管理系统、配置管理系统以及客户管理系统组成。从单机情况的管理到每个域名和平台的配置管理，到以客户为维度的综合管理，均配置完善的管理体系。</li></ul><blockquote><ul><li>配置管理系统</li><li>域名管理系统：CDN 系统通常需要 20 分钟~30 分钟做到配置下发。而腾讯云 CDN 依托分布式的域名配置管理服务器，以 CDN 的思维逐级快速传递配置，能做到 <strong>5 分钟内域名配置下发</strong>，全网部署生效。<strong>极高效的部署效率</strong>能保证域名的配置能在第一时间生效成功</li></ul></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101211557450.png" alt="image-20230101211557450" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101211919969.png" alt="image-20230101211919969" style="zoom: 50%;"><h3 id="GSLB-智能调度"><a href="#GSLB-智能调度" class="headerlink" title="GSLB 智能调度"></a>GSLB 智能调度</h3><ul><li>腾讯自研 GSLB 调度系统，探测获取全网链路质量，实时调整调度策略。<ul><li><strong>最优接入：</strong>用户请求会动态调度至最近最优的 CDN 节点。</li><li><strong>最优回源：</strong>根据全网实时状态监控以及智能路由，选择最优回源链路。</li><li><strong>动态加速：</strong>为动态请求提供最优链路，有效避开质量较差、较拥堵链路。</li></ul></li></ul><h3 id="CDN-缓存刷新"><a href="#CDN-缓存刷新" class="headerlink" title="CDN 缓存刷新"></a>CDN 缓存刷新</h3><ul><li><p><strong>缓存过期：</strong>默认 30 天。自有源域名接入时常规动态文件过期时间为 0。（马上过期，直接回源）</p><p><code>常规动态文件: php、jsp等,变化比较快,建议直接回源,但也可以修改过期时间</code></p></li><li><p><strong>缓存刷新：</strong></p><ul><li><strong>URL 刷新：</strong>以文件为单位进行缓存刷新。</li><li><strong>目录刷新：</strong>是以目录为单位，将目录下的所有文件进行缓存刷新。</li></ul></li><li><p><strong>URL 预热：</strong>以文件为单位提前将热点资源缓存到边缘节点。</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101212648487.png" alt="image-20230101212648487" style="zoom:67%;"><h3 id="CDN-接入步骤"><a href="#CDN-接入步骤" class="headerlink" title="CDN 接入步骤"></a>CDN 接入步骤</h3><ul><li>在 CDN 控制台仅需以下四步，便可轻松接入 CDN，使用 CDN 加速服务。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101212724575.png" alt="image-20230101212724575" style="zoom:50%;"><blockquote><p>自有源：客户的数据中心，已经拥有稳定运行的业务服务器（即源站），填充对应的 IP 地址列表、或一个域名作为源站地址。</p><p>COS 源：腾讯云对象存储，除腾讯云外，还支持 Amazon S3 和 阿里云 OSS、华为云 OBS</p></blockquote><h2 id="腾讯云-CDN-安全机制"><a href="#腾讯云-CDN-安全机制" class="headerlink" title="腾讯云 CDN 安全机制"></a>腾讯云 CDN 安全机制</h2><h3 id="CDN-安全机制"><a href="#CDN-安全机制" class="headerlink" title="CDN 安全机制"></a>CDN 安全机制</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101212851811.png" alt="image-20230101212851811" style="zoom:50%;"><h3 id="移动解析-HttpDNS"><a href="#移动解析-HttpDNS" class="headerlink" title="移动解析 HttpDNS"></a>移动解析 HttpDNS</h3><ul><li><strong>移动解析（HttpDNS）</strong><ul><li>基于 Http 协议向腾讯云的 DNS 服务器发送域名解析请求，替代了基于 DNS 协议向运营商 Local DNS 发起解析请求的传统方式，可以避免 Local DNS（运营商）造成的<strong>域名劫持</strong>和<strong>跨网访问</strong>问题。</li><li>定向由 public DNS 解析，跳过 Local DNS 防劫持</li></ul><blockquote><p><code>域名劫持:</code> </p><ul><li>传统域名解析使用 DNS 协议向运营商 Local DNS 发起解析请求；</li><li>可能造成运营商的域名劫持（解析到错误的 IP【比如运营商为了做广告，解析至第三方的 IP】）或跨网访问问题。</li></ul></blockquote></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101213000358.png" alt="image-20230101213000358" style="zoom:50%;"><h3 id="SSL-安全证书"><a href="#SSL-安全证书" class="headerlink" title="SSL 安全证书"></a>SSL 安全证书</h3><ul><li><p><strong>HTTP 的挑战：</strong></p><ul><li>HTTP 协议被用于在 Web 浏览器和网站服务器之间传递信息</li><li>HTTP 协议传输的数据都是未加密的，也就是明文的 </li></ul></li><li><p><strong>HTTPS = HTTP + SSL</strong></p><ul><li>通过加密传输保障数据安全；</li><li>通过身份认证保障网站真实性。</li></ul></li><li><p>腾讯云 SSL 证书（SSL Certificates）提供一站式证书服务，为网站、移动应用等提供 HTTPS 解决方案。</p><ul><li><strong>顶级 CA 机构</strong>：与国际顶级的 CA 机构、代理商合作，安全有保障；</li><li><strong>100% 兼容性</strong>：Symantec 根证书签发，支持所有浏览器和移动设备；</li><li><strong>提升搜索排名：</strong>采用 HTTPS 有利于提升网站的搜索排名及站点可信度；<code>因为http(超文本传输协议)毕竟是明文的,信息暴露在公网上不安全,可信度不高</code></li><li><strong>数据加密传输：</strong>数据加密传输，防止被篡改，流量劫持、广告植入等。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101213242049.png" alt="image-20230101213242049" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101213418625.png" alt="image-20230101213418625" style="zoom:50%;"><p><code>DV: Domain Validation</code></p><p><code>OV: Organization Validation</code></p><p><code>EV: Extended Validation</code></p></li></ul><h3 id="CDN-访问控制"><a href="#CDN-访问控制" class="headerlink" title="CDN 访问控制"></a>CDN 访问控制</h3><ul><li><p>过滤参数配置：</p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101213450560.png" alt="image-20230101213450560" style="zoom: 50%;"></li></ul><blockquote><p>url 上 ? 参数后增加版本号，可以控制某一类用户访问之前的版本，某一类用户访问之后的版本，实现无缝切换</p></blockquote><ul><li>防盗链配置</li></ul><blockquote><ul><li>COS 提供防盗链配置，用于防止恶意程序使用资源 URL 盗刷您的公网流量。（比如某第三方的网站服务将 url 转发到您 CDN 上的资源）</li><li><strong>黑名单</strong>：<strong>拒绝名单内的域名</strong>访问存储桶的默认访问地址，若名单内的域名访问存储桶的默认访问地址，则返回 403。</li><li><strong>白名单</strong>：<strong>允许名单内的域名</strong>访问存储桶的默认访问地址，若名单外的域名访问存储桶的默认访问地址，则返回 403。</li></ul></blockquote><ul><li>IP 黑白名单</li></ul><blockquote><p>开启后，IP黑/白名单将按照规则优先级生效，<font color="red">最下方的规则优先级最高</font>。</p><ul><li><strong>IP 黑名单</strong><br>用户端 IP 匹配黑名单中的 IP 或 IP 段时 ，访问 CDN 节点时将直接返回 514 状态码。</li><li><strong>IP 白名单</strong><br>用户端 IP 未匹配白名单中的 IP 或 IP 段时 ，访问 CDN 节点时将直接返回 514 状态码。</li></ul></blockquote><ul><li>IP 访问限频</li></ul><blockquote><p>通过对单 IP 单节点在每一秒钟的访问次数进行限制，可进行高频  DDoS 或 CC 攻击抵御、防恶意用户盗刷等。</p></blockquote><ul><li>视频拖拽配置</li></ul><blockquote><p>视频拖拽主要产生于视频点播场景中，由于点播类视频文件均缓存在各 CDN 节点上，开启此项配置，各节点可直接响应此类请求。</p></blockquote><h3 id="CDN-攻击防护"><a href="#CDN-攻击防护" class="headerlink" title="CDN 攻击防护"></a>CDN 攻击防护</h3><ul><li>安全防护：已使用腾讯云加速服务的域名，可一键开启 SCDN 安全加速，提供面向 <strong>DDoS 攻击</strong>、<strong>CC 攻击的防护</strong>以及 <strong>WAF</strong> （网站入侵防护），为您的业务保驾护航</li></ul><blockquote><p><strong>WAF（Web Application Firewall）：</strong>Web 应用防火墙，也称为“网站应用级入侵检测系统”。</p></blockquote><ul><li>DDoS 清洗</li></ul><blockquote><p><strong>DDoS（Distributed Denial of Service）：</strong>分布式拒绝服务攻击，利用网络协议和操作系统的一些缺陷，采用欺骗和伪装的策略进行网络攻击，使网站服务器充斥大量要求恢复的信息，消耗带宽或系统资源，导致瘫痪。</p><p><code>DDoS 清洗: 通过流量清洗技术,将正常流量和非正常流量区分开来,正常的流量则回注客户网站</code></p></blockquote><ul><li>CC 识别</li></ul><blockquote><p><strong>CC 攻击（Challenge Collapsar<code>/kə&#39;læpsɑr/</code>）：</strong>“挑战黑洞”，cc 攻击是 DDoS 攻击的一种类型，使用代理服务器向受害服务器发送大量貌似合法的请求。</p></blockquote><ul><li>精准访问控制</li><li>WAF 防护</li><li>攻击监控</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101220216081.png" alt="image-20230101220216081" style="zoom: 50%;"><h2 id="腾讯云-CDN-加速产品"><a href="#腾讯云-CDN-加速产品" class="headerlink" title="腾讯云 CDN 加速产品"></a>腾讯云 CDN 加速产品</h2><h3 id="CDN-加速产品"><a href="#CDN-加速产品" class="headerlink" title="CDN 加速产品"></a>CDN 加速产品</h3><ul><li><strong>网站加速：</strong>针对门户网站、电商、UGC 社区等场景，提供了强大的静态内容（如网页样式、图片、小文件）加速分发处理能力。</li></ul><p><code>UGC(User Generated Content): 用户生成内容,即Web2.0——内容去中心化,例子有Facebook、Twitter、Instagram、小红书等</code></p><ul><li><strong>客户案例：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101220431919.png" alt="image-20230101220431919" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101220439853.png" alt="image-20230101220439853" style="zoom:50%;"><ul><li><strong>下载加速：</strong>APP 安装包、游戏升级包、手机固件升级等大文件下载分发场景。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230101220513488.png" alt="image-20230101220513488" style="zoom: 50%;"><h3 id="海外加速-GCD"><a href="#海外加速-GCD" class="headerlink" title="海外加速 GCD"></a>海外加速 GCD</h3><ul><li>海外加速（Global Content Delivery，GCD）解决跨国访问问题，有效降低访问延迟，支持业务平滑出海。</li><li>覆盖 50 余国家的 200+ 海外节点，总 20T+ 带宽资源储备。</li></ul><blockquote><p>GCD：提前将游戏的资源缓存到国外的节点，用户便可就近接入附近的节点 </p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102002627383.png" alt="image-20230102002627383" style="zoom: 50%;"><p><code>除了南极洲，基本覆盖了腾讯云的 GCD</code></p><h3 id="全站加速网络-ECDN"><a href="#全站加速网络-ECDN" class="headerlink" title="全站加速网络 ECDN"></a>全站加速网络 ECDN</h3><ul><li>全站加速网络（Enterprise Content Delivery Network，ECDN）提供全新高性能的一站式加速服务体验，实现了动静态混合型资源快速稳定的高效传输。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102002650719.png" alt="image-20230102002650719" style="zoom: 50%;"><blockquote><p>TCP/UDP 传输层（四层）网络协议；</p><p>http 和 https 位于第七层（应用层）；</p><p>WebSocket：IP + 端口</p></blockquote><h3 id="全球应用加速-GAAP"><a href="#全球应用加速-GAAP" class="headerlink" title="全球应用加速 GAAP"></a>全球应用加速 GAAP</h3><ul><li><p>全球应用加速 GAAP（Global Application Acceleration Platform）依赖全球节点之间的高速通道、转发集群及智能路由技术，实现全球用户就近接入、直达源站访问。全球用户访问卡顿或者延迟过高问题。</p></li><li><p><strong>接入方式：</strong>域名接入、IP 接入</p></li><li><p><strong>应用场景：</strong></p><ul><li>跨区域访问加速</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102002741598.png" alt="image-20230102002741598" style="zoom:70%;"><ul><li>全球游戏同服</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/gaap.png" alt="image-20230203153415066" style="zoom:120%;"><h3 id="智能-CDN：X-P2P"><a href="#智能-CDN：X-P2P" class="headerlink" title="智能 CDN：X-P2P"></a>智能 CDN：X-P2P</h3><ul><li>X-P2P 架构：更流畅的播放体验</li></ul><p><code>P2P即Peer to Peer，也就是对等网络。和传统的CS（Client/Server）、BS(Browser/Server)网络架构相比，P2P网络中的每个节点的地位都是对等的。每个节点既充当服务器，为其他节点提供服务，同时也享用其他节点提供的服务。</code></p><blockquote><p>与传统 CDN 相比，同一区域的用户不用同时拿相同完整的数据，而是将数据均分给不同的用户，用户将拿到的数据再进行共享，减轻了 CDN 服务器的负载和带宽，从而带来更好的体验。</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102002833981.png" alt="image-20230102002833981" style="zoom: 50%;"><ul><li>适用场景：互动直播、电视内容直播、赛事直播、在线视频、短视频等业务场景（<code>热点集中、用户量较大的流媒体点播、直播等业务</code>）</li><li>功能介绍：<ul><li>全平台支持</li><li>全协议格式支持</li><li>全业务场景覆盖</li><li>场景自定义配置</li><li>延迟与卡顿优化</li></ul></li><li>客服案例：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102002940278.png" alt="image-20230102002940278" style="zoom: 50%;"><ul><li>产品优势：对比传统视频分发方案</li></ul><table><thead><tr><th><strong>腾讯云 X-P2P</strong></th><th><strong>传统视频分发方案</strong></th></tr></thead><tbody><tr><td>极低的带宽成本</td><td>带宽成本较高</td></tr><tr><td>极致的用户体验</td><td>流畅度易受网络影响</td></tr><tr><td>强大的承载能力</td><td>服务质量受节点资源限制</td></tr><tr><td>稳定的服务质量</td><td>容易出现单点故障</td></tr><tr><td>极低的接入门槛</td><td>未在播放端做优化</td></tr></tbody></table><h2 id="腾讯云-CDN-计费方案"><a href="#腾讯云-CDN-计费方案" class="headerlink" title="腾讯云 CDN 计费方案"></a>腾讯云 CDN 计费方案</h2><h3 id="带宽计费方案"><a href="#带宽计费方案" class="headerlink" title="带宽计费方案"></a>带宽计费方案</h3><ul><li>基于客户类型与 CDN 带宽使用计费：</li></ul><table><thead><tr><th><strong>客户类型</strong></th><th><strong>计费方案</strong></th><th><strong>计费说明</strong></th></tr></thead><tbody><tr><td>普通用户</td><td>阶梯计费(达到阶梯某一阶段进行计费)</td><td>后付费日结</td></tr><tr><td>大客户</td><td>日峰带宽取月均</td><td>后付费月结</td></tr><tr><td>大客户</td><td>月95带宽</td><td>后付费月结</td></tr></tbody></table><h4 id="带宽阶梯计费"><a href="#带宽阶梯计费" class="headerlink" title="带宽阶梯计费"></a>带宽阶梯计费</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102005309622.png" alt="image-20230102005309622" style="zoom: 50%;"><h4 id="日峰带宽取月均"><a href="#日峰带宽取月均" class="headerlink" title="日峰带宽取月均"></a>日峰带宽取月均</h4><ul><li><strong>当月 CDN 费用</strong> = 月均日峰带宽 x 单价 x 有效天数/当月天数</li><li><strong>月均日峰带宽：</strong>每日取 288 带宽峰值（每5分钟一个），当月有效天的每日峰值取平均。</li><li><strong>有效天：</strong>产生消耗大于 0 即为有效天。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102005613134.png" alt="image-20230102005613134" style="zoom: 50%;"><h4 id="月95带宽"><a href="#月95带宽" class="headerlink" title="月95带宽"></a>月95带宽</h4><ul><li><strong>当月 CDN 费用</strong> = 月带宽 Max95 x 单价 x 有效天/当月天数</li><li><strong>月 95 带宽：</strong>每日取 288 带宽峰值（每5分钟一个） 当月有效天的所有峰值进行排序，去掉前 5% ，剩下最大峰值即为 Max95。</li><li><strong>有效天：</strong>产生消耗大于 0 即为有效天。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102005741641.png" alt="image-20230102005741641" style="zoom: 50%;"><h3 id="流量计费方案"><a href="#流量计费方案" class="headerlink" title="流量计费方案"></a>流量计费方案</h3><ul><li>采用月度流量<font color="blue">阶梯累进</font>计费：</li></ul><table><thead><tr><th><strong>月流量阶梯</strong></th><th><strong>单价（元/GB），仅供参考，以官网为准</strong></th></tr></thead><tbody><tr><td>0GB  -2TB</td><td>0.21</td></tr><tr><td>2TB  -10TB</td><td>0.20</td></tr><tr><td>10TB  - 50TB</td><td>0.18</td></tr><tr><td>50TB  - 100TB</td><td>0.15</td></tr><tr><td>≥  100TB</td><td>低于  0.11，以合同价为准</td></tr><tr><td>流量包</td><td>优先抵扣</td></tr></tbody></table><ul><li>购买<strong>流量包</strong>抵扣：优先抵扣流量包，超出部分再按照阶梯价格计费。</li><li>大客户可选择月流量计费，按合同价格对月累计流量计费</li><li><strong>若 1 月 1 日产生流量为 3TB，CDN 费用是多少？</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102010028207.png" alt="image-20230102010028207" style="zoom: 50%;"><ul><li><font color="red">CDN费用= 2 * 1000 * 0.21 +（3-2）1000 * 0.20</font>            <code>天数 x 元/GB x 单价</code></li></ul><ul><li><strong>若 1 月 2 日再产生了 3TB 的流量，CDN 费用是多少 ？</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102010225870.png" alt="image-20230102010225870" style="zoom: 50%;"><ul><li><font color="red">CDN费用= 2 * 1000 * 0.21 +（3-2+3）* 1000 * 0.20</font></li></ul><blockquote><p>如果下个月（例如2月1日）再产生流量，则从 0 重新开始阶梯累计计费</p></blockquote><h3 id="计费方案选择"><a href="#计费方案选择" class="headerlink" title="计费方案选择"></a>计费方案选择</h3><ul><li><p><strong>带宽利用率 =</strong> 实际使用流量（深色部分① ） / 峰值带宽折算流量（整个阴影② ）</p><ul><li>若带宽利用率超过 50%，表明业务的曲线较为平稳，建议采用<strong>带宽计费</strong>方式。</li><li>若带宽利用率小于 50%，表明业务的曲线波动较大，建议采用<strong>流量计费</strong>方式。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102010601455.png" alt="image-20230102010601455" style="zoom: 50%;"></li></ul><ul><li>用户某日 00:00 - 24:00 实际消耗流量为 200GB，带宽峰值为 40Mbps。该用户采用哪种计费方案更划算？</li><li><strong>费用计算：</strong><ul><li>带宽峰值折算流量：40（Mbps） * 3600 * 24（秒/天） % 1000（Gbps） % 8（GB），折算为 432GB</li><li>带宽利用率为：200GB / 432GB * 100% = 46% &lt; 50%；</li><li>所以选择流量计费比较合适。</li></ul></li></ul><h2 id="课程总结-3"><a href="#课程总结-3" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li><strong>本课程详细介绍了</strong><ul><li>CDN 加速基础知识：CDN 访问原理、腾讯云 CDN 简介</li><li>腾讯云 CDN 系统架构：内容、监控、管理、智能调度、缓存刷新、接入步骤</li><li>腾讯云 CDN 安全机制：HTTPS、访问控制、防域名劫持、攻击防护</li><li>腾讯云 CDN 加速产品：内容分发网络、海外加速、全站加速网络、全球应用加速、X-P2P</li><li>腾讯云 CDN 计费方案：带宽计费、流量计费、按带宽利用率选择。</li></ul></li></ul><h1 id="腾讯云存储产品介绍"><a href="#腾讯云存储产品介绍" class="headerlink" title="腾讯云存储产品介绍"></a>腾讯云存储产品介绍</h1><h2 id="云存储基础知识"><a href="#云存储基础知识" class="headerlink" title="云存储基础知识"></a>云存储基础知识</h2><h3 id="存储发展历程"><a href="#存储发展历程" class="headerlink" title="存储发展历程"></a>存储发展历程</h3><ul><li>合久必分、分久必合</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102104955038.png" alt="image-20230102104955038" style="zoom:67%;"><p>​                                                  <strong>本地存储/DAS</strong>                                                                        <strong>存储区域网络 SAN</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102105356678.png" alt="image-20230102105356678" style="zoom:60%;"><p>​                                                                             <strong>分布式存储 ServerSAN</strong>                                                             <strong>软件定义存储 SDS</strong></p><blockquote><p><code>DAS(Direct-Attached-Storage)：</code>直联式存储，存储磁盘与服务器之间通常采用 SCSI 电缆连接的；磁盘只能为本地的服务器使用，导致其共享性、扩展性不够强。 </p><p><code>SAN(Storage-Area-Network) 和 NAS(Network-Attached-Storage)的不同：</code>SAN 在块级别存储数据，而 NAS 以文件的形式访问数据，可以将 SAN 看成网络上磁盘，NAS 可以看成是网络上的文件系统；san 通过采用光纤技术，成本高，不过访问速度快，nas 通过网络提供存储，不需要光纤交换机，普通局域网交换机即可，但速度不够快；一般公司采用 nas + san 混合方案。</p></blockquote><h3 id="存储类型与特点"><a href="#存储类型与特点" class="headerlink" title="存储类型与特点"></a>存储类型与特点</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102105502823.png" alt="image-20230102105502823" style="zoom:67%;"><p><strong>优点：</strong></p><ol><li>成本低</li><li>并行写入，SAN 组网，提升传输速度与读写效率。</li></ol><p><strong>缺点：</strong></p><ol><li>成本投入。</li><li>数据共享。</li><li>跨系统共享。</li></ol><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102111607282.png" alt="image-20230102111607282" style="zoom:67%;"><p><strong>优点：</strong></p><ol><li>成本低。</li><li>方便文件共享。</li></ol><p><strong>缺点：</strong></p><ol><li>读写速率低</li><li>网络传输速度慢。</li></ol><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102111825955.png" alt="image-20230102111825955" style="zoom: 67%;"><p>总体上来讲，对象存储同兼具 SAN 高速直接访问磁盘特点及 NAS 的分布式共享特点。</p><h3 id="存储介质分类"><a href="#存储介质分类" class="headerlink" title="存储介质分类"></a>存储介质分类</h3><table><thead><tr><th><strong>磁盘</strong></th><th><strong>HDD</strong> <strong>机械盘</strong></th><th><strong>SSD</strong> <strong>固态盘</strong></th></tr></thead><tbody><tr><td>读写原理</td><td>盘片旋转、磁头读写数据</td><td>主控器通过块地址LBA并发读写</td></tr><tr><td>读写速度</td><td>160MB/s</td><td>500+MB/s</td></tr><tr><td>每秒读写次数</td><td>&lt;10000</td><td>&gt;10000</td></tr><tr><td>写入次数</td><td>无限制</td><td>SLC主控10万次  MLC主控1万次</td></tr><tr><td>功耗噪声</td><td>高功率电机驱动，功耗高，噪音大、会发热</td><td>功耗低，噪音小、待机功能、无发热</td></tr><tr><td>抗震</td><td>高速运转磁头抗震很差</td><td>芯片存储超强抗震</td></tr><tr><td>数据恢复</td><td>删除后可借助软件恢复</td><td>删除后无法恢复</td></tr><tr><td>价格</td><td>较低</td><td>较高</td></tr></tbody></table><p>​                                                                                       <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102112429723.png" alt="image-20230102112429723" style="zoom: 45%;">                            <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102112441859.png" alt="image-20230102112441859" style="zoom:55%;"></p><p><code>固态硬盘有Trim指令,当我们删除数据时,它直接让SSD把数据清理掉,而不是像机械硬盘那样先存着有缓存。</code></p><h3 id="存储分级"><a href="#存储分级" class="headerlink" title="存储分级"></a>存储分级</h3><ul><li><strong>存储分级：</strong>基于数据访问频率、性能要求与成本考虑将数据存放在不同的存储设备上，不同分级存储可以自动迁移。<ul><li>存储访问的局部性；</li><li>存储方案的性价比。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102112643433.png" alt="image-20230102112643433" style="zoom:70%;"><table><thead><tr><th><strong>存储分级</strong></th><th><strong>标准存储</strong></th><th><strong>低频存储</strong></th><th><strong>归档存储</strong></th></tr></thead><tbody><tr><td>数据持久性（磁盘损坏的几率）</td><td>99.999999999%</td><td>99.999999999%</td><td>99.999999999%</td></tr><tr><td>服务可用性</td><td>99.9%</td><td>99.9%</td><td>99.9%</td></tr><tr><td>响应</td><td>毫秒级</td><td>毫秒级</td><td>需提前申请恢复（数据已离线）</td></tr><tr><td>最短计费时间</td><td>-</td><td>30  天</td><td>90  天</td></tr><tr><td>支持地域</td><td>全部地域</td><td>全部地域</td><td>仅支持中国大陆地域</td></tr><tr><td>存储费用</td><td>标准</td><td>较低</td><td>极低</td></tr><tr><td>数据取回费用</td><td>-</td><td>较低</td><td>较高</td></tr><tr><td>读写请求费用</td><td>极低</td><td>较低</td><td>极低（需恢复才可请求）</td></tr></tbody></table><table><thead><tr><th><strong>存储类型</strong></th><th><strong>特点说明</strong></th><th><strong>应用场景</strong></th></tr></thead><tbody><tr><td><strong>标准存储</strong></td><td>用于高频高速访问的热点数据；高可用性、高性能、高吞吐量。</td><td>热点视频、社交图片、移动应用、游戏程序、动态网站</td></tr><tr><td><strong>低频存储</strong></td><td>用于低频少量访问的数据；高可靠性、高性价比。</td><td>网盘数据、大数据分析、政企业务数     据、低频档案、监控数据</td></tr><tr><td><strong>归档存储</strong></td><td>极少访问的大量的冷数据；低成本的海量存储。</td><td>档案数据、医疗影像、科学资料、影视素材</td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102112756124.png" alt="image-20230102112756124" style="zoom: 50%;"><h3 id="腾讯云存储概述"><a href="#腾讯云存储概述" class="headerlink" title="腾讯云存储概述"></a>腾讯云存储概述</h3><p><strong>云存储产品</strong>                                                <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102112857983.png" alt="image-20230102112857983" style="zoom: 50%;"></p><p><strong>云存储服务</strong>                                                                    <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102112944858.png" alt="image-20230102112944858" style="zoom: 50%;"></p><h2 id="腾讯云存储产品"><a href="#腾讯云存储产品" class="headerlink" title="腾讯云存储产品"></a>腾讯云存储产品</h2><h3 id="云硬盘-CBS"><a href="#云硬盘-CBS" class="headerlink" title="云硬盘 CBS"></a>云硬盘 CBS</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102113233441.png" alt="image-20230102113233441" style="zoom:50%;"><p>云硬盘 CBS 是腾讯云提供的用于 CVM 实例的持久性数据块级存储。云硬盘中的数据自动地在可用区内以多副本冗余方式存储，避免数据的单点故障风险。</p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102113517915.png" alt="image-20230102113517915" style="zoom: 50%;"><h4 id="云硬盘类型"><a href="#云硬盘类型" class="headerlink" title="云硬盘类型"></a>云硬盘类型</h4><table><thead><tr><th><strong>云硬盘类型</strong></th><th><strong>普通云硬盘</strong></th><th><strong>高性能云硬盘</strong></th><th><strong>SSD</strong> <strong>云硬盘</strong></th></tr></thead><tbody><tr><td>描述</td><td>适用于常规工作负载的低成本  HDD  卷类型</td><td>适用于均衡核心工作负载的价格和性能的混合介质卷类型</td><td>适用于对延迟敏感的核心交易型工作负载的  SSD  卷</td></tr><tr><td>典型场景</td><td>大数据、数据仓库、日志处理</td><td>业务逻辑处理、低延迟应用程序</td><td>关系型数据库和  NoSQL  数据库</td></tr><tr><td>数据持久性</td><td>0.999999999</td><td>0.999999999</td><td>0.999999999</td></tr><tr><td>磁盘大小</td><td>10GB-16TB</td><td>50GB-4TB</td><td>100GB-4TB</td></tr><tr><td>单盘最大 IOPS</td><td>1000</td><td>4500</td><td>24000</td></tr><tr><td>单盘最大吞吐</td><td>100MB/s</td><td>130MB/s</td><td>260MB/s</td></tr><tr><td>访问时延</td><td>小于  10ms</td><td>小于  3ms</td><td>小于  3ms</td></tr></tbody></table><h4 id="云硬盘快照"><a href="#云硬盘快照" class="headerlink" title="云硬盘快照"></a>云硬盘快照</h4><ul><li>快照是云硬盘在指定时间点的数据备份，只能云硬盘的同地域使用快照，快照属于增量备份，仅保存前一次快照后更改过的数据。</li></ul><p><code>腾讯云快照采用增量快照机制，当您对同一个云硬盘连续创建多个快照时，除了首个快照是全量快照以外，后续快照都只包含相对于前一个快照的数据变化部分（增量快照），这样可以最大限度的减少连续制作快照时的占据存储空间总容量，减少用户开销。</code></p><p><img src="https://main.qcloudimg.com/raw/e75b405c65eef41634e91231c71d96f4.png" alt="img"></p><ul><li><strong>应用场景</strong><ul><li>数据日常备份</li><li>数据快速恢复（通过快照创建云硬盘，恢复数据）</li><li>数据多副本应用</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102114254492.png" alt="image-20230102114254492" style="zoom: 50%;"><h4 id="CBS-产品优势"><a href="#CBS-产品优势" class="headerlink" title="CBS 产品优势"></a>CBS 产品优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102114337665.png" alt="image-20230102114337665" style="zoom: 50%;"><h4 id="CBS-应用场景"><a href="#CBS-应用场景" class="headerlink" title="CBS 应用场景"></a>CBS 应用场景</h4><ul><li>关系型数据库/NoSQL数据库</li><li>企业办公应用</li><li>海量数据分析</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102114444708.png" alt="image-20230102114444708" style="zoom: 50%;"><h4 id="大数据离线分析"><a href="#大数据离线分析" class="headerlink" title="大数据离线分析"></a>大数据离线分析</h4><ul><li>应用场景如：<ul><li>Hadoop大规模离线数据分析</li><li>基于Hadoop+Hive+Hbase集群架构平台的数据挖掘</li><li>业务日志文件的清洗、分析、信息提取等</li></ul></li></ul><blockquote><p>简单介绍一下，Hadoop 本质上是分布式文件系统（HDFS）+ Mapreduce 组成。</p><p>而 hive 通常来说是一个数据仓库，hbase 的作用类似于数据库。</p></blockquote><ul><li>业务特点<ul><li>数据规模大</li><li>多磁盘并发</li><li>硬盘性能要求较高</li></ul></li></ul><p>大数据离线分析</p><ul><li>典型案例：<ul><li>小红书-TB级离线数据分析集群</li><li>架构：Kafka-Spark-HDFS 离线数据分析框架</li></ul></li><li>采用产品：腾讯云高性能云硬盘</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102115045229.png" alt="image-20230102115045229" style="zoom: 50%;"><blockquote><p>Kafka 和传统的消息队列 RabbitMQ 区别在于它是分布式消息系统，可以实时处理大量的数据</p><p>Spark 是基于内存进行数据处理的</p></blockquote><ul><li>第一步，kafka 写 message<ul><li>消息写到 page cache，由异步线程并发刷盘，可充分发挥云盘高并发的能力；</li><li>读 message 时，云盘实现智能预读，顺序读可直接命中，提供低延时，高吞吐。</li></ul></li><li>第二步，Spark 对文件系统的读写<ul><li>RDD read/write，shuffle write都是顺序 IO</li><li>shuffle read IO 是随机 IO</li><li>高效云盘提供了媲美 SSD 盘的顺序及随机 IO  能力</li></ul></li></ul><blockquote><p>RDD（Resilient Distributed Dataset）弹性分布式数据集；</p><p>Spark 将多个 RDD 之间的中间数据写入内存，MR 将中间数据写入硬盘，内存比硬盘速度快（数据存在硬盘中难免会进行额外的写入和写出操作）</p></blockquote><ul><li><p>腾讯云高性能云硬盘在TB级离线数据分析中的应用效果</p><ul><li>高性能云硬盘支持配置RAID10方案</li><li>可叠加多块磁盘性能，提升业务的总体吞吐</li><li>可达1GB/s++，满足TB级数据离线处理的场景</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102141935635.png" alt="image-20230102141935635" style="zoom: 50%;"></li></ul><blockquote><p>Raid 10 是一个 Raid 1 与 Raid 0 的组合体，它继承了 Raid 0 的快速和 Raid 1 的安全</p><p>各自优势：</p><p>RAID 0 ：<strong>没有数据冗余</strong>，没有数据校验的磁盘陈列。实现RAID 0至少需要两块以上的硬盘，它将两块以上的硬盘合并成一块，数据连续地分割在每块盘上。 因为带宽加倍，所以<strong>读/写速度加倍</strong>。</p><p>RAID 1：可以提高读取性能。RAID 1是磁盘阵列中单位成本最高的，但提供了很高的<strong>数据安全性和可用性</strong>。当一个磁盘失效时，系统可以自动切换到镜像磁盘上读写，而不需要重组失效的数据。</p></blockquote><h4 id="OLTP-联机事务处理场景"><a href="#OLTP-联机事务处理场景" class="headerlink" title="OLTP 联机事务处理场景"></a>OLTP 联机事务处理场景</h4><p><code>OLTP: On-Line Transaction Processing,也称面向交易的处理过程</code></p><ul><li><p>典型场景</p><ul><li>问道游戏，英雄之刃等国内TOP游戏/开发商</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102142035309.png" alt="image-20230102142035309" style="zoom: 80%;"></li><li><p>业务特点</p><ul><li>每日19-22点，凌晨3-5点，业务访问的高峰区，存储压力大</li><li>磁盘性能不足，会出现 io await、%uitl 高等情况</li><li>导致游戏终端玩家出现卡顿、掉线等问题。</li></ul></li></ul><ul><li>问道游戏基于腾讯云高性能云硬盘的解决方案<ul><li>Mysql 压力测试环境：<ul><li>4 Core 8GB RAM虚拟机</li><li>挂载800G SSD云盘</li><li>部署：Mysql version 5.5.42</li></ul></li></ul></li><li>sysbench模拟 OLTP 性能测试，测试集为1千万条记录</li><li>TPS 可达1616、QPS 达29000</li></ul><p><code>sysbench 压力测试工具</code></p><p><code>tps(Transaction PerSecond): 每秒处理的消息数</code></p><p><code>qps(Quere Per Second): 每秒查询数</code></p><ul><li>腾讯云高性能云硬盘在该场景下的效果<ul><li>单块 SSD 云硬盘，足以支撑10万游戏玩家同时在线的 IO 需求</li><li>CBS-SSD 云硬盘，完美兼顾了数据可靠性与高性能表现</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102142324018.png" alt="image-20230102142324018" style="zoom: 50%;"><h3 id="文件存储-CFS"><a href="#文件存储-CFS" class="headerlink" title="文件存储 CFS"></a>文件存储 CFS</h3><ul><li><p>概念：CFS 可为多个 CVM 实例提供共享的数据源。是一种高可用、高可靠的分布式文件系统，适合于大数据分析、媒体处理和内容管理等场景。</p></li><li><p>主要功能：</p><ul><li>集成管理</li><li>自动扩展</li><li>安全设置</li><li>按需付费</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102142420756.png" alt="image-20230102142420756" style="zoom: 50%;"></li></ul><h4 id="文件存储的对比"><a href="#文件存储的对比" class="headerlink" title="文件存储的对比"></a>文件存储的对比</h4><table><thead><tr><th><strong>类型</strong></th><th><strong>文件存储</strong></th><th><strong>CVM 搭建 NAS</strong></th><th><strong>传统自建 AS</strong></th></tr></thead><tbody><tr><td>数据可靠性</td><td>99.9999999%</td><td>99.9999999%</td><td>85%——99%（RAID）</td></tr><tr><td>服务可用性</td><td>99.9%保障，无单点故障</td><td>单点问题或主备同步问题</td><td>存在单点问题</td></tr><tr><td>读写性能</td><td>弹性扩展，与存储量线性相关</td><td>单点性能问题，无法扩展</td><td>需要单独购买高端 NAS 存储设备，并配置大量硬盘</td></tr><tr><td>扩容能力</td><td>弹性扩展，按需付费</td><td>无法弹性扩容</td><td>受限存储硬件容量，升级硬件周期长</td></tr><tr><td>集成化</td><td>标准 NFSv3/NFSv4 协议，无缝挂载 CVM</td><td>自行部署软件配置，兼容性差</td><td>需要人工管理资源，并需要复杂的操作过程</td></tr><tr><td>成本低廉</td><td>按实际存储量付费无最低消费和运维费用</td><td>需要预先购买硬盘，还需 CVM 服务器成本及运维成本</td><td>整套硬件购买，前期投入大，且需要大量的硬件运维成本</td></tr><tr><td>安全管理</td><td>支持 POSIX 权限，支持 CVM 安全组和 VPC 内挂载</td><td>需自行搭建账户与权限系统</td><td>依赖专用设备能支持的权限管理方式</td></tr></tbody></table><h4 id="文件存储产品优势"><a href="#文件存储产品优势" class="headerlink" title="文件存储产品优势"></a>文件存储产品优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102142505885.png" alt="image-20230102142505885" style="zoom: 50%;"><p><code>POSIX：可移植操作系统接口(Portable Operating System Interface of UNIX，缩写为 POSIX)</code></p><h4 id="CBS-对比-CFS"><a href="#CBS-对比-CFS" class="headerlink" title="CBS 对比 CFS"></a>CBS 对比 CFS</h4><table><thead><tr><th><strong>类别</strong></th><th><strong>文件存储</strong> <strong>CFS</strong></th><th><strong>云硬盘</strong> CBS</th></tr></thead><tbody><tr><td>吞吐量级别</td><td>单客户端100MB/s（上限1.5GB/s）</td><td>上限600MB/s</td></tr><tr><td>共享性</td><td>多客户端共享</td><td>不共享</td></tr><tr><td>可靠性</td><td>3副本</td><td>3副本</td></tr><tr><td>权限控制</td><td>支持  POSIX  权限</td><td>无</td></tr><tr><td>使用方式</td><td>挂载后直接使用</td><td>挂载后安装文件系统</td></tr></tbody></table><h4 id="CFS-应用场景"><a href="#CFS-应用场景" class="headerlink" title="CFS 应用场景"></a>CFS 应用场景</h4><ul><li>文件存储 CFS 应用：<ul><li>企业文件共享</li><li>流媒体处理</li><li>Web 服务及内容管理</li><li>大数据应用</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102142629573.png" alt="image-20230102142629573" style="zoom: 50%;"><ul><li><p>Web 服务内容处理</p><ul><li>CFS 可以作为一种持久性强、吞吐量高的文件系统，用于各种内容管理系统，为网站、在线发行、存档等应用存储和提供信息。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102142713784.png" alt="image-20230102142713784" style="zoom: 50%;"></li></ul><h3 id="对象存储-COS"><a href="#对象存储-COS" class="headerlink" title="对象存储 COS"></a>对象存储 COS</h3><ul><li><p>COS 主要存储非结构化数据，如视频、音频、图片、文件等。</p></li><li><p>应用场景：多点上传的 UG C场景、频繁 IO 的网盘场景、海量数据归档及备份、热点资源分发下载等</p></li></ul><blockquote><p>COS 无需挂载即可使用，而 CBS 和 CFS 都需要挂载才能使用</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102142946819.png" alt="image-20230102142946819" style="zoom: 50%;"><h4 id="COS-访问控制"><a href="#COS-访问控制" class="headerlink" title="COS 访问控制"></a>COS 访问控制</h4><ul><li>可通过对象地址对COS中的对象进行访问与下载：</li></ul><p>https://<font color="red"><u>dmcos01</u></font>-12xxxxxx69.<u><font color="green">cos.ap-guangzhou.myqcloud.com</font>&gt;</u>/<u><font color="purple">%E5%9B%BE%E7%89%8701.jpeg</font></u></p><p>  <font color="red">用户自定义存储桶名</font>        +       <font color="green">系统按地域分配域名</font>                       /             <font color="purple">编码后的对象名</font></p><ul><li>访问控制：<ul><li>共享权限：私有读写、公有读私有写、公有读写</li><li>用户权限：完全控制、数据读取、权限读取、权限写入。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102144159717.png" alt="image-20230102144159717" style="zoom: 67%;"><h4 id="COS-产品优势"><a href="#COS-产品优势" class="headerlink" title="COS 产品优势"></a>COS 产品优势</h4><ul><li><strong>高安全性——全面防护，分权管理</strong><ul><li>防盗链功能，用以屏蔽恶意来源的访问</li><li>DDOS 攻击防护和 CC 攻击防护</li><li>过滤恶意攻击数据包，清洗出正常流量</li><li>多级分权限管理系统</li></ul></li><li><strong>高性能——智能调度，访问可靠</strong><ul><li>智能调度：访问可靠 COS 支持分块和并发发起请求。</li><li>最优的 BGP 链路上传。</li><li>结合 CDN 降低时延，提高下载速度。</li></ul></li><li><strong>高扩展性——方便接入，一键迁移</strong><ul><li>详尽的 RESTful API 接入说明和丰富的 SDK 接入工具（<code>RESTful API就是一套协议来规范多种形式的前端和同一个后台的交互方式。</code>）</li><li>无缝迁移工具</li></ul></li><li><strong>高性价比——按量付费，自动扩容</strong><ul><li>无需采购、部署和运维费用；</li><li>根据使用量收取费用；</li><li>无最低限制，可随时无限扩容。</li></ul></li></ul><h4 id="COS-应用场景"><a href="#COS-应用场景" class="headerlink" title="COS 应用场景"></a>COS 应用场景</h4><ul><li>COS 主要存储非结构化数据，如视频、音频、图片、文件等。</li><li>应用场景：内容分发、UGC 应用数据存储、大数据分析与处理等</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102144921526.png" alt="image-20230102144921526" style="zoom: 50%;"><h4 id="海冷量数据低频存储"><a href="#海冷量数据低频存储" class="headerlink" title="海冷量数据低频存储"></a>海冷量数据低频存储</h4><ul><li><p>为什么需要解决冷数据存储问题？</p><ul><li>大部分的访问集中在少量热数据上</li><li>绝大部分数据在迅速变 ”冷“</li><li>为了少量的访问，需要付出大量的存储成本</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102145247521.png" alt="image-20230102145247521" style="zoom: 50%;"></li><li><p>冷数据归档备份-难点与挑战：</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102145342716.png" alt="image-20230102145342716" style="zoom: 50%;"><ul><li>典型场景：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102145451713.png" alt="image-20230102145451713" style="zoom: 50%;"><ul><li><p>海量冷数据备份案例：</p><ul><li>某安防监控体系数据存储</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102145734397.png" alt="image-20230102145734397" style="zoom: 50%;"><ul><li>安防监控的数据存储要求：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102145959567.png" alt="image-20230102145959567" style="zoom:50%;"></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102150149536.png" alt="image-20230102150149536" style="zoom:50%;"><h3 id="归档存储-CAS"><a href="#归档存储-CAS" class="headerlink" title="归档存储 CAS"></a>归档存储 CAS</h3><ul><li>归档存储（Cloud Archive Storage， CAS）是低成本、高可靠且易管理的云端离线存储服务。</li><li>CAS 通过文件库 Vault（存储容器）来存取档案 Archive（存储对象）。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102150430727.png" alt="image-20230102150430727" style="zoom: 50%;"><h4 id="CAS-数据取回"><a href="#CAS-数据取回" class="headerlink" title="CAS 数据取回"></a>CAS 数据取回</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102150449890.png" alt="image-20230102150449890" style="zoom: 50%;"><table><thead><tr><th><strong>取回模式</strong></th><th><strong>取回时间</strong></th></tr></thead><tbody><tr><td>加急模式</td><td>1到5分钟，紧急访问支持 256 MB以下文件的快速读取，收费较高。</td></tr><tr><td>标准模式</td><td>3-5小时取回数据，收费适中。</td></tr><tr><td>批量模式</td><td>5-12小时批量获取大量数据，收费较低。</td></tr></tbody></table><h4 id="归档存储-CAS-1"><a href="#归档存储-CAS-1" class="headerlink" title="归档存储 CAS"></a>归档存储 CAS</h4><table><thead><tr><th><strong>优势</strong></th><th><strong>归档存储</strong> <strong>CAS</strong></th><th><strong>传统离线存储</strong></th></tr></thead><tbody><tr><td><strong>稳定</strong></td><td>持久可靠  支持跨地域容灾，跨机房容灾，多冗余备份，数据可靠性达99.999999999%</td><td>系统脆弱  磁带机备份，光盘备份，依赖于硬件健壮性</td></tr><tr><td><strong>性能</strong></td><td>快速读写  最快支持1-5分钟获取数据，数据进入读取池之后，读取速度接近在线存储</td><td>读取困难  磁带机与光盘备份读写速度慢，获取备份数据时间长</td></tr><tr><td><strong>功能</strong></td><td>功能丰富  支持档案文件的分片上传，分片下载，回调通知和访问限速</td><td>功能单一  只支持文件上传和读取</td></tr><tr><td><strong>成本</strong></td><td>费用低廉  每G单价远低于在线存储，同时低于其他友商同类产品</td><td>价格昂贵  每G平均成本高达数元，部分高端离线存储机型高达十多元</td></tr><tr><td><strong>计费</strong></td><td>按量付费  无最低使用量限制，按实际使用量后付费结算</td><td>批量购买  前期购买磁带机，光盘刻录设备需数万元投入，使用量不可控，后期需要固定人员维护</td></tr><tr><td><strong>弹性</strong></td><td>自动扩容  单用户无存储容量上限，无需提前准备设备扩容</td><td>扩容复杂  单磁带机，单光盘数据容量固定，扩容设备需提前准备，无法应对突发的业务增长</td></tr><tr><td><strong>安全</strong></td><td>分级鉴权  支持指定条件，指定人员，指定操作，指定资源多维度复合鉴权</td><td>权限体系脆弱  账号+密钥机制脆弱单薄，容易被攻破，数据容易被窃取</td></tr></tbody></table><h4 id="CAS-对比-COS"><a href="#CAS-对比-COS" class="headerlink" title="CAS 对比 COS"></a>CAS 对比 COS</h4><table><thead><tr><th><strong>对比项</strong></th><th><strong>归档存储 CAS</strong></th><th><strong>对象存储 COS</strong></th></tr></thead><tbody><tr><td>存储容器</td><td>文件库 Vault</td><td>存储桶 Bucket</td></tr><tr><td>存储对象</td><td>档案 Archive</td><td>对象 Object</td></tr><tr><td>存储类型</td><td>离线存储</td><td>在线存储</td></tr><tr><td>数据存取</td><td>档案 ID</td><td>对象数据、对象索引</td></tr><tr><td>数据取回</td><td>非实时取回，取回过程相对复杂</td><td>实时取回，取回简单</td></tr><tr><td>产品价格</td><td>相对较低</td><td>相对较高</td></tr></tbody></table><h4 id="CAS-产品优势"><a href="#CAS-产品优势" class="headerlink" title="CAS 产品优势"></a>CAS 产品优势</h4><ul><li><strong>安全性：</strong><ul><li>支持分级鉴权。指定条件访问、指定人员、指定操作、指定资源多维度复合鉴权</li></ul></li><li><strong>扩展性：</strong><ul><li>自动扩容</li><li>单用户无存储容量上限</li><li>无需提前准备设备扩容</li></ul></li><li><strong>成本低</strong><ul><li>每G单价远低于在线存储，低于友商</li><li>按量付费，无最低使用量限制</li></ul></li></ul><h4 id="CAS-应用场景"><a href="#CAS-应用场景" class="headerlink" title="CAS 应用场景"></a>CAS 应用场景</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102150959013.png" alt="image-20230102150959013" style="zoom: 50%;"><h4 id="关键数据异地容灾"><a href="#关键数据异地容灾" class="headerlink" title="关键数据异地容灾"></a>关键数据异地容灾</h4><ul><li>用户可以将主站数据保存在华北、华南、华东等核心存储节点上，同时将主站数据复制一份保留在西南园区的归档存储 CAS 中，CAS 最快支持1-5分钟的数据读取，可以迅速恢复容灾数据。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102151501781.png" alt="image-20230102151501781" style="zoom: 50%;"><h2 id="腾讯云存储服务"><a href="#腾讯云存储服务" class="headerlink" title="腾讯云存储服务"></a>腾讯云存储服务</h2><h3 id="存储网关-CSG"><a href="#存储网关-CSG" class="headerlink" title="存储网关 CSG"></a>存储网关 CSG</h3><ul><li>存储网关（Cloud Storage Gateway）是一种混合云存储方案，即插即用，屏蔽后端存储差异，实现本地存储与公有云存储的无缝衔接。（将本地软件设备与基于云的存储连接在一起）</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102151611090.png" alt="image-20230102151611090" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102151645123.png" alt="image-20230102151645123" style="zoom:50%;"><blockquote><p>2019年xx月xx日之后申请存储网关公测的用户以及2020年xx月xx日存储网关正式商用以后的新用户，<strong>仅能使用 NFS 协议的文件网关，暂不支持其他类型的网关和协议</strong>。</p></blockquote><ul><li>混合云存储架构<ul><li>私有云内部署存储网关，可以用访问 SAN 存储/ NAS 存储/磁带存储的方式访问对象存储 COS 及归档存储。</li><li>在保证数据安全性的同时，降低审计数据、归档留存、备份数据的存储及维护成本。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102151923905.png" alt="image-20230102151923905" style="zoom: 50%;"> <table><thead><tr><th><strong>网关类型功能</strong></th><th><strong>缓存网关</strong></th><th><strong>文件网关</strong></th><th><strong>磁带网关</strong></th></tr></thead><tbody><tr><td><strong>用户访问协议</strong></td><td>iSCSI</td><td>NFS3/NFS4.1</td><td>VTL（虚拟磁带库）</td></tr><tr><td><strong>快照</strong></td><td>支持</td><td>不支持</td><td>不支持</td></tr><tr><td><strong>弹性扩容</strong></td><td>支持</td><td>支持</td><td>支持</td></tr><tr><td><strong>数据加密</strong></td><td>支持</td><td>支持</td><td>支持</td></tr><tr><td><strong>网络配置</strong></td><td>支持</td><td>支持</td><td>支持</td></tr><tr><td><strong>加速访问</strong></td><td>支持</td><td>支持</td><td>支持</td></tr><tr><td><strong>使用场景</strong></td><td>本地存储扩展、数据备份</td><td>企业网盘、大数据分析</td><td>媒体资料、合规文件、备份数据等归档场景</td></tr></tbody></table><p><strong>CSG 产品优势</strong></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102152048128.png" alt="image-20230102152048128" style="zoom:50%;"><ul><li>CSG 应用场景：混合云负载、备份及容灾、数据分发、数据迁移</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102152402618.png" alt="image-20230102152402618" style="zoom: 50%;"><ul><li>关键数据异地容灾：对卷拍摄快照，存储到腾讯云对象存储 COS 中</li><li>可使用这些快照恢复可挂载到云存储网关的卷 </li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102152750158.png" alt="image-20230102152750158" style="zoom: 50%;"><h3 id="云数据迁移-CDM"><a href="#云数据迁移-CDM" class="headerlink" title="云数据迁移 CDM"></a>云数据迁移 CDM</h3><ul><li>云数据迁移（Cloud Data Migration，CDM）是 TB~PB 级别安全可靠的离线迁移上云服务。</li></ul><blockquote><p>为什么是离线?</p><p>答：因为 PB 级别的数据非常大，需要占用很大的带宽，产生昂贵的费用；其次因为数据暴露在公网上，不安全；离线相当于把数据拷贝到移动硬盘上，再通过专门的快递寄到腾讯云的对象存储。</p></blockquote><ul><li>CDM 优势：高效传输、安全保护、状态跟踪。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102153010072.png" alt="image-20230102153010072" style="zoom: 50%;"><h4 id="CDM-产品优势"><a href="#CDM-产品优势" class="headerlink" title="CDM 产品优势"></a>CDM 产品优势</h4><ul><li><strong>安全性</strong><ul><li>设备端加解密、自行管理密钥；（密钥由客户管理）</li><li>与腾讯云 CAM 服务集成，管理任务进度和权限。</li><li>数据迁移完成后，擦除设备磁盘每个扇区，保障数据不会被第三方读取。</li></ul></li></ul><blockquote><p>CAM（Cloud Access Management）：用户帮助客户安全地管理腾讯云账户的访问权限。</p></blockquote><ul><li><strong>高效性</strong><ul><li>高速稳定</li><li>小文件优化</li><li>专业物流</li></ul></li><li><strong>低成本</strong><ul><li>高性价比</li><li>高效去重</li></ul></li></ul><h4 id="CDM-应用场景"><a href="#CDM-应用场景" class="headerlink" title="CDM 应用场景"></a>CDM 应用场景</h4><ul><li>海量数据归档备份</li></ul><blockquote><p>根据数据使用频率的不同，可以将数据划分为热点数据，低频数据以及归档数据。</p></blockquote><ul><li>云端数据分析处理</li></ul><blockquote><p>海量数据通常蕴含着巨大的商业价值，您可以利用腾讯云数据迁移<strong>将本地数据快速安全地迁移至腾讯云对象存储中</strong>，配合使用腾讯云提供的批量计算、离线计算等计算服务，为您的存储数据挖掘潜在的价值。</p></blockquote><ul><li>弱网环境迁移数据</li></ul><blockquote><p>许多行业数据（例如地理数据、环境数据等）所处地域环境网络信号较差，在上传数据的过程中通常面临着成本高、速度慢的障碍。此时，腾讯云数据迁移 CDM 绝对是一个得力助手，可以协助您快速高效地搬迁数据。</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102153251039.png" alt="image-20230102153251039" style="zoom: 70%;"><h3 id="日志服务-CLS"><a href="#日志服务-CLS" class="headerlink" title="日志服务 CLS"></a>日志服务 CLS</h3><ul><li>日志服务（Cloud Log Service，CLS）是一站式日志服务平台：<ul><li>日志采集：通过 LogListener 、API 实时采集；</li><li>日志检索：实时索引、亿级日志检索秒级返回结果；</li><li>日志投递：日志可以投递到 COS，实现日志生命周期管理。</li></ul></li></ul><blockquote><p><code>Loglistener 实时采集</code>：使用腾讯云 LogListener 采集日志，便捷安装，服务稳定可靠安全、支持大部分主流 Linux 操作系统，兼顾高性能与低资源占用。</p><p><code>通过 API</code>：无需安装 LogListener，直接调用 API 上传日志，支持多种语言。</p></blockquote><ul><li>日志类型：<ul><li>系统日志、应用日志、移动端日志、嵌入式设备日志等。</li></ul></li></ul><h4 id="日志服务产品优势"><a href="#日志服务产品优势" class="headerlink" title="日志服务产品优势"></a>日志服务产品优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102153413571.png" alt="image-20230102153413571" style="zoom:50%;"><p>​                                                                                                                        腾讯云日志服务 CLS</p><ul><li>支持多冗余备份</li><li>不低于 99.99999999% 的数据持久性</li><li>不低于 99.9% 的服务可靠性</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102153556056.png" alt="image-20230102153556056" style="zoom:50%;"><ul><li><p>系统可靠性易受网络、主机等影响</p></li><li><p>系统变更升级时易丢失数据</p></li><li><p>日志服务的高性能：检索迅速</p><ul><li>配置快速生效，秒级检索返回</li><li>大容量日志存储：支持从每日 TB 级日志数据采集存储需求</li></ul></li><li><p>日志服务可扩展性：弹性自动扩容</p><ul><li>支持从 MB-TB 级别的日志数据量</li><li>无需提前准备设备扩容</li></ul></li><li><p>日志服务高性价比</p><ul><li>按实际使用量付费，价格低廉</li><li>无需担心资源被闲置浪费</li></ul></li></ul><h4 id="CLS-应用场景"><a href="#CLS-应用场景" class="headerlink" title="CLS 应用场景"></a>CLS 应用场景</h4><ul><li>通过日志采集与分析，解决故障排查定位，业务指标监控、客户行为分析、安全审计等问题。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102153851543.png" alt="image-20230102153851543" style="zoom:50%;"><h2 id="云存储计费方案"><a href="#云存储计费方案" class="headerlink" title="云存储计费方案"></a>云存储计费方案</h2><h3 id="CBS-计费方案"><a href="#CBS-计费方案" class="headerlink" title="CBS 计费方案"></a>CBS 计费方案</h3><table><thead><tr><th>计费模式</th><th>包年包月</th><th>按量计费</th></tr></thead><tbody><tr><td>付款方式</td><td>预付费</td><td>后付费，购买时冻结3小时的费用，每小时计算一次费用并冻结下一小时的费用，每天汇总后进行一次结算。</td></tr><tr><td>计费单位</td><td>元/GB*月</td><td>元/GB*小时</td></tr><tr><td>最少使用时长</td><td>至少使用一个月</td><td>按小时结算，随时购买随时释放</td></tr><tr><td>使用场景</td><td>存储需求长期稳定的成熟业务</td><td>适用于电商抢购等存储需求大幅波动场景</td></tr></tbody></table><p><strong>硬盘快照</strong>按总存储容量进行收费，每个地域单独结算，目前仅支持按量计费后付费方式，以小时为单位整点结算，国内主要区域提供一定量的免费额度。</p><ul><li>CBS 定价基于<strong>硬盘类型、所在地域与计费方式</strong>。此处价格仅供参考，以官网价格为准。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102154037747.png" alt="image-20230102154037747" style="zoom: 50%;"><h3 id="CFS-计费方案"><a href="#CFS-计费方案" class="headerlink" title="CFS 计费方案"></a>CFS 计费方案</h3><ul><li><p><strong>按量付费：</strong>基于文件实际存储容量，按小时计费和计算；</p></li><li><p><strong>存储容量：</strong>按单位小时内实际使用存储空间最大值（峰值）计算；</p></li><li><p><strong>阶梯分段：</strong>基于不同地区按不同的存储容量阶梯到达计费：</p></li><li><p><strong>免费容量：</strong>截止2019年5月31日前，每个CFS 用户可享受10GB免费容量。</p></li><li><p>某企业拥有20台云主机（CVM），分别访问中国香港的2个文件系统。文件系统 A 用于冷数据存储，存储量为3T，且无增长。文件系统 B 用于企业云盘，某小时中存储量峰值为1.5 TB。<strong>请问该小时该用户CFS费用如何计算？</strong></p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102154844029.png" alt="image-20230102154844029" style="zoom: 50%;"><h3 id="COS-计费方案"><a href="#COS-计费方案" class="headerlink" title="COS 计费方案"></a>COS 计费方案</h3><ul><li><p><strong>计费方案：</strong></p><ul><li>预付费资源包（中国大陆）；</li><li>按量后付费（所有区域）；</li></ul></li><li><p><strong>结算方式：</strong></p><ul><li>免费额度 &gt; 资源包 &gt; 按量计费；</li><li>按日结算：流量费用；</li><li>按月结算：存储容量费用、请求费用、数据取回费用。</li></ul></li><li><p><strong>存储容量费：（元/GB/月，月结）</strong></p><ul><li>存储容量费用= 月均存储容量 * 存储容量单价；</li><li>月均存储容量= 当月日均存储容量之和 / 当月天数；</li><li>日均存储容量= 当日每5分钟存储容量之和 / 288（采样点数）。</li></ul></li><li><p><strong>请求费用计费：（元/万次，月结）</strong></p><ul><li>读/写请求：通过 API、SDK等发送COS指令实现数据上传、下载、查询、删除操作；</li><li>请求费用 = 每万次请求单价 * 月累计请求次数/10000（向下取整）。</li><li>月累计请求次数不足1万次，按1万次计算。</li></ul></li><li><p><strong>数据取回费：（元/GB，月结）</strong></p><ul><li>基于用户读取数据的容量进行计费；</li><li>标准存储不收取，低频存储收取；</li><li>数据取回费 = 每 GB 单价 * 月数据取回量。</li></ul></li><li><p><strong>流量费用：（元/GB、日结）</strong></p><ul><li>基于用户通过读取存储的数据时产生外网流量累加值计算；</li><li>收费流量类型：外网下行流量、CDN 回源流量、跨区域复制流量</li><li>流量费用 = 每 GB 单价 * 日累计流量</li></ul></li><li><p>A网站经常发布包含图片、背景音乐、视频的文章，还有软件下载区等。网站内容存储在成都地域的标准存储中，开启了 CDN 加速服务。每月图片预计占用存储容量100GB，产生 CDN 回源流量100GB，读和写请求总计100万次，该用户享受免费额度（即首次创建存储桶后6个自然月内）。</p></li><li><p><strong>每月费用计算如下：</strong></p><table><thead><tr><th>费用组成</th><th>免费额度</th><th>单价（仅供参考，官网为准）</th><th>计费量</th><th>费用汇总  （单价 * 计费量）</th></tr></thead><tbody><tr><td>存储容量费</td><td>50GB</td><td>0.099元/GB/月</td><td>(100  - 50)GB</td><td>4.95元</td></tr><tr><td>请求费用</td><td>0</td><td>0.01  元/万次</td><td>100  万次</td><td>1元</td></tr><tr><td>CDN回源流量费</td><td>0</td><td>0.15元/GB</td><td>100GB</td><td>15元</td></tr><tr><td>数据取回费</td><td>标准存储</td><td>免费</td><td>/</td><td>0</td></tr><tr><td>月费用总计</td><td>/</td><td>/</td><td>/</td><td><strong>20.95 元</strong></td></tr></tbody></table></li></ul><h3 id="CAS-计费方案"><a href="#CAS-计费方案" class="headerlink" title="CAS 计费方案"></a>CAS 计费方案</h3><ul><li>CAS 采用按量后付费、按月结算，次月3日出账单</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102155431863.png" alt="image-20230102155431863" style="zoom:50%;"><ul><li><strong>1. 存储费用：</strong><ul><li>存储容量费用 = 月均存储容量*存储容量单价；</li><li>月均存储容量 = 当月日均存储容量之和 / 当月天数；</li><li>日均存储容量= 当日每5分钟存储容量之和 / 288（采样点数）</li></ul></li><li><strong>2. 流量费用：</strong><ul><li>外网出流量：基于通过外网直接访问归档存储，产生的流量；</li><li>相同地域的内网出入流量、外网入流量免费。</li><li>流量费用 = 外网出流量 * 单价</li></ul></li><li><strong>3. 请求费用</strong><ul><li>按请求次数计费：读请求（GET/HEAD），写请求（PUT/POST/DELETE）</li><li>请求费用 = 请求次数 * 单价</li></ul></li><li><strong>4. 数据读取费用</strong><ul><li>基于数据读取模式（加急模式、标准模式、批量模式）确定计费单价；</li><li>数据读取费 = 读取数据存储容量 x 单价。</li></ul></li><li><strong>5. 数据提前删除费</strong><ul><li>未满足CAS最短存储时长 90 天而提前删除数据、需收取被删除数据剩余天数的存储费用。</li><li>数据提前删除费用 = 删除的存储量 * （90-已保存天数） * 日单价</li></ul></li></ul><ul><li>CAS 价格列表（此处仅供参考，以官网为准）</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102155904537.png" alt="image-20230102155904537" style="zoom: 50%;"><ul><li><p>A 机构是某地一家人才服务交流中心，是连接人与企业的一个节点，主要业务有人事档案进行托管服务，为了改善原来人员档案混乱的问题，帮助企业了解员工，需要对大量档案材料进行管理。</p></li><li><p>A 机构的所有档案平均每份 1 GB，在 4 月对归档存储的操作如下：在 4 月 1 日的时候，总共剩余 10000 份档案在存储。在 4 月 5 日往档案库新增上传了 1000 份档案。在 4 月 10 日的时候采用标准模式取回 1000 份档案，经过核查，有 500 份不需要继续存储了，所以立刻删除，但是这 500 份档案在归档存储的存储时间为 30 天。</p></li><li><p>A 机构在 5 月 3 日出账单的时候，综合费用计算详情如下：</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102160009862.png" alt="image-20230102160009862" style="zoom: 50%;"><h3 id="CDM-计费方案"><a href="#CDM-计费方案" class="headerlink" title="CDM 计费方案"></a>CDM 计费方案</h3><ul><li><p>CDM 计费基于设备租用费：基于设备数量和使用时间</p><ul><li>服务费用 = 设备台数 x 单价；</li><li>超时费用 = （使用天数 - 免费天数）x 单价；</li><li>可退还押金 =设备台数 x 单价。</li><li>数据上云费用：免费，设备寄回之后，由腾讯云负责将数据导入云存储中；</li><li>物流费用：由专业的物流团队负责，费用不需要用户承担。</li></ul><table><thead><tr><th>设备</th><th>服务费</th><th>免费使用</th><th>超时费用</th><th>押金</th></tr></thead><tbody><tr><td>M30（30TB）</td><td>1500元</td><td>10天</td><td>200元/天</td><td>15000元</td></tr><tr><td>L80（80TB）</td><td>3500元</td><td>10天</td><td>450元/天</td><td>50000元</td></tr></tbody></table></li></ul><p>​                                                                                                                此处价格仅供参考、以官网为准。</p><ul><li>场景：用户购买了2台CDM L80（80TB）设备，使用了12天（设备开始使用至申请回寄的时间）。</li><li>该用户费用计算如下：<ul><li>服务费用：3500元/台*2台 = 7000元；</li><li>押金费用：50000元/台*2台 = 100000元；</li><li>超时费用：（12天 - 10天）*450元/天 = 900元；</li><li>申请使用时，需冻结支付：服务费 + 押金 = 7000+100000=107000元 ；</li><li>服务结束时，自动解冻，退回押金。用户需支付总费用：7000+900 = 7900元。</li></ul></li></ul><h2 id="课程总结-4"><a href="#课程总结-4" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li><strong>本课程详细介绍了</strong><ul><li>存储基础知识：发展历程、存储类型、存储介质、存储分级</li><li>腾讯云云存储产品：云硬盘CBS、文件存储CFS、对象存储COS、归档存储CAS</li><li>腾讯云产存储服务：存储网关CSG、存储迁移CDM、日志服务CLS</li><li>存储计费方案：各存储产品服务计费方案</li></ul></li></ul><h1 id="腾讯云数据库产品介绍"><a href="#腾讯云数据库产品介绍" class="headerlink" title="腾讯云数据库产品介绍"></a>腾讯云数据库产品介绍</h1><h2 id="数据库基础知识"><a href="#数据库基础知识" class="headerlink" title="数据库基础知识"></a>数据库基础知识</h2><h3 id="数据库类型对比"><a href="#数据库类型对比" class="headerlink" title="数据库类型对比"></a>数据库类型对比</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103102330242.png" alt="image-20230103102330242" style="zoom:50%;"><ul><li><p>数据库通常可以按照数据组织方式和架构进行分类：</p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103102407231.png" alt="image-20230103102407231" style="zoom: 50%;"></li></ul><h4 id="关系型数据库与非关系型数据库"><a href="#关系型数据库与非关系型数据库" class="headerlink" title="关系型数据库与非关系型数据库"></a><strong>关系型数据库与非关系型数据库</strong></h4><table><thead><tr><th><strong>对比项</strong></th><th><strong>关系型 SQL</strong></th><th><strong>非关系型 NoSQL</strong></th></tr></thead><tbody><tr><td>数据存储</td><td>关系表</td><td>数据集（键值/JSON文档/哈希表/其他）</td></tr><tr><td>模式结构</td><td>结构化、提前定义表结构</td><td>动态调整模式，非结构化</td></tr><tr><td>扩展方式</td><td>纵向扩展，提高处理能力</td><td>横向扩展、增加分布式节点</td></tr><tr><td>数据查询</td><td>标准通用的查询语言 SQL</td><td>非标准非结构化的查询语言（UnQL）</td></tr><tr><td>关键特性</td><td>ACID</td><td>CAP、BASE</td></tr><tr><td>主要优势</td><td>结构化、事务处理、易于维护使用</td><td>扩展性、灵活调整、大数据分析</td></tr><tr><td>主要劣势</td><td>扩展性、高并发场景、大数据分析</td><td>事务支持较弱，标准不统一</td></tr></tbody></table><blockquote><p>ACID 理论：指数据库事务正确执行的四个基本要素：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）。</p><p>CAP 理论：一个分布式系统不可能同时满足一致性（C：Consistency）、可用性（A：Availability）和分区容错性（P：Partition tolerance）这三个基本需求，最多只能同时满足其中两项。</p><p>BASE 理论：BASE 是 Basically Available（基本可用）、Soft state（软状态）和 Eventually consistent（最终一致性）三个短语的缩写。BASE 理论是对 CAP 中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的总结， 是基于 CAP 定理逐步演化而来的。BASE 理论的核心思想是：即使无法做到强一致性，但每个应用都可以根据自身业务特点，采用适当的方式来使系统达到最终一致性。</p></blockquote><h4 id="主流关系型数据库"><a href="#主流关系型数据库" class="headerlink" title="主流关系型数据库"></a>主流关系型数据库</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103160518996.png" alt="image-20230103160518996" style="zoom:50%;"><h4 id="主流-NoSQL-数据库"><a href="#主流-NoSQL-数据库" class="headerlink" title="主流 NoSQL 数据库"></a>主流 NoSQL 数据库</h4><table><thead><tr><th><strong>数据库类型</strong></th><th><strong>关键特点</strong></th><th><strong>主流产品</strong></th><th><strong>应用场景</strong></th></tr></thead><tbody><tr><td><strong>键值数据库</strong></td><td>使用哈希表存储键和指向特定的数据的指针。</td><td>Redis，Memcached</td><td>内容缓存、购物车等</td></tr><tr><td><strong>文档数据库</strong></td><td>以文档形式（JSON/BSON/XML）存取数据，Schema-Free弱模式结构。</td><td>MongoDB,  CouchDB</td><td>应用日志系统、网站/博客平台</td></tr><tr><td><strong>列式数据库</strong></td><td>键仍然存在，但指针指向多个列、以列簇式存储相关数据。</td><td>HBase,  Cassandra</td><td>分布式文件系统、大数据分析</td></tr><tr><td><strong>图数据库</strong></td><td>以图储存数据、实体顶点，边代表关系</td><td><strong>Neo4J</strong>，InfoGrid，Infinite  Graph</td><td>社交网络、推荐引擎</td></tr></tbody></table><blockquote><p><code>BSON</code> 这种格式是专门为 MongoDB 而开发的，类似 json 的一种二进制格式。</p><p><code>HBase</code> 用于存储海量数据，和 Hadoop + Hive 实现大数据离线分析</p><p><code>Cassandra</code> 数据库在 OpenShift 里可以提供永久存储，使用三个 Cassandra pod 可以实现 HA（高可用）</p><p><strong>图数据库</strong>是基于图论实现的一种 NoSQL数据库，其数据存储结构和数据查询方式都是以图论（它以图为研究对象图论中的图是由若干给定的点及连接两点的线所构成的图形）为基础的， 图数据库主要用于存储更多的连接数据。</p></blockquote><h4 id="集中式数据库架构示例"><a href="#集中式数据库架构示例" class="headerlink" title="集中式数据库架构示例"></a>集中式数据库架构示例</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103160652363.png" alt="image-20230103160652363" style="zoom: 50%;"><h4 id="分布式数据库架构示例"><a href="#分布式数据库架构示例" class="headerlink" title="分布式数据库架构示例"></a>分布式数据库架构示例</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103160712572.png" alt="image-20230103160712572" style="zoom:50%;"><h3 id="数据库排名"><a href="#数据库排名" class="headerlink" title="数据库排名"></a>数据库排名</h3><ul><li><strong>DB-Engines Ranking 按月更新数据库流行度排名：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103160810114.png" alt="image-20230103160810114" style="zoom:50%;"><h3 id="数据库发展趋势"><a href="#数据库发展趋势" class="headerlink" title="数据库发展趋势"></a>数据库发展趋势</h3><ul><li><strong>融合：</strong><ul><li>软件与硬件融合：数据库一体机</li><li>NoSQL 与 SQL 融合：NewSQL<code>典型的例子是PostgreSQL</code></li><li>OLAP 与 OLTP 融合：HTAP</li><li>DBMS 与 AI 融合：</li></ul></li></ul><p><code>OLAP: Online analytical processing 联机分析处理</code></p><p><code>OLTP: Online transaction processing 在线/联机事务处理</code></p><p><code>HTAP: Hybrid Transaction/Analytical Processing 混合事务/分析处理</code></p><ul><li><strong>突破：</strong><ul><li>海量数据处理：大数据分析</li><li>高性能：集群/分布式/低延迟</li><li>稳定性：数据复制，备份容灾</li><li>架构突破：内核优化/云原生DB</li></ul></li></ul><h3 id="腾讯云数据库-TencentDB"><a href="#腾讯云数据库-TencentDB" class="headerlink" title="腾讯云数据库 TencentDB"></a>腾讯云数据库 TencentDB</h3><ul><li><strong>关系型数据库：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103161149660.png" alt="image-20230103161149660" style="zoom: 50%;"><ul><li><strong>NoSQL 数据库：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103161203610.png" alt="image-20230103161203610" style="zoom:50%;"><ul><li><strong>数据库服务：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103161230102.png" alt="image-20230103161230102" style="zoom:50%;"><h2 id="腾讯云关系型数据库"><a href="#腾讯云关系型数据库" class="headerlink" title="腾讯云关系型数据库"></a>腾讯云关系型数据库</h2><h3 id="云数据库-MySQL"><a href="#云数据库-MySQL" class="headerlink" title="云数据库 MySQL"></a>云数据库 MySQL</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103161401029.png" alt="image-20230103161401029" style="zoom: 50%;"><h4 id="云数据库-MySQL-1"><a href="#云数据库-MySQL-1" class="headerlink" title="云数据库 MySQL"></a>云数据库 MySQL</h4><ul><li>TencentDB for MySQL 让用户在云端部署使用 MySQL 数据库。</li></ul><ul><li><strong>兼容性</strong><ul><li>100% 兼容开源 MySQL 协议；</li></ul></li><li><strong>性能优化：</strong><ul><li>深度优化 MySQL 内核；</li><li>使用 PCI-e SSD 提升 I/O 性能；</li><li>单实例 24 万 QPS，6TB 存储空间；</li><li>一主多从、支持读写分离。</li></ul></li><li><strong>安全保障</strong><ul><li>数据加密、数据库审计；</li></ul></li><li><strong>高可用性</strong><ul><li>实时热备，基于 binlog 5日内无损恢复数据；</li><li>自动容灾，自动故障检测、主备切换/迁移对用户透明；</li></ul></li></ul><h4 id="MySQL-应用：游戏应用场景"><a href="#MySQL-应用：游戏应用场景" class="headerlink" title="MySQL 应用：游戏应用场景"></a>MySQL 应用：游戏应用场景</h4><ul><li><strong>业务需求：</strong>基于玩家数量变化分派资源；多时间点的数据保留与回档。</li><li><strong>应对方案：</strong>弹性扩容、快速回档</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103161645279.png" alt="image-20230103161645279" style="zoom:50%;"><h4 id="MySQL-应用：移动-APP-场景"><a href="#MySQL-应用：移动-APP-场景" class="headerlink" title="MySQL 应用：移动 APP 场景"></a>MySQL 应用：移动 APP 场景</h4><ul><li>业务特点：高并发访问、多读少写、</li><li>应对方案：读写分离、性能优化</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103161742791.png" alt="image-20230103161742791" style="zoom:50%;"><h3 id="云数据库-SQL-Server"><a href="#云数据库-SQL-Server" class="headerlink" title="云数据库 SQL Server"></a>云数据库 SQL Server</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103161811195.png" alt="image-20230103161811195" style="zoom:50%;"><h4 id="云数据库-SQL-Server-1"><a href="#云数据库-SQL-Server-1" class="headerlink" title="云数据库 SQL Server"></a>云数据库 SQL Server</h4><ul><li>SQL Server 是微软推出的基于 Windows 系统的商用关系型数据库。</li><li><strong>TencentDB for SQL Server</strong> 具有微软正版授权，可在云端轻松部署使用。</li></ul><ul><li><strong>目前支持如下版本：</strong><ul><li>SQL Server 2008 R2 sp3</li><li>SQL Server 2012 sp3</li><li>SQL Server 2016 </li></ul></li><li><strong>产品特性：</strong><ul><li>正版授权</li><li>性能卓越</li><li>稳定可靠</li><li>便捷管理</li></ul></li></ul><h4 id="SQL-Server-镜像机制"><a href="#SQL-Server-镜像机制" class="headerlink" title="SQL Server 镜像机制"></a>SQL Server 镜像机制</h4><ul><li>采用数据库镜像（Database Mirroring）实现高可用复制；<ul><li>每个库对应一组监控 Agent，通过心跳对数据库进行实时监控；</li><li>如果节点故障，系统将自动恢复/重建；节点切换对业务透明。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162030108.png" alt="image-20230103162030108" style="zoom:67%;"><h4 id="SQL-Server-应用：Windows-平台"><a href="#SQL-Server-应用：Windows-平台" class="headerlink" title="SQL Server 应用：Windows 平台"></a>SQL Server 应用：Windows 平台</h4><ul><li>Windows 平台架构及云数据库 SQL Server 可以协助用户快速部署企业 OA / ERP /销售管理等平台。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162104701.png" alt="image-20230103162104701" style="zoom:67%;"><h3 id="云数据库-PostgreSQL"><a href="#云数据库-PostgreSQL" class="headerlink" title="云数据库 PostgreSQL"></a>云数据库 PostgreSQL</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162118924.png" alt="image-20230103162118924" style="zoom:50%;"><h4 id="云数据库-PostgreSQL-1"><a href="#云数据库-PostgreSQL-1" class="headerlink" title="云数据库 PostgreSQL"></a>云数据库 PostgreSQL</h4><ul><li>PostgreSQL 是开源 NewSQL 数据库，结合 SQL 和 NoSQL 特性，已成为商用首选开源关系数据库。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162146889.png" alt="image-20230103162146889" style="zoom:50%;"><ul><li>TencentDB for PostgreSQL 让用户在云端轻松设置、操作和扩展 PostgreSQL 数据库：<ul><li>更多的功能特性支持；</li><li>超高的性能；</li><li>高可靠性；</li><li>便捷的管理；</li></ul></li></ul><h4 id="PostgreSQL-应用场景"><a href="#PostgreSQL-应用场景" class="headerlink" title="PostgreSQL 应用场景"></a>PostgreSQL 应用场景</h4><ul><li>强大计算性能、空间地理信息处理能力，适用于面向企业复杂 SQL 处理的 OLAP 或 OLTP 场景；<ul><li><strong>企业核心应用：</strong>如 ERP、交易系统、财务系统等；</li><li><strong>含</strong> <strong>LBS</strong> <strong>的应用：</strong>大型游戏、O2O 等应用；<code>基于位置的服务(Location Based Services); 从线上到线下(Online to Offine)</code></li><li><strong>数据仓库和大数据：</strong>支持更多数据类型和高级分析功能；</li><li><strong>建站或</strong> <strong>APP：</strong>自定义函数、数据格式；全文搜索功能；</li></ul></li></ul><h4 id="OLTP-与-OLAP-对比"><a href="#OLTP-与-OLAP-对比" class="headerlink" title="OLTP 与 OLAP 对比"></a>OLTP 与 OLAP 对比</h4><table><thead><tr><th><strong>特点</strong></th><th><strong>OLTP</strong></th><th><strong>OLAP</strong></th></tr></thead><tbody><tr><td><strong>主要场景</strong></td><td>日常交易处理</td><td>统计、报表、分析</td></tr><tr><td><strong>面向业务</strong></td><td>面向实时交易类，如电商交易、订单</td><td>面向统计分析的，如  ERP、BI 等</td></tr><tr><td><strong>性能消耗</strong></td><td>磁盘  IO</td><td>CPU 计算力</td></tr><tr><td><strong>实时性</strong></td><td>实时读写要求高</td><td>实时读写要求低</td></tr></tbody></table><h3 id="云数据库-MariaDB-TDSQL"><a href="#云数据库-MariaDB-TDSQL" class="headerlink" title="云数据库 MariaDB/TDSQL"></a>云数据库 MariaDB/TDSQL</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162401675.png" alt="image-20230103162401675" style="zoom: 50%;"><h4 id="云数据库-MariaDB-TDSQL-1"><a href="#云数据库-MariaDB-TDSQL-1" class="headerlink" title="云数据库 MariaDB/TDSQL"></a>云数据库 MariaDB/TDSQL</h4><blockquote><p>TDSQL 是 MariaDB 的分布式版本</p></blockquote><ul><li><strong>MariaDB</strong> 由 MySQL 创始人创立，承诺永远开源，高度兼容 MySQL。</li><li><strong>TencentDB for MariaDB</strong> 定位于高安全性高性能的企业级云数据库。</li><li><strong>分布式数据库 TDSQL</strong><ul><li>TDSQL 是腾讯云维护的金融级分布式架构 MariaDB 内核分支；支持自动水平拆分，业务感受完整的逻辑表，数据均匀拆分到物理分片中。TDSQL 解决如下难题：<ul><li>单机数据库到达瓶颈；</li><li>应用层分片开发工作量大；（TDSQL 在数据库层面进行拆分解决了应用服务器占用的资源）</li><li>开源 NoSQL 运维支持不足。</li></ul></li></ul></li></ul><p><code>应用层分片将业务逻辑和数据库逻辑高度耦合，给当前业务快速迭代带来极大的开发工作量。</code></p><h4 id="MariaDB-产品优势"><a href="#MariaDB-产品优势" class="headerlink" title="MariaDB 产品优势"></a>MariaDB 产品优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162610716.png" alt="image-20230103162610716" style="zoom:50%;"><h4 id="数据复制方式"><a href="#数据复制方式" class="headerlink" title="数据复制方式"></a>数据复制方式</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162628431.png" alt="image-20230103162628431" style="zoom:50%;"><blockquote><p><strong>异步复制：</strong>这种模式下，主节点不关心从节点是否接收到返回信息，直接返回成功给客户；这样性能会好点，但可靠性差。</p><p><strong>半同步复制：</strong>主节点只需要接收到其中一台从节点的返回信息，就会给用户返回成功，这样做性能比异步模式会差一些，但可靠性会高一些</p><p><strong>全同步复制：</strong>主节点和从节点全部执行并提交了，才会向客户端返回成功。</p><p><strong><font color="red">MAR：</font><strong>即异步多线程强同步复制，只有当备机数据完全同步后，才由主机给予应用事务应答，保障数据不丢失，同时还用</strong>多线程思路保证了性能</strong>。腾讯的明星产品 TDSQL，就是使用的 MAR 做同步。</p></blockquote><h4 id="MAR-强同步"><a href="#MAR-强同步" class="headerlink" title="MAR 强同步"></a>MAR 强同步</h4><p><code>Multi-thread Asynchronous Replication</code></p><ul><li><strong>腾讯自研的异步多线程强同步复制方案（MAR）</strong><ul><li><strong>数据强一致：</strong>每个节点都包含完整数据副本，可以随时切换；</li><li><strong>业务层透明：</strong>业务层面无需做读写分离或同步强化工作；</li><li><strong>性能优化：</strong>将串行同步线程异步化，引入线程池能力；</li><li><strong>自动管控：</strong>支持自动成员控制，故障节点自动从集群中移除。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162734468.png" alt="image-20230103162734468" style="zoom:50%;"><h4 id="TDSQL-的拆分机制"><a href="#TDSQL-的拆分机制" class="headerlink" title="TDSQL 的拆分机制"></a>TDSQL 的拆分机制</h4><ul><li><strong>垂直切分：</strong>按业务应用不同内容存储到不同数据库中；</li><li><strong>水品切分：</strong>将一个数据库分散到多个独立的物理分片中。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162833597.png" alt="image-20230103162833597" style="zoom:50%;"><h4 id="TDSQL-Share-Nothing-架构"><a href="#TDSQL-Share-Nothing-架构" class="headerlink" title="TDSQL Share-Nothing 架构"></a>TDSQL Share-Nothing 架构</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162852575.png" alt="image-20230103162852575" style="zoom:50%;"><blockquote><p><strong>Shared Everthting：</strong>一般是针对单个主机，完全透明共享 CPU/MEMORY/IO，并行处理能力是最差的，典型的代表 <code>SQLServer</code></p><p><strong>Shared nothing</strong> 架构（shared nothing architecture）是一种分布式计算架构。这种架构中的每一个节点（ node）都是独立、自给的，而且整个系统中没有单点竞争。各个处理单元都有自己私有的 CPU/内存/硬盘等，不存在共享资源.</p></blockquote><h4 id="MariaDB-应用：金融业务"><a href="#MariaDB-应用：金融业务" class="headerlink" title="MariaDB 应用：金融业务"></a>MariaDB 应用：金融业务</h4><ul><li>业务要求：强一致性、高性能高并发、高安全性</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103162922180.png" alt="image-20230103162922180" style="zoom:50%;"><h4 id="TDSQL-应用场景"><a href="#TDSQL-应用场景" class="headerlink" title="TDSQL 应用场景"></a>TDSQL 应用场景</h4><ul><li>大型应用（超高并发实时交易场景）</li><li>物联网数据（PB 级数据存储访问场景）</li><li>文件索引（万亿行数据毫秒级存取）</li><li>高性价比商业数据库解决方案</li></ul><h3 id="云数据库-CynosDB"><a href="#云数据库-CynosDB" class="headerlink" title="云数据库 CynosDB"></a>云数据库 CynosDB</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163001848.png" alt="image-20230103163001848" style="zoom: 50%;"><h4 id="云数据库-CynosDB-1"><a href="#云数据库-CynosDB-1" class="headerlink" title="云数据库 CynosDB"></a>云数据库 CynosDB</h4><ul><li>CynosDB是腾讯云自研的企业级云原生分布式云数据库：<ul><li>高性能：单节点读性能可达 130 万 QPS，MySQL 8倍、PostgreSQL 4倍；</li><li>大容量：最高 128TB 的海量存储，可自动扩缩容；</li><li>低成本：价格仅为通用商业数据库的1/15。</li><li>兼容性：100%兼容 MySQL 和 PostgreSQL。</li><li>恢复快：计算节点无状态，秒级故障切换和恢复；秒级备份和回档。</li></ul></li></ul><table><thead><tr><th><strong>CynosDB 版本</strong></th><th><strong>数据库版本</strong></th></tr></thead><tbody><tr><td>兼容  MySQL  版</td><td>MySQL 5.7</td></tr><tr><td>兼容  PostgreSQL  版</td><td>PostgreSQL 10</td></tr></tbody></table><h4 id="CynosDB-架构优化"><a href="#CynosDB-架构优化" class="headerlink" title="CynosDB 架构优化"></a>CynosDB 架构优化</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163119906.png" alt="image-20230103163119906" style="zoom:50%;"><blockquote><p>SPDK（The Storage Performance Development Kit）：存储开发套件，专门为专用设备（NVME）设计。</p><p>RDMA（Remo<a href="https://www.elecfans.com/tags/te/">te</a> Direct Memory Access）：远程直接内存访问</p></blockquote><h4 id="CynosDB-应用场景"><a href="#CynosDB-应用场景" class="headerlink" title="CynosDB 应用场景"></a>CynosDB 应用场景</h4><ul><li><strong>企业核心应用：</strong><ul><li>高性能、高可用、低成本</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163201636.png" alt="image-20230103163201636" style="zoom:50%;"><ul><li><strong>互联网或游戏业务：</strong><ul><li>大容量、弹性扩展、秒级备份回档</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163228211.png" alt="image-20230103163228211" style="zoom:50%;"><h2 id="腾讯云非关系型数据库"><a href="#腾讯云非关系型数据库" class="headerlink" title="腾讯云非关系型数据库"></a>腾讯云非关系型数据库</h2><h3 id="云数据库-MongoDB"><a href="#云数据库-MongoDB" class="headerlink" title="云数据库 MongoDB"></a>云数据库 MongoDB</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163351002.png" alt="image-20230103163351002" style="zoom:50%;"><h4 id="云数据库-MongoDB-1"><a href="#云数据库-MongoDB-1" class="headerlink" title="云数据库 MongoDB"></a>云数据库 MongoDB</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163443819.png" alt="image-20230103163443819" style="zoom:50%;"><ul><li>TencentDB for MongoDB 基于开源 MongoDB 打造的高性能、分布式文档数据库服务。<ul><li>兼容开源 MongoDB 协议、DynamoDB 协议；</li><li>支持分布式集群构建；</li><li>模式自由 schema-free；</li><li>高性能：QPS 可达 3W+；</li><li>自动容灾、备份回档。</li></ul></li></ul><blockquote><p>模式自由（Schema-free)，意味着对于存储在 Mongodb 数据库中的文件，我们不需要知道它的任何结构定义。即不需要提前定义表的结构，可以存储不同格式、类型的数据，非常灵活</p></blockquote><h4 id="MongoDB-容灾架构"><a href="#MongoDB-容灾架构" class="headerlink" title="MongoDB 容灾架构"></a>MongoDB 容灾架构</h4><ul><li><strong>主从热备架构，具有自动容灾机制：</strong><ul><li>集群通过心跳检测监控节点状态；</li><li>主节点不可达时，集群内会自动选举出新的主节点；</li><li>主节点故障后重新拉起，会变成从节点；如果拉起失败，会补充新节点进入集群；</li><li>任一从节点不可达时，会尝试拉起节点或者补充新节点。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163612566.png" alt="image-20230103163612566" style="zoom:50%;"><p><code>Arbiter(仲裁机)的作用是判断和选择主节点</code></p><h4 id="MongoDB-应用：游戏开发场景"><a href="#MongoDB-应用：游戏开发场景" class="headerlink" title="MongoDB 应用：游戏开发场景"></a>MongoDB 应用：游戏开发场景</h4><ul><li>需求：游戏需求变化快，版本迭代快，需要频繁修改数据库表结构。</li><li>方案：MongoDB 无固定模式（<code>schema-free</code>），大幅缩短版本迭代周期。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163644348.png" alt="image-20230103163644348" style="zoom:50%;"><table><thead><tr><th><strong>维度</strong></th><th><strong>云数据库 MongoDB</strong></th><th><strong>自建 MongoDB</strong></th></tr></thead><tbody><tr><td>价格优势</td><td>无软硬件投入</td><td>成本高</td></tr><tr><td>服务可用性</td><td>99.95%</td><td>自行保障</td></tr><tr><td>数据可靠性</td><td>99.9996%</td><td>自行保障</td></tr><tr><td>系统安全性</td><td>防 DDoS 攻击；漏洞修复</td><td>自行保障</td></tr><tr><td>实时监控</td><td>多维度监控，故障预警</td><td>自行开发</td></tr><tr><td>业务扩容</td><td>一键式按需扩容</td><td>自行完成</td></tr><tr><td>资源利用率</td><td>按需申请</td><td>峰值效用，资源利用率低</td></tr></tbody></table><h3 id="云数据库-Redis"><a href="#云数据库-Redis" class="headerlink" title="云数据库 Redis"></a>云数据库 Redis</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163709831.png" alt="image-20230103163709831" style="zoom:50%;"><ul><li>提供兼容开源 Redis 协议的弹性缓存和存储服务。</li><li>支持主从热备，自动容灾切换、数据备份、故障迁移、实例监控、在线扩容、数据回档等全套的数据库服务。</li></ul><table><thead><tr><th><strong>引擎版本</strong></th><th><strong>版本说明</strong></th></tr></thead><tbody><tr><td>社区版  Redis 引擎</td><td>Redis  2.8 、Redis 4.0 版本协议和命令</td></tr><tr><td>自研版  CKV  引擎</td><td>兼容  Redis  3.2 版本协议和命令。</td></tr></tbody></table><table><thead><tr><th><strong>存储引擎</strong></th><th><strong>社区版引擎</strong></th><th><strong>腾讯云</strong> <strong>CKV</strong>  <strong>引擎</strong></th></tr></thead><tbody><tr><td><strong>支持版本</strong></td><td><strong>标准版、集群版</strong></td><td><strong>标准版、集群版</strong></td></tr><tr><td><strong>架构</strong></td><td>单线程</td><td>多线程</td></tr><tr><td><strong>QPS</strong></td><td>标准版8万 –  10万，集群版千万级别</td><td>标准版8万 -  12万，集群版千万级别</td></tr><tr><td><strong>冷热分离</strong></td><td>不支持</td><td>不支持</td></tr><tr><td><strong>强同步</strong></td><td>不支持</td><td>不支持</td></tr><tr><td><strong>数据备份</strong></td><td>通过 bgsave  备份，需要2倍内存</td><td>无需额外内存</td></tr><tr><td><strong>平滑升级</strong></td><td>集群版支持</td><td>支持</td></tr><tr><td><strong>快速启动</strong></td><td>慢</td><td>基于内存共享数据、1秒内</td></tr><tr><td><strong>单节点容量</strong></td><td>0.25GB  - 60GB</td><td>4GB  - 384GB</td></tr></tbody></table><h3 id="云数据库-Memcached"><a href="#云数据库-Memcached" class="headerlink" title="云数据库 Memcached"></a>云数据库 Memcached</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163750743.png" alt="image-20230103163750743" style="zoom:50%;"><blockquote><p>Memcached 和 Redis 的差别是不能持久化，存储在内存上。</p></blockquote><h4 id="云数据库-Memcached-1"><a href="#云数据库-Memcached-1" class="headerlink" title="云数据库 Memcached"></a>云数据库 Memcached</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103163808556.png" alt="image-20230103163808556" style="zoom:50%;"><ul><li>提供兼容 Memcached 协议、高性能、高可靠、易用的弹性缓存和存储服务。</li><li>提供主从热备、自动容灾切换、在线扩容、数据备份、等实例监控全套数据库服务。</li></ul><h4 id="Memcached-自动容灾"><a href="#Memcached-自动容灾" class="headerlink" title="Memcached 自动容灾"></a>Memcached 自动容灾</h4><ul><li><p>单个实例保存在多个节点，双机热备。</p></li><li><p>节点故障时，系统自动切换或人工切换。</p><ul><li>当主节点故障时，接入机会把读写请求发送到从节点；</li><li>新增一个从节点开始从新的主机拷贝数据，完成主从同步。</li><li>当从节点故障时，直接加入新的从机节点。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164005900.png" alt="image-20230103164005900" style="zoom: 50%;"><h4 id="Memcached-在线扩容"><a href="#Memcached-在线扩容" class="headerlink" title="Memcached 在线扩容"></a>Memcached 在线扩容</h4><ul><li>自动扩容以保证用户实例始终有 20% 的可用空间。</li><li><strong>实例需要扩容时：</strong><ul><li>检查实例当前所在存储节点的剩余空间是否满足扩容需求；</li><li>如果满足则直接原地扩容，否则需要增加额外的存储节点。</li></ul></li></ul><blockquote><p>纵向扩容（增加内存、CPU、磁盘等），横向扩容（增加主机）</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164135647.png" alt="image-20230103164135647" style="zoom:50%;"><h4 id="Redis-Memcached-应用场景"><a href="#Redis-Memcached-应用场景" class="headerlink" title="Redis/Memcached 应用场景"></a>Redis/Memcached 应用场景</h4><ul><li><strong>存储需要高速访问的热点数据：</strong><ul><li>游戏行业场景：积分排行榜。</li><li>互联网/APP：热点访问/下载数据</li><li>电商场景：商品分类数据/图片、商品搜索结果</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164238555.png" alt="image-20230103164238555" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164249326.png" alt="image-20230103164249326" style="zoom: 67%;"><h3 id="时序数据库-CTSDB"><a href="#时序数据库-CTSDB" class="headerlink" title="时序数据库 CTSDB"></a>时序数据库 CTSDB</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164304854.png" alt="image-20230103164304854" style="zoom:50%;"><h4 id="时序数据库-CTSDB-1"><a href="#时序数据库-CTSDB-1" class="headerlink" title="时序数据库 CTSDB"></a>时序数据库 CTSDB</h4><p><code>Cloud Time Series Database</code></p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164320316.png" alt="image-20230103164320316" style="zoom:50%;"><ul><li><p><strong>时序数据库</strong>主要用于处理带时间标签（按照时间的顺序变化）的数据。</p></li><li><p><strong>TencentDB for CTSDB</strong> 提供高性能、分布式、安全、稳定的云端时序数据库。</p><ul><li>高并发写入：写内存-Dump-批量写入</li><li>低成本存储：Rollup 数据聚合、数据压缩</li><li>聚合分析能力：丰富聚合查询与分析方式</li></ul></li></ul><h4 id="CTSDB-应用场景：IoT-监控环境"><a href="#CTSDB-应用场景：IoT-监控环境" class="headerlink" title="CTSDB 应用场景：IoT 监控环境"></a>CTSDB 应用场景：IoT 监控环境</h4><ul><li><strong>IoT 监控环境</strong><ul><li>PB级数据，CTSDB 实时写入，快速查询。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164439713.png" alt="image-20230103164439713" style="zoom: 67%;"><ul><li><strong>互联网业务监控分析</strong><ul><li>CTSDB 生成日志报表提供问题分析排查。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164458293.png" alt="image-20230103164458293" style="zoom:67%;"><h3 id="游戏数据库-TcaplusDB"><a href="#游戏数据库-TcaplusDB" class="headerlink" title="游戏数据库 TcaplusDB"></a>游戏数据库 TcaplusDB</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164513852.png" alt="image-20230103164513852" style="zoom:50%;"><h4 id="游戏数据库-TcaplusDB-1"><a href="#游戏数据库-TcaplusDB-1" class="headerlink" title="游戏数据库 TcaplusDB"></a><strong>游戏数据库 TcaplusDB</strong></h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164537076.png" alt="image-20230103164537076" style="zoom:50%;"><ul><li>游戏数据库（TcaplusDB）是专为游戏设计的 NoSQL 分布式数据存储服务。<ul><li>Cache 与持久存储结合，单机 QPS 达10万；</li><li>支持全区全服，单表最大50TB；</li><li>支持 Protobuf 访问；</li><li>快速回档、备份容灾。</li></ul></li></ul><h4 id="TcaplusDB-架构"><a href="#TcaplusDB-架构" class="headerlink" title="TcaplusDB 架构"></a>TcaplusDB 架构</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164625224.png" alt="image-20230103164625224" style="zoom: 50%;"><h4 id="TcaplusDB-应用场景：移动游戏"><a href="#TcaplusDB-应用场景：移动游戏" class="headerlink" title="TcaplusDB 应用场景：移动游戏"></a>TcaplusDB 应用场景：移动游戏</h4><ul><li><p><strong>移动游戏场景</strong></p><ul><li>时间碎片化</li><li>玩家交互多</li><li>数据量大</li></ul></li><li><p><strong>TcaplusDB</strong></p><ul><li>不停服无损扩缩容</li><li>分布式、冷热数据交换</li><li>自动区服合并</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164739380.png" alt="image-20230103164739380" style="zoom:50%;"><h4 id="TcaplusDB-应用场景：端游"><a href="#TcaplusDB-应用场景：端游" class="headerlink" title="TcaplusDB 应用场景：端游"></a>TcaplusDB 应用场景：端游</h4><ul><li><strong>端游场景</strong><ul><li>在线时间长</li><li>数据量大</li></ul></li><li><strong>TcaplusDB</strong><ul><li>数据压缩、淘汰</li><li>记录自动分包</li><li>分布式、冷热数据交换</li><li>自动化备份和按需回档</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164847874.png" alt="image-20230103164847874" style="zoom:67%;"><h4 id="TcaplusDB-应用场景：页游"><a href="#TcaplusDB-应用场景：页游" class="headerlink" title="TcaplusDB 应用场景：页游"></a>TcaplusDB 应用场景：页游</h4><ul><li><strong>页游场景</strong><ul><li>缓存能力较弱</li><li>7x24小时</li><li>开合服频繁</li></ul></li><li><strong>TcaplusDB</strong><ul><li>Cache 结合高速硬盘</li><li>自动合服</li><li>无损扩缩容</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103164959025.png" alt="image-20230103164959025" style="zoom: 67%;"><h4 id="TcaplusDB-应用场景：社交应用"><a href="#TcaplusDB-应用场景：社交应用" class="headerlink" title="TcaplusDB 应用场景：社交应用"></a>TcaplusDB 应用场景：社交应用</h4><ul><li><strong>社交场景</strong><ul><li>自由创建数据</li><li>评论和消息使用频繁</li><li>读多写少</li></ul></li><li><strong>TcaplusDB</strong><ul><li>列表存储</li><li>支持异构数据</li><li>冷热交换</li><li>读写分离</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165117573.png" alt="image-20230103165117573" style="zoom:67%;"><h2 id="腾讯云数据库服务"><a href="#腾讯云数据库服务" class="headerlink" title="腾讯云数据库服务"></a>腾讯云数据库服务</h2><h3 id="数据库一体机-TData"><a href="#数据库一体机-TData" class="headerlink" title="数据库一体机 TData"></a>数据库一体机 TData</h3><blockquote><p>数据库的趋势——<strong>软件与硬件的融合</strong>（TData 数据库）</p></blockquote><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165156232.png" alt="image-20230103165156232" style="zoom:50%;"><ul><li>数据库一体机 TData：融合高性能计算、热插拔闪存、Infiniband 网络的软硬件一体化数据库解决方案。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165219852.png" alt="image-20230103165219852" style="zoom: 67%;"><blockquote><p>IB 交换机：提高计算节点和存储节点的硬件性能</p><p>传统的总线结构 I/O 是相互影响的，<strong>某一个节点在发送数据时，另一个节点只能等待</strong>——“共享总线型”；</p><p>在 IB 交换机是点对点的结构，<strong>每个节点之间点对点通信，互相不干扰。</strong></p></blockquote><h4 id="TData-产品优势"><a href="#TData-产品优势" class="headerlink" title="TData  产品优势"></a>TData  产品优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165253310.png" alt="image-20230103165253310" style="zoom:50%;"><blockquote><p>金融安全：两地三中心</p><p>高可靠性：硬件层面和软件层面</p><p>高性能：满足 OLAP/OLTP</p></blockquote><h4 id="TData-应用场景"><a href="#TData-应用场景" class="headerlink" title="TData 应用场景"></a>TData 应用场景</h4><ul><li>可满足 OLAP、 OLTP 以及混合负载等场景。</li><li>两地三中心：同城双活、异地灾备，如金融行业。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165323195.png" alt="image-20230103165323195" style="zoom:67%;"><h3 id="数据传输服务-DTS"><a href="#数据传输服务-DTS" class="headerlink" title="数据传输服务 DTS"></a>数据传输服务 DTS</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165333733.png" alt="image-20230103165333733" style="zoom: 50%;"><h4 id="数据传输服务-DTS-1"><a href="#数据传输服务-DTS-1" class="headerlink" title="数据传输服务 DTS"></a>数据传输服务 DTS</h4><ul><li>腾讯云数据传输服务（Data Transmission Service，DTS）提供一体化的数据库数据传输管理服务：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165401960.png" alt="image-20230103165401960" style="zoom:50%;"><p><code>binlog：数据库日志</code></p><h4 id="DTS-迁移要求"><a href="#DTS-迁移要求" class="headerlink" title="DTS 迁移要求"></a>DTS 迁移要求</h4><ul><li>源数据库类型：<ul><li>MySQL、Redis、MariaDB、PostgreSQL、Percona</li></ul></li></ul><blockquote><p>Percona 是 MySQL 的优化版本；</p></blockquote><ul><li>接入类型：<ul><li>公网、专线接入、VPN接入、云联网；云数据库、 CVM 自建。</li></ul></li><li>目标数据库：<ul><li>迁移到同类型数据库。<code>不能异构迁移</code></li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165448816.png" alt="image-20230103165448816" style="zoom: 50%;"><h4 id="DTS-应用：数据库灾备"><a href="#DTS-应用：数据库灾备" class="headerlink" title="DTS 应用：数据库灾备"></a>DTS 应用：数据库灾备</h4><ul><li>本地数据库灾备</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165517124.png" alt="image-20230103165517124" style="zoom:67%;"><ul><li>云上数据库灾备</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165530791.png" alt="image-20230103165530791" style="zoom:67%;"><h4 id="DTS-应用：数据上云-归档"><a href="#DTS-应用：数据上云-归档" class="headerlink" title="DTS 应用：数据上云/归档"></a>DTS 应用：数据上云/归档</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165556536.png" alt="image-20230103165556536" style="zoom:50%;"><ul><li><strong>数据上云迁移</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165623520.png" alt="image-20230103165623520" style="zoom:67%;"><ul><li><strong>数据归档存储</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165638008.png" alt="image-20230103165638008" style="zoom:67%;"><h4 id="DTS-的优势"><a href="#DTS-的优势" class="headerlink" title="DTS 的优势"></a>DTS 的优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165653489.png" alt="image-20230103165653489" style="zoom:50%;"><h2 id="腾讯云数据库计费方案"><a href="#腾讯云数据库计费方案" class="headerlink" title="腾讯云数据库计费方案"></a>腾讯云数据库计费方案</h2><h3 id="主要计费方式"><a href="#主要计费方式" class="headerlink" title="主要计费方式"></a>主要计费方式</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103165807354.png" alt="image-20230103165807354" style="zoom:50%;"><h4 id="云产品付费方案简介"><a href="#云产品付费方案简介" class="headerlink" title="云产品付费方案简介"></a>云产品付费方案简介</h4><ul><li>腾讯云产品付费方案支持以下两种模式：<ul><li>包年包月<ul><li>一次性支付若干个月的费用，付费后即可使用云资源。</li></ul></li><li>按量计费<ul><li>先申请资源，结算时按实际资源使用量收费；</li><li>结算周期有小时/天/月等。</li></ul></li></ul></li></ul><h4 id="包年包月——到期未续费处理机制"><a href="#包年包月——到期未续费处理机制" class="headerlink" title="包年包月——到期未续费处理机制"></a>包年包月——到期未续费处理机制</h4><table><thead><tr><th><strong>时间段</strong></th><th><strong>处理机制</strong></th></tr></thead><tbody><tr><td>到期前7天~前1天</td><td>自动续费资源：推送续费或余额不足通知。</td></tr><tr><td>到期当天</td><td>停服（断网关机，仅保留数据），推送停服通知。</td></tr><tr><td>到期当天停服后~到期后第7天</td><td>可通过回收站或腾讯云工作人员，续费找回资源。</td></tr><tr><td>到期后第8天</td><td>数据被销毁清除且不可恢复。</td></tr></tbody></table><h4 id="按量计费——到期未续费处理机制"><a href="#按量计费——到期未续费处理机制" class="headerlink" title="按量计费——到期未续费处理机制"></a>按量计费——到期未续费处理机制</h4><table><thead><tr><th><strong>时间段</strong></th><th><strong>处理机制</strong></th></tr></thead><tbody><tr><td>生成账单</td><td>根据账单扣费。余额不足进入欠费状态，推送欠费通知。</td></tr><tr><td>欠费状态保护期</td><td>推送欠费提醒。</td></tr><tr><td>欠费状态停服期</td><td>停服关闭，推送停服通知（充值可重启服务）。</td></tr><tr><td>欠费状态资源回收</td><td>销毁和回收资源；推送资源回收通知。</td></tr></tbody></table><h3 id="关系型数据库计费"><a href="#关系型数据库计费" class="headerlink" title="关系型数据库计费"></a>关系型数据库计费</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103170000592.png" alt="image-20230103170000592" style="zoom:50%;"><h4 id="关系型数据库计费-1"><a href="#关系型数据库计费-1" class="headerlink" title="关系型数据库计费"></a>关系型数据库计费</h4><ul><li><strong>实例费用</strong> = 实例规格费用（内存大小） + 存储空间费用 （磁盘容量）</li></ul><ul><li><strong>1.</strong> <strong>MySQL 计费方式：</strong><ul><li>包年包月：预付费、元/月</li><li>按量计费：按小时三级阶梯计费，使用越长价格越低。</li></ul></li></ul><table><thead><tr><th><strong>阶梯</strong></th><th><strong>阶梯区间</strong></th></tr></thead><tbody><tr><td>T1</td><td>0＜T1≤96小时</td></tr><tr><td>T2</td><td>96小时＜T2≤360小时</td></tr><tr><td>T3</td><td>T3＞360小时</td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103170115867.png" alt="image-20230103170115867" style="zoom:50%;"><ul><li><strong>2.</strong> <strong>仅支持包年包月计费的数据库：</strong><ul><li>云数据库 MariaDB</li><li>云数据库 SQL Server</li><li>云数据库 PostgreSQL</li></ul></li><li><strong>费用计算：</strong><ul><li>实例总价 =（内存容量 * 单价 + 硬盘容量 * 单价）* 实例数量 * 时长 * 折扣率</li></ul></li></ul><h4 id="计费示例（包年包月）"><a href="#计费示例（包年包月）" class="headerlink" title="计费示例（包年包月）"></a>计费示例（包年包月）</h4><ul><li>购买 3 个云数据库 MariaDB实例，内存为 16GB ，硬盘为 500GB ，购买时长为 2个月，折扣率为 80%。</li></ul><table><thead><tr><th><strong>定价项</strong></th><th><strong>单价（仅供参考、官网为准）</strong></th></tr></thead><tbody><tr><td>内存</td><td>102 元/GB/月</td></tr><tr><td>磁盘</td><td>0.72 元/GB/月</td></tr></tbody></table><ul><li>实例总价 =（16 * 102  + 500 * 0.72 ）* 3 * 2* 80% = 9561.6 元/月。</li></ul><h4 id="TDSQL-计费方案"><a href="#TDSQL-计费方案" class="headerlink" title="TDSQL 计费方案"></a>TDSQL 计费方案</h4><ul><li><strong>包年包月预付费，计价方案计费如下：</strong><ul><li>实例总价 = (分片内存 * 单价+ 分片磁盘 * 单价) * 分片数量 * 时间 * 折扣率。</li></ul></li><li><strong>计费示例：</strong><ul><li>如在北京（公有云）购买 3个分片内存为 16GB，硬盘为 500GB 分布式云数据库 TDSQL，购买时长为 2 个月，折扣率为100%。</li><li>费用计算：<ul><li>实例总价 = （16 * 102  + 500 * 0.72 ）* 3* 2  * 100% = 11952 元/月。</li></ul></li></ul></li></ul><h4 id="关系型数据库升级"><a href="#关系型数据库升级" class="headerlink" title="关系型数据库升级"></a>关系型数据库升级</h4><ul><li><p><strong>数据库升级（包年包月）：</strong></p><ul><li>升级费用 = 实例到期剩余天数 T * （目标实例月单价P2-当前实例月单价 P1）/30</li></ul></li><li><p>升级示例：</p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103170433844.png" alt="image-20230103170433844" style="zoom:50%;"></li><li><p>升级费用 = 15 * ( 246 - 174 ) / 30 = 36 元。</p></li></ul><h3 id="MongoDB-计费"><a href="#MongoDB-计费" class="headerlink" title="MongoDB 计费"></a>MongoDB 计费</h3><ul><li>实例费用 = 实例规格（内存）费用 + 存储空间费用</li><li><strong>计费方式：</strong><ul><li>包年包月：预付费</li><li>按量计费：基于不同内存规格，三级阶梯计费。</li></ul></li></ul><p><code>使用时间越长,价格越低</code></p><table><thead><tr><th><strong>阶梯区间</strong></th><th><strong>阶梯单价（某区域 4G内存）</strong></th><th><strong>存储单价（某区域）</strong></th></tr></thead><tbody><tr><td>0＜T1≤96小时</td><td>1.51  元/小时</td><td>0.0029  元/GB/小时</td></tr><tr><td>96小时＜T2≤360小时</td><td>1.125  元/小时</td><td>0.0029  元/GB/小时</td></tr><tr><td>T3＞360小时</td><td>0.75 元/小时</td><td>0.0029  元/GB/小时</td></tr></tbody></table><p>​                                                                                            备注：此处价格仅供下页的计费案例参考，实际以官网为准。</p><ul><li><p><strong>按量计费场景</strong></p><ul><li><p>用户在某区购买一台内存为 4G，硬盘为 50 GB 的文档数据库 MongoDB 的高 IO 万兆型副本集实例，连续使用 30 天（即720 小时）。</p></li><li><p><strong>费用计算：</strong></p><p>内存费用：1.51 * 96+1.125 * 264+0.75 * 360 =711.96；</p><p>存储费用：0.0029 * 50 * 720 = 104.4；</p><p>总费用为：711.96 + 104.4 = 816.36 元/月。</p></li></ul></li></ul><h3 id="Redis-计费"><a href="#Redis-计费" class="headerlink" title="Redis 计费"></a>Redis 计费</h3><ul><li><p><strong>基于内存使用量计费：</strong></p><ul><li>包年包月：预付费</li><li>按量计费：<ul><li>按秒计费，按小时结算；购买时冻结1小时费用；基于使用时长阶梯分段计费。</li></ul></li></ul><table><thead><tr><th><strong>阶梯区间</strong></th><th><strong>阶梯单价（仅供参考，官网为准）</strong></th></tr></thead><tbody><tr><td>0＜T1≤96小时</td><td>0.21元/小时</td></tr><tr><td>96小时＜T2≤360小时</td><td>0.16  元/小时</td></tr><tr><td>T3＞360小时</td><td>0.11元/小时</td></tr></tbody></table></li><li><p>用户在广州二区购买云数据库 Redis 实例，容量为 1GB，购买数量为 1 台，连续使用 30 天（即 720 小时）。</p></li><li><p><strong>费用计算：</strong></p><ul><li>T1 区间：0.21元/小时 * 96 小时=20.16元；</li><li>T2 区间：0.16 元/小时 * 264 小时=42.24元；</li><li>T3 区间：0.11元/小时 * 360 小时=39.60 元；</li><li>总计：20.16+42.24+39.60=102 元。</li></ul></li></ul><h3 id="Memcached-计费"><a href="#Memcached-计费" class="headerlink" title="Memcached 计费"></a>Memcached 计费</h3><p><font color="red">Memcached 和 Redis 的计费差别在于 Redis 是按秒计费，Memcached 是按天计费</font></p><ul><li><strong>基于内存使用量，按量计费：</strong><ul><li>按天计费，按月结算，每月2、3号进行结算扣费。</li><li>q每日费用 = 每日内存最大值 x 单价；</li></ul></li></ul><table><thead><tr><th>地域</th><th>每 G 内存价格（仅供参考，官网为准）</th></tr></thead><tbody><tr><td>北京、上海、广州</td><td>2 元/天</td></tr><tr><td>中国香港、多伦多</td><td>2.5 元/天</td></tr></tbody></table><h3 id="TcaplusDB-计费"><a href="#TcaplusDB-计费" class="headerlink" title="TcaplusDB 计费"></a>TcaplusDB 计费</h3><ul><li><strong>TcaplusDB</strong> <strong>每日费用</strong> <strong>=</strong> <strong>容量每日费用</strong> <strong>+</strong> <strong>预留读每日费用</strong> <strong>+</strong> <strong>预留写每日费用</strong>          </li></ul><p>​                                                                                                                                                                                                            <img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103174329940.png" alt="image-20230103174329940" style="zoom:50%;"></p><table><thead><tr><th><strong>地区</strong></th><th><strong>容量（元/GB/天）</strong></th><th><strong>预留读（元/CU/天）</strong></th><th><strong>预留写（元/CU/天）</strong></th></tr></thead><tbody><tr><td>中国大陆</td><td>0.036</td><td>0.013</td><td>0.030</td></tr><tr><td>北美</td><td>0.040</td><td>0.014</td><td>0.038</td></tr><tr><td>德国法兰克福</td><td>0.041</td><td>0.015</td><td>0.039</td></tr><tr><td>新加坡</td><td>0.042</td><td>0.017</td><td>0.040</td></tr><tr><td>中国香港、日本</td><td>0.038</td><td>0.013</td><td>0.038</td></tr></tbody></table><h2 id="课程总结-5"><a href="#课程总结-5" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了<ul><li>数据库基础知识：SQL对比NoSQL、主流NoSQL、数据库趋势</li><li>腾讯云关系型数据库：MySQL、SQL Server，PostgreSQL，MariaDB/TDSQL、CynosDB</li><li>腾讯云非关系型数据库：MongoDB，Redis/Memcached，CTSDB，TcaplusDB</li><li>腾讯数据库服务：TData、DTS</li><li>腾讯云数据库计费方案：包年包月、按量计费</li></ul></li></ul><h1 id="腾讯云安全产品介绍"><a href="#腾讯云安全产品介绍" class="headerlink" title="腾讯云安全产品介绍"></a>腾讯云安全产品介绍</h1><h2 id="云安全体系与标准"><a href="#云安全体系与标准" class="headerlink" title="云安全体系与标准"></a>云安全体系与标准</h2><h3 id="云安全基本原则"><a href="#云安全基本原则" class="headerlink" title="云安全基本原则"></a>云安全基本原则</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102210059576.png" alt="image-20230102210059576" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102210109796.png" alt="image-20230102210109796" style="zoom:50%;"><h3 id="云安全标准与技术"><a href="#云安全标准与技术" class="headerlink" title="云安全标准与技术"></a>云安全标准与技术</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102210126162.png" alt="image-20230102210126162" style="zoom:50%;"><h4 id="云安全指南-4-0"><a href="#云安全指南-4-0" class="headerlink" title="云安全指南 4.0"></a>云安全指南 4.0</h4><ul><li><strong>CSA4.0 定义两大类13 个领域，介绍战略和战术上云安全的痛点与措施。</strong></li><li><strong>治理域（战略/策略）</strong><ul><li>治理和企业风险管理</li><li>法律问题:合同和电子举证</li><li>合规性和审计管理</li><li>信息治理</li></ul></li><li><strong>运行域（战术/技术）</strong><ul><li>管理平面和业务连续性 </li><li>基础设施安全 </li><li>虚拟化及容器 (Container)技 术 </li><li>事件响应、通告 和补救 </li><li>应用安全 </li><li>数据安全和加密 </li><li>身份、授权和访问管理 </li><li>安全即服务 </li><li>相关技术 </li></ul></li></ul><h4 id="等级保护标准-2-0"><a href="#等级保护标准-2-0" class="headerlink" title="等级保护标准 2.0"></a>等级保护标准 2.0</h4><ul><li><strong>云等保 2.0 架构为两大部分（管理领域和技术领域），重点考虑合规性</strong></li><li><strong>管理要求：</strong><ul><li>安全管理机构和人员</li><li>安全建设管理</li><li>安全运维管理</li><li>安全策略和管理制度</li></ul></li><li><strong>技术要求：</strong><ul><li>物流和环境安全</li><li>网络和通信安全</li><li>设备和计算安全</li><li>应用和数据安全</li></ul></li></ul><h4 id="可信云服务认证"><a href="#可信云服务认证" class="headerlink" title="可信云服务认证"></a>可信云服务认证</h4><ul><li>可信云服务（TRUCS）认证是我国目前唯一针对云服务的权威认证体系。</li><li>三大类16个指标覆盖云服务商承诺的服务的 SLA 中 90% 的问题。</li><li>腾讯云多个业务通过可信云服务认证、首批通过可信云金牌运维专项评估。</li></ul><table><thead><tr><th><strong>数据安全</strong></th><th><strong>服务质量</strong></th><th><strong>权益保障</strong></th></tr></thead><tbody><tr><td>1.数据存储的持久  2.数据可迁移性  3.数据保密性  4.数据知情权  5.数据可审查性</td><td>6.业务功能、  7.业务可用性  8.业务弹性、  9.故障恢复能力、  10.网络接入性能、  11.服务计量准确性、</td><td>12.服务变更  13.终止条款  14.服务赔偿条款  15.用户约束条款</td></tr></tbody></table><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102210700301.png" alt="image-20230102210700301" style="zoom:67%;"><h4 id="Gartner-十大安全项目"><a href="#Gartner-十大安全项目" class="headerlink" title="Gartner 十大安全项目"></a>Gartner 十大安全项目</h4><p>​                                                                                                                       Gartner十大安全项目</p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102210814016.png" alt="image-20230102210814016" style="zoom: 67%;"><ol><li><p>Privileged Access Management，特权账户管理（PAM）</p></li><li><p>CARTA-Inspired Vulnerability Management，符合CARTA方法论的弱点管理</p></li><li><p>Detection and Response，检测与响应</p></li><li><p>Cloud Security Posture Management，云安全配置管理（CSPM）</p></li><li><p>Cloud Access Security Broker，云访问安全代理（CASB）</p></li><li><p>Business Email Compromise，商业邮件失陷</p></li><li><p>Dark Data Discovery，暗数据发现</p></li><li><p>Security Incident Response，安全事件响应</p></li><li><p>Container Security，容器安全</p></li><li><p>Security Rating Services，安全评级服务</p></li></ol><h3 id="常见安全威胁"><a href="#常见安全威胁" class="headerlink" title="常见安全威胁"></a>常见安全威胁</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102210915934.png" alt="image-20230102210915934" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102210950690.png" alt="image-20230102210950690" style="zoom:50%;"><h3 id="从传统安全到互联网安全"><a href="#从传统安全到互联网安全" class="headerlink" title="从传统安全到互联网安全"></a>从传统安全到互联网安全</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211016182.png" alt="image-20230102211016182" style="zoom:67%;"><h3 id="腾讯云安全体系"><a href="#腾讯云安全体系" class="headerlink" title="腾讯云安全体系"></a>腾讯云安全体系</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211035403.png" alt="image-20230102211035403" style="zoom:50%;"><h2 id="网络安全产品"><a href="#网络安全产品" class="headerlink" title="网络安全产品"></a>网络安全产品</h2><h3 id="DDoS-防护概述"><a href="#DDoS-防护概述" class="headerlink" title="DDoS 防护概述"></a>DDoS 防护概述</h3><ul><li>海量终端覆盖-腾讯云掌握DDoS攻击的整个黑色产业链</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211322630.png" alt="image-20230102211322630" style="zoom: 50%;"><p>DDoS攻击低廉的成本：100G以下的攻击流量，只需客户付费 <font color="red">200</font> 元攻击一次，<font color="red">600 元</font>就能包攻击一天，变现方式主要是通过勒索邮件，以及同行业之间的恶意竞争攻击</p><ul><li>DDoS 防护的子产品</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211428862.png" alt="image-20230102211428862" style="zoom:50%;"><h3 id="技术原理"><a href="#技术原理" class="headerlink" title="技术原理"></a>技术原理</h3><ul><li>防护架构</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211501479.png" alt="image-20230102211501479" style="zoom:50%;"><ul><li>防护流程</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211541617.png" alt="image-20230102211541617" style="zoom:50%;"><p>​                                                                   客户把腾讯云高防IP作为业务IP，将攻击流量引流至腾讯高防机房，清洗后回源到客户源站</p><h3 id="产品优势"><a href="#产品优势" class="headerlink" title="产品优势"></a>产品优势</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211641050.png" alt="image-20230102211641050" style="zoom:50%;"><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211702086.png" alt="image-20230102211702086" style="zoom:50%;"><h3 id="DDoS-防护计费方案"><a href="#DDoS-防护计费方案" class="headerlink" title="DDoS 防护计费方案"></a>DDoS 防护计费方案</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102211717779.png" alt="image-20230102211717779" style="zoom: 67%;"><h4 id="BGP-高防包计费"><a href="#BGP-高防包计费" class="headerlink" title="BGP 高防包计费"></a><strong>BGP 高防包计费</strong></h4><ul><li><strong>BGP</strong> <strong>高防包费用：</strong>保底防护峰值 + 弹性防护峰值</li><li><strong>基于高防包类型：</strong>独享型 （单IP）、共享型（多IP）</li></ul><table><thead><tr><th><strong>计费项</strong></th><th><strong>计费模式</strong></th><th><strong>付费说明</strong></th></tr></thead><tbody><tr><td>保底防护峰值</td><td>包年包月、预付费</td><td>• 提供基础防护带宽，价格由保底防护峰值和购买时长确定，防护级别只升不降。</td></tr><tr><td>弹性防护峰值</td><td>按天计费、后付费</td><td>• 触发弹性防护后，按当天最高攻击峰值所对应的弹性防护峰值区间计费。支持升级、降级配置。</td></tr></tbody></table><h4 id="BGP-高防-IP-计费"><a href="#BGP-高防-IP-计费" class="headerlink" title="BGP 高防 IP 计费"></a>BGP 高防 IP 计费</h4><ul><li><strong>BGP 高防 IP：</strong> 保底防护峰值 + 弹性防护峰值 + 转发规则数 + 转发带宽</li></ul><table><thead><tr><th><strong>计费项</strong></th><th><strong>计费模式</strong></th><th><strong>付费说明</strong></th></tr></thead><tbody><tr><td>保底防护峰值</td><td>包年包月、预付费</td><td>• 提供基础防护带宽，价格由保底防护峰值和购买时长确定，防护级别只升不降。</td></tr><tr><td>弹性防护峰值</td><td>按天计费、后付费</td><td>• 触发弹性防护后，按当天最高攻击峰值所对应的弹性防护峰值区间计费。支持升级、降级配置。</td></tr><tr><td>转发规则数</td><td>包年包月按个数，后付费</td><td>• 免费提供60个，超额的按500元/月/10个</td></tr><tr><td>转发带宽</td><td>包年包月按带宽、预付费</td><td>• 清洗后转发回源带宽，免费100Mbps，超过需购买</td></tr></tbody></table><h4 id="棋牌盾计费"><a href="#棋牌盾计费" class="headerlink" title="棋牌盾计费"></a>棋牌盾计费</h4><ul><li><strong>棋牌盾：</strong>按IP个数计费，按年购买</li></ul><table><thead><tr><th><strong>套餐（IP 个数）</strong></th><th><strong>价格（元/年）</strong></th></tr></thead><tbody><tr><td>20</td><td>500,000</td></tr><tr><td>30</td><td>650,000</td></tr><tr><td>40</td><td>800,000</td></tr><tr><td>50</td><td>1,000,000</td></tr><tr><td>60</td><td>1,200,000</td></tr><tr><td>80</td><td>1,500,000</td></tr><tr><td>100</td><td>1,800,000</td></tr></tbody></table><ul><li>棋牌盾 IP 数与业务带宽及七层请求数对应关系</li></ul><table><thead><tr><th><strong>IP</strong> <strong>数</strong></th><th><strong>带宽</strong></th><th><strong>HTTP</strong></th><th><strong>HTTPS</strong></th></tr></thead><tbody><tr><td>20  - 30</td><td>100Mbps</td><td>3000QPS</td><td>3000QPS</td></tr><tr><td>40  - 60</td><td>150Mbps</td><td>5000QPS</td><td>3500QPS</td></tr><tr><td>80  - 100</td><td>200Mbps</td><td>7000QPS</td><td>4000QPS</td></tr></tbody></table><p>​                                                                                                            价格可能有所变动，以官网为准</p><h4 id="DDoS-计费示例"><a href="#DDoS-计费示例" class="headerlink" title="DDoS 计费示例"></a>DDoS 计费示例</h4><ul><li>用户在上海区域购买了一个独享型单 IP 的 BGP 高防包，规格是“20Gbps 保底防护峰值+50Gbps 弹性防护峰值”。若当天发生 DDoS 攻击事件且最高攻击流量峰值为 45Gbps，超过保底防护峰值范围且使用了弹性防护峰值。</li><li>费用计算：<ul><li>保底防护费用：6000元</li><li>弹性防护费用：5700元</li><li>费用总计：11700元</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102212237503.png" alt="image-20230102212237503" style="zoom:95%;"><h2 id="主机安全产品"><a href="#主机安全产品" class="headerlink" title="主机安全产品"></a>主机安全产品</h2><h3 id="主机安全主要功能"><a href="#主机安全主要功能" class="headerlink" title="主机安全主要功能"></a>主机安全主要功能</h3><ul><li>企业主机安全管理面临的挑战</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102212410714.png" alt="image-20230102212410714" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102212421832.png" alt="image-20230102212421832" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102212728638.png" alt="image-20230102212728638" style="zoom: 67%;"><h3 id="主机安全技术原理"><a href="#主机安全技术原理" class="headerlink" title="主机安全技术原理"></a>主机安全技术原理</h3><ul><li>基于主机安全强大漏洞策略库漏洞风险管理</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102212806350.png" alt="image-20230102212806350" style="zoom:67%;"><ul><li>充分利用云的优势对密码破解行为进行拦截</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102212832046.png" alt="image-20230102212832046" style="zoom: 50%;"><ul><li>基于 AI 的 WebShell 检测技术</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102212909263.png" alt="image-20230102212909263" style="zoom:50%;"><ul><li>基于腾讯电脑管家的恶意文件检测能力</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102213005747.png" alt="image-20230102213005747" style="zoom:50%;"><h3 id="主机安全应用"><a href="#主机安全应用" class="headerlink" title="主机安全应用"></a>主机安全应用</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102213032103.png" alt="image-20230102213032103" style="zoom:50%;"><h4 id="公有云场景"><a href="#公有云场景" class="headerlink" title="公有云场景"></a>公有云场景</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102213057352.png" alt="image-20230102213057352" style="zoom:50%;"><p>私有云场景</p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102213115834.png" alt="image-20230102213115834" style="zoom:50%;"><h3 id="主机安全计费方案"><a href="#主机安全计费方案" class="headerlink" title="主机安全计费方案"></a>主机安全计费方案</h3><ul><li><strong>基础防护：</strong>可以免费使用，功能受限</li><li><strong>专业防护：</strong><ul><li><strong>按量计费：后付费</strong><ul><li>按开通专业防护的主机数量计费；</li><li>按天计费<strong>，</strong>北京时间每日凌晨两点扣费。</li></ul></li><li><strong>包年包月：</strong>预付费，xx 元/月</li></ul></li></ul><h2 id="网站安全产品"><a href="#网站安全产品" class="headerlink" title="网站安全产品"></a>网站安全产品</h2><h3 id="Web-应用防火墙概述"><a href="#Web-应用防火墙概述" class="headerlink" title="Web 应用防火墙概述"></a>Web 应用防火墙概述</h3><ul><li>高危网站类型</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102213445139.png" alt="image-20230102213445139" style="zoom:50%;"><ul><li><p>WAF (Web Application Firewall) 是最常用最有效的Web应用保护方案。 </p><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102213515298.png" alt="image-20230102213515298" style="zoom:50%;"></li><li><p>腾讯云Web应用防火墙为WAF为智能一站式网站安全防护平台：</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102213646463.png" alt="image-20230102213646463" style="zoom:50%;"><h3 id="WAF-技术原理"><a href="#WAF-技术原理" class="headerlink" title="WAF 技术原理"></a>WAF 技术原理</h3><ul><li><strong>攻击前：</strong>7x24h实时监测分析安全隐患；</li><li><strong>攻击中：</strong>识别与拦截恶意攻击、垃圾访问</li><li><strong>攻击后：</strong>通过云备份保障网页内容的正常显示。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232106973.png" alt="image-20230102232106973" style="zoom: 80%;"><ul><li><strong>反向代理 + 检测云：</strong><ul><li>业务侧更改DNS记录后，将流量转发给反向代理；</li><li>反向代理的安全模块接收到用户请求，封装后发送到检测云。</li><li>检测云收到请求并进行检测处理，然后把正常流量发送到业务服务器。</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232151932.png" alt="image-20230102232151932" style="zoom:80%;"><ul><li><strong>WAF 常用策略：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232220404.png" alt="image-20230102232220404" style="zoom:65%;"><h3 id="WAF-产品优势"><a href="#WAF-产品优势" class="headerlink" title="WAF 产品优势"></a>WAF 产品优势</h3><ul><li><strong>久经考验的Web业务安全防护实践体系</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232302039.png" alt="image-20230102232302039" style="zoom:65%;"><ul><li><strong>AI + 规则 双引擎检测</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232327219.png" alt="image-20230102232327219" style="zoom: 65%;"><ul><li>自身高性能、高可靠</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232351236.png" alt="image-20230102232351236" style="zoom:65%;"><h3 id="WAF-应用场景"><a href="#WAF-应用场景" class="headerlink" title="WAF 应用场景"></a>WAF 应用场景</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232403660.png" alt="image-20230102232403660" style="zoom: 50%;"><h3 id="WAF-计费方案"><a href="#WAF-计费方案" class="headerlink" title="WAF 计费方案"></a>WAF 计费方案</h3><ul><li><strong>WAF 费用：</strong>基础防护套餐 + 扩展包</li><li><strong>付费方式：</strong>按月预付费</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232449900.png" alt="image-20230102232449900" style="zoom:67%;"><h3 id="Web-漏洞扫描"><a href="#Web-漏洞扫描" class="headerlink" title="Web 漏洞扫描"></a>Web 漏洞扫描</h3><ul><li>腾讯云 Web 漏洞扫描是用于监测网站漏洞的安全服务，为企业提供 7 * 24 小时全面准确的漏洞监测和专业的修复建议。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102232513445.png" alt="image-20230102232513445" style="zoom:80%;"><ul><li>Web 漏洞扫描按域名的扫描次数进行收费，预付费。</li></ul><h2 id="业务安全产品"><a href="#业务安全产品" class="headerlink" title="业务安全产品"></a>业务安全产品</h2><h3 id="业务安全防护方案"><a href="#业务安全防护方案" class="headerlink" title="业务安全防护方案"></a>业务安全防护方案</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233211209.png" alt="image-20230102233211209" style="zoom:50%;"><h3 id="天御业务安全"><a href="#天御业务安全" class="headerlink" title="天御业务安全"></a>天御业务安全</h3><ul><li><strong>黑产（薅羊毛）已经产业化：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233246220.png" alt="image-20230102233246220" style="zoom: 60%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233259775.png" alt="image-20230102233259775" style="zoom:60%;"><h4 id="注册保护"><a href="#注册保护" class="headerlink" title="注册保护"></a>注册保护</h4><ul><li><strong>注册保护流程：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233333959.png" alt="image-20230102233333959" style="zoom:50%;"><h4 id="登录保护"><a href="#登录保护" class="headerlink" title="登录保护"></a>登录保护</h4><ul><li>登录保护服务（LoginProtection，LP）针对网站和 APP 的用户登录场景，实时检测是否存在盗号、撞库等恶意登录行为，帮助开发者发现异常登录，降低恶意用户登录给业务带来的风险。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233403060.png" alt="image-20230102233403060" style="zoom: 67%;"><h4 id="活动防刷"><a href="#活动防刷" class="headerlink" title="活动防刷"></a>活动防刷</h4><ul><li><strong>防刷流程（登录、注册、活动）：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233433264.png" alt="image-20230102233433264" style="zoom:60%;"><h4 id="营销风控"><a href="#营销风控" class="headerlink" title="营销风控"></a>营销风控</h4><ul><li>利用微信、QQ 等平台进行一物一码营销，发放红包、实物等奖励，营销风控帮助您进行风险识别和拦截，精准打击羊毛党、黄牛党，最大程度上提升商家的资金利用率，减少不必要的损失。使得真实用户能较为便捷地获得较大利益，从而提升用户粘性，加大品牌影响力<strong>：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233503523.png" alt="image-20230102233503523" style="zoom:67%;"><h4 id="验证码服务"><a href="#验证码服务" class="headerlink" title="验证码服务"></a>验证码服务</h4><ul><li>腾讯云验证码服务 （Captcha）是针对网站、App 开发者提供安全智能的验证码服务，基于腾讯多年技术沉淀，最大程度地保护业务安全。同时便捷的设计可以减少交互，让开发者不再担心因验证码难以识别而导致用户流失</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233527649.png" alt="image-20230102233527649" style="zoom:80%;"><h4 id="活动防刷-营销风控技术原理"><a href="#活动防刷-营销风控技术原理" class="headerlink" title="活动防刷 / 营销风控技术原理"></a>活动防刷 / 营销风控技术原理</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233618290.png" alt="image-20230102233618290" style="zoom: 60%;"><h4 id="天御业务安全防护方案优势"><a href="#天御业务安全防护方案优势" class="headerlink" title="天御业务安全防护方案优势"></a>天御业务安全防护方案优势</h4><ul><li>基于腾讯在电商、金融、社交、游戏等行业的运营和对抗经验。积累了业内领先的对抗模型和黑产大数据。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233703799.png" alt="image-20230102233703799" style="zoom: 50%;"><h3 id="天域借贷反欺诈服务"><a href="#天域借贷反欺诈服务" class="headerlink" title="天域借贷反欺诈服务"></a>天域借贷反欺诈服务</h3><ul><li><strong>金融风控关键挑战：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233744511.png" alt="image-20230102233744511" style="zoom: 50%;"><h4 id="借贷反欺诈-AF"><a href="#借贷反欺诈-AF" class="headerlink" title="借贷反欺诈 AF"></a>借贷反欺诈 AF</h4><ul><li>天御借贷反欺诈（AntiFraud，AF）专注于识别金融行业的欺诈风险。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233819990.png" alt="image-20230102233819990" style="zoom: 50%;"><h4 id="AF-技术原理"><a href="#AF-技术原理" class="headerlink" title="AF 技术原理"></a>AF 技术原理</h4><ul><li>输入手机号、ip、手机设备标识、身份证号、银行卡等信息；</li><li>天御返回风险等级，取值0-100，值越大表示风险等级越高。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233912259.png" alt="image-20230102233912259" style="zoom: 67%;"><h4 id="天御借贷反欺诈优势"><a href="#天御借贷反欺诈优势" class="headerlink" title="天御借贷反欺诈优势"></a>天御借贷反欺诈优势</h4><ul><li><strong>实战经验：</strong>应用与丰富的金融服务，连接亿万用户</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102233951990.png" alt="image-20230102233951990" style="zoom: 67%;"><ul><li><strong>AI + 大数据：</strong>从上千维度中选择40余个数据维度，有效识别业务的欺诈风险。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234020881.png" alt="image-20230102234020881" style="zoom: 50%;"><h4 id="天御借贷反欺诈场景"><a href="#天御借贷反欺诈场景" class="headerlink" title="天御借贷反欺诈场景"></a>天御借贷反欺诈场景</h4><ul><li><strong>申请贷款：</strong>适用于银行、互金、P2P 等金融行业的借贷场景，有效提高欺诈风险识别能力：<ul><li>降低成本</li><li>灵活控制</li><li>加快放款速度</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234125056.png" alt="image-20230102234125056" style="zoom:67%;"><h3 id="业务安全产品计费方案"><a href="#业务安全产品计费方案" class="headerlink" title="业务安全产品计费方案"></a>业务安全产品计费方案</h3><table><thead><tr><th><strong>产品</strong></th><th><strong>计费方案</strong></th></tr></thead><tbody><tr><td>活动防刷/营销风控</td><td>按调用次数包年套餐，超出套餐的按次数区间表月结。</td></tr><tr><td>注册保护</td><td>提供按次调用的包年套餐</td></tr><tr><td>登录保护</td><td>基于每日防护上限次数，包年包月（包年价=包月价*10）</td></tr><tr><td>验证码服务</td><td>基于每日防护上限次数，包年包月（包年价=包月价*10）</td></tr><tr><td>借贷反欺诈AF</td><td>按调用次数后付费（折扣有效），可选日结或月结。</td></tr></tbody></table><p>​                                                                    备注：各服务对企业认证用户提供 7 天免费体验（含 1000 次调用），可提工单定制报价。</p><h2 id="移动安全产品——应用安全"><a href="#移动安全产品——应用安全" class="headerlink" title="移动安全产品——应用安全"></a>移动安全产品——应用安全</h2><h3 id="应用安全概述"><a href="#应用安全概述" class="headerlink" title="应用安全概述"></a>应用安全概述</h3><ul><li>什么是APP漏洞？又能有什么危害？</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234322868.png" alt="image-20230102234322868" style="zoom:67%;"><p>​                                                            2016年央视315，现场演示监听APP流量，曝光用户隐私的过程。应用若存在漏洞，风险可窥一斑。</p><ul><li>金融 APP 十大安全隐患：<ul><li>信息数据明文发送</li><li>通信数据可解密</li><li>敏感数据本地可破解</li><li>调试信息泄漏</li><li>敏感信息泄漏</li><li>密码学误用</li><li>功能泄露</li><li>可二次打包</li><li>可调试</li><li>代码可逆向等</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234510198.png" alt="image-20230102234510198" style="zoom: 50%;"><p>​                                                                                                        数据来源：腾讯云应用安全的2016年统计</p><ul><li>腾讯云移动应用安全提供全生命周期的一站式安全解决方案。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234600758.png" alt="image-20230102234600758" style="zoom:50%;"><h3 id="MS-技术原理"><a href="#MS-技术原理" class="headerlink" title="MS 技术原理"></a>MS 技术原理</h3><ul><li><strong>腾讯自研漏洞扫描引擎</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234639196.png" alt="image-20230102234639196" style="zoom: 67%;"><ul><li><strong>应用加固服务</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234715086.png" alt="image-20230102234715086" style="zoom:67%;"><h3 id="MS-产品优势"><a href="#MS-产品优势" class="headerlink" title="MS 产品优势"></a>MS 产品优势</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234731774.png" alt="image-20230102234731774" style="zoom:50%;"><h3 id="MS-应用场景"><a href="#MS-应用场景" class="headerlink" title="MS 应用场景"></a>MS 应用场景</h3><ul><li><strong>1. 应用自主研发</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234757497.png" alt="image-20230102234757497" style="zoom:60%;"><ul><li><strong>2. 应用外包研发</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102234945331.png" alt="image-20230102234945331" style="zoom:85%;"><ul><li><strong>3. 应用分发</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235030898.png" alt="image-20230102235030898" style="zoom:80%;"><h2 id="安全产品计费方案总结"><a href="#安全产品计费方案总结" class="headerlink" title="安全产品计费方案总结"></a><strong>安全产品计费方案总结</strong></h2><table><thead><tr><th><strong>产品</strong></th><th><strong>计费方案</strong></th></tr></thead><tbody><tr><td><strong>主机安全</strong></td><td>基础防护：免费  专业防护：按天计费、包年包月</td></tr><tr><td><strong>DDoS 防护</strong></td><td>基础防护：免费  BGP 高防包：保底防护峰值  + 弹性防护峰值  BGP 高防IP：  保底防护峰值 +  弹性防护峰值 +  转发规则数 + 转发带宽  棋牌盾：按需购买棋牌盾 IP，按年预付费</td></tr><tr><td><strong>Web 应用防火墙</strong></td><td>基础防护套餐 （高级版、企业版、旗舰版） +  扩展包 （域名包、带宽包、QPS包）</td></tr><tr><td><strong>业务安全</strong></td><td>活动防刷：按调用次数包年套餐，超出套餐的按次数区间表月结。  注册保护：提供按次调用的包年套餐  登录保护/验证码服务：基于每日防护上限次数，包年包月（包年价=包月价*10）  借贷反欺诈：按调用次数后付费（折扣有效），可选日结或月结。</td></tr><tr><td><strong>移动安全</strong></td><td>按次计费与包年包月</td></tr></tbody></table><h2 id="课程总结-6"><a href="#课程总结-6" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了<ul><li>云安全体系与标准：云安全原则、安全责任共担模型、CSA4.0、等保2.0、可信云、云安全威胁、腾讯云安全体系。</li><li>腾讯云主流安全产品：大禹、云镜、网站管家、天御、应用安全功能，原理，优势、应用与计费方案。</li></ul></li></ul><h1 id="腾讯云视频与通信服务介绍"><a href="#腾讯云视频与通信服务介绍" class="headerlink" title="腾讯云视频与通信服务介绍"></a>腾讯云视频与通信服务介绍</h1><h2 id="音视频基础知识"><a href="#音视频基础知识" class="headerlink" title="音视频基础知识"></a>音视频基础知识</h2><h3 id="音视频主要场景"><a href="#音视频主要场景" class="headerlink" title="音视频主要场景"></a>音视频主要场景</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235504600.png" alt="image-20230102235504600" style="zoom: 80%;"><h4 id="音视频主要场景介绍"><a href="#音视频主要场景介绍" class="headerlink" title="音视频主要场景介绍"></a>音视频主要场景介绍</h4><h4 id><a href="#" class="headerlink" title></a><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235532777.png" alt="image-20230102235532777" style="zoom:50%;"></h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235557551.png" alt="image-20230102235557551" style="zoom:50%;"><h4 id="音视频场景：点播"><a href="#音视频场景：点播" class="headerlink" title="音视频场景：点播"></a>音视频场景：点播</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235749323.png" alt="image-20230102235749323" style="zoom:50%;"><h4 id="音视频场景：直播"><a href="#音视频场景：直播" class="headerlink" title="音视频场景：直播"></a>音视频场景：直播</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235806685.png" alt="image-20230102235806685" style="zoom:50%;"><h4 id="音视频场景：互动直播"><a href="#音视频场景：互动直播" class="headerlink" title="音视频场景：互动直播"></a>音视频场景：互动直播</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235827200.png" alt="image-20230102235827200" style="zoom: 50%;"><h4 id="音视频场景：旁路直播"><a href="#音视频场景：旁路直播" class="headerlink" title="音视频场景：旁路直播"></a>音视频场景：旁路直播</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235850593.png" alt="image-20230102235850593" style="zoom:50%;"><h3 id="音视频技术原理"><a href="#音视频技术原理" class="headerlink" title="音视频技术原理"></a>音视频技术原理</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235902641.png" alt="image-20230102235902641" style="zoom: 67%;"><h4 id="音视频技术原理概述"><a href="#音视频技术原理概述" class="headerlink" title="音视频技术原理概述"></a>音视频技术原理概述</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235927227.png" alt="image-20230102235927227" style="zoom: 50%;"><h4 id="音视频技术原理：推流"><a href="#音视频技术原理：推流" class="headerlink" title="音视频技术原理：推流"></a>音视频技术原理：推流</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230102235949626.png" alt="image-20230102235949626" style="zoom:50%;"><h4 id="音视频技术原理：拉流"><a href="#音视频技术原理：拉流" class="headerlink" title="音视频技术原理：拉流"></a>音视频技术原理：拉流</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103000010186.png" alt="image-20230103000010186" style="zoom:50%;"><h3 id="音视频传输协议"><a href="#音视频传输协议" class="headerlink" title="音视频传输协议"></a>音视频传输协议</h3><table><thead><tr><th><strong>协议</strong></th><th><strong>RTMP</strong></th><th><strong>HLS</strong></th><th><strong>HDL（HTTP-FLV）</strong></th><th><strong>私有协议</strong></th></tr></thead><tbody><tr><td><strong>协议</strong></td><td>TCP长连接</td><td>HTTP短连接</td><td>HTTP长连接</td><td>通常为UDP</td></tr><tr><td><strong>原理</strong></td><td>每个时刻的数据收到后立刻转发</td><td>集合一段时间的数据，生成ts切片文件(三片)，并更新m3u8索引</td><td>同RTMP，使用HTTP协议（80端口）</td><td>基于UDP进行私有的封装处理</td></tr><tr><td><strong>延时</strong></td><td>1-3秒</td><td>5-20秒(依切片情况)</td><td>1-3秒</td><td>最小可达100ms</td></tr><tr><td><strong>H5 支持</strong></td><td>需要使用插件</td><td>支持H5</td><td>需要使用插件</td><td>根据私有协议的实现来确认是否支持</td></tr><tr><td><strong>其他</strong></td><td>需要Flash技术支持</td><td>播放时需要多次请求，对于网络质量要求高</td><td>需要Flash技术支持</td><td>非标准协议，通用性不强，需要特定的软件支持</td></tr></tbody></table><h3 id="音视频基本参数"><a href="#音视频基本参数" class="headerlink" title="音视频基本参数"></a>音视频基本参数</h3><table><thead><tr><th><strong>参数名称</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td><strong>码率</strong></td><td>也称比特率（bit  rate），单位是bps，指单位时间内的数据量，1  Byte=8 bit。</td></tr><tr><td><strong>分辨率</strong></td><td>也叫清晰度(resolution)，指画面尺寸大小，通常表示为“横向像素数×纵向像素数，如1280×720等。通常码率固定时，分辨率越大，画面越模糊；分辨率固定时，码率越高，画面越清晰。</td></tr><tr><td><strong>帧率</strong></td><td>帧指视频中每个静止画面，每秒内显示的帧数称为帧率（frame  rate），单位是fps（frame  per second），通常帧率越高，画面越流畅。</td></tr><tr><td><strong>采样率</strong></td><td>采样率（sample  rate）表示音频信号每秒内采样的次数，单位是Hz，常用44100Hz（CD音乐）或48000Hz（录音室）。</td></tr><tr><td><strong>位宽</strong></td><td>采样位宽（sample  size），指记录每一个采样点使用的bit位数，常用的位宽是8bit或16bit。</td></tr><tr><td><strong>声道数</strong></td><td>声道（sound  channel）指声音里相互独立的音频信号，单声道指只有一条独立的音频信号，双声道（也叫立体声）就是有两条独立的音频信号。</td></tr></tbody></table><h3 id="即时通信基本概念与场景"><a href="#即时通信基本概念与场景" class="headerlink" title="即时通信基本概念与场景"></a>即时通信基本概念与场景</h3><table><thead><tr><th><strong>概念</strong></th><th><strong>具体说明</strong></th></tr></thead><tbody><tr><td>账号</td><td>• 标识唯一的一个用户  • 需要提供账号鉴权机制</td></tr><tr><td>资料</td><td>• 标记用户的特性</td></tr><tr><td>关系链</td><td>• 标记账号之间的关系</td></tr><tr><td>消息</td><td>• 消息类型：文本、图片、多媒体、自定义等；  • 发送方式：在线接收/离线推送。</td></tr><tr><td>状态</td><td>• 用户状态：在线/离线/隐身</td></tr><tr><td>场景</td><td>• 单聊、群聊、聊天室</td></tr></tbody></table><table><thead><tr><th></th><th><strong>论坛</strong></th><th><strong>单聊</strong></th><th><strong>群聊</strong></th><th><strong>聊天室</strong></th></tr></thead><tbody><tr><td><strong>参与人数</strong></td><td>众多</td><td>少</td><td>有限</td><td>众多</td></tr><tr><td><strong>即时性</strong></td><td>弱</td><td>高</td><td>高</td><td>高</td></tr><tr><td><strong>离线消息关注度</strong></td><td>弱</td><td>高</td><td>高</td><td>弱</td></tr><tr><td><strong>历史消息关注度</strong></td><td>弱</td><td>高</td><td>高</td><td>弱</td></tr><tr><td><strong>主体</strong></td><td>版块/话题</td><td>好友</td><td>群组</td><td>房间/频道</td></tr></tbody></table><h2 id="腾讯云视频服务"><a href="#腾讯云视频服务" class="headerlink" title="腾讯云视频服务"></a>腾讯云视频服务</h2><h3 id="视频业务发展现状"><a href="#视频业务发展现状" class="headerlink" title="视频业务发展现状"></a>视频业务发展现状</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103000242960.png" alt="image-20230103000242960" style="zoom:67%;"><h4 id="业务发展现状"><a href="#业务发展现状" class="headerlink" title="业务发展现状"></a>业务发展现状</h4><ul><li>视频载体的演变</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103000311806.png" alt="image-20230103000311806" style="zoom: 50%;"><ul><li><p>视频业务的发展现状</p><ul><li>2000s后，已经能够使用众多的终端设备进行视频的观看。随着视频终端设备的普及和多样化，视频业务发展的形式也呈现多样化：<ul><li><strong>有线电视</strong>：通过电视机观看视频，传统获取视频流的方式</li><li><strong>现场直播</strong>：实时观看视频，并提供给多个设备</li><li><strong>视频点播</strong>：预先录制的视频内容随时随地传送到多个设备</li><li><strong>时移观看</strong>：现场直播和VOD功能的集成，通过重播、剪辑等功能扩展产品</li></ul></li><li>随着图像质量的提高，视频内容的清晰度要求也越来越高：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103000420955.png" alt="image-20230103000420955" style="zoom:80%;"></li><li><p>视频业务的发展现状</p><ul><li><p>传统视频业务需要关注</p><ul><li>IT基础架构的建设</li><li>IT基础架构的运维管理</li><li>应用的开发</li><li>视频的拍摄、上传、转码、存储、分发、播放等</li><li>视频内容</li></ul></li><li><p>云上的视频业务只需要专注于</p><ul><li>视频内容的生产与运营</li></ul></li></ul></li></ul><h4 id="视频业务关键要素"><a href="#视频业务关键要素" class="headerlink" title="视频业务关键要素"></a>视频业务关键要素</h4><ul><li>视频业务关键要素<ul><li>分辨率、帧速率和比特率</li><li>色彩空间和位深度<ul><li>RGB、CMYK、Lab</li><li>图像的色彩越丰富，“位”就越多</li></ul></li><li>编码器和容器<ul><li>mpeg-1、mpeg-2、mpeg-4、h.264 和 h.265</li><li>.mp4、.mkv、.rmvb</li></ul></li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001021915.png" alt="image-20230103001021915" style="zoom:50%;"><h4 id="视频业务分类"><a href="#视频业务分类" class="headerlink" title="视频业务分类"></a>视频业务分类</h4><ul><li>直播<ul><li>直播平台、直播SDK、直播连麦、摄像头监控录像、商务直播、赛事直播、</li></ul></li><li>点播<ul><li>短视频、在线视频、电子商务、在线教育、客厅大屏 OTT</li></ul></li><li>实时音视频</li></ul><h3 id="云直播产品介绍"><a href="#云直播产品介绍" class="headerlink" title="云直播产品介绍"></a>云直播产品介绍</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001114280.png" alt="image-20230103001114280" style="zoom:50%;"><h4 id="云直播产品介绍-1"><a href="#云直播产品介绍-1" class="headerlink" title="云直播产品介绍"></a>云直播产品介绍</h4><ul><li><strong>云直播 LVB：</strong>提供高并发、低延迟、易接入、安全可靠稳定的直播推流、转码、分发及播放服务。</li><li><strong>直播推流/播放SDK：</strong>提供端到端的一站式音视频直播解决方案。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001217356.png" alt="image-20230103001217356" style="zoom:67%;"><ul><li>直播产品方案及策略</li></ul><table><thead><tr><th><strong>产品方案</strong></th><th><strong>目标客户及策略</strong></th></tr></thead><tbody><tr><td>直播平台</td><td>• 定位头部客户，纯云端直播方案  • 提供优质、稳定、价格具有竞争力的云直播服务  • 极速高清、P2P、内容生态</td></tr><tr><td>直播平台+直播SDK+优图美视SDK一体化</td><td>• 定位腰部及泛互行业中长尾客户  • 提供一体化的产品化程度高的泛娱乐场景的直播方案</td></tr><tr><td>直播连麦（互动直播）</td><td>• 定位有连麦需求的客户  • 提供TRTC+旁路直播+SDK一体化互动直播方案</td></tr><tr><td>摄像头监控录制</td><td>• 定位摄像头监控类客户  • 高并发上行，极少下行，仅需要录制回看</td></tr><tr><td>商务直播方案</td><td>• 定位单场次直播需求客户  • 与威吼联合包装SaaS化方案</td></tr><tr><td>赛事直播</td><td>• 定位游戏赛事直播大客户  • 游戏内容生态保障S9等大型游戏赛事直播</td></tr></tbody></table><h4 id="云直播系统架构"><a href="#云直播系统架构" class="headerlink" title="云直播系统架构"></a>云直播系统架构</h4><ul><li><p>主播在推流端通过上行加速节点推流至腾讯云直播源站。</p></li><li><p>腾讯云直播平台在云端对视频进行处理，然后通过CDN 加速节点进行分发直播流。</p></li><li><p>观众可通过播放器 SDK 进行视频观看。</p></li><li><p>直播流可按需进行录制，存储到腾讯云点播平台，以备视频点播回看。</p></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001412634.png" alt="image-20230103001412634" style="zoom:67%;"><h4 id="云直播主要功能"><a href="#云直播主要功能" class="headerlink" title="云直播主要功能"></a>云直播主要功能</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001437658.png" alt="image-20230103001437658" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001454010.png" alt="image-20230103001454010" style="zoom: 50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001505846.png" alt="image-20230103001505846" style="zoom: 50%;"><h4 id="云直播应用场景"><a href="#云直播应用场景" class="headerlink" title="云直播应用场景"></a>云直播应用场景</h4><ul><li>业务特点：要求进行视频的实时录制播放，及时分发到大量用户。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001531680.png" alt="image-20230103001531680" style="zoom: 60%;"><h4 id="基于腾讯云直播产品的应用案例"><a href="#基于腾讯云直播产品的应用案例" class="headerlink" title="基于腾讯云直播产品的应用案例"></a><strong>基于腾讯云直播产品的应用案例</strong></h4><ul><li>斗鱼直播系统<ul><li><strong>7000+</strong> 直播房间</li><li>同时在线<strong>百万</strong>观众</li><li>直播<strong>录制 + 回看</strong>功能</li><li>直播<strong>实时鉴黄</strong>功能</li><li>月截图<strong>几亿</strong>张</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001751631.png" alt="image-20230103001751631" style="zoom:50%;"><h4 id="云直播计费方案"><a href="#云直播计费方案" class="headerlink" title="云直播计费方案"></a>云直播计费方案</h4><ul><li>基于观看直播时产生的下行流量/带宽费用进行计费。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103001818629.png" alt="image-20230103001818629" style="zoom:50%;"><ul><li><strong>增值服务计费：</strong><ul><li>录制、截图、鉴黄和转码等）默认关闭，用户可按需开启使用并付费。</li><li>转码费用 = 价格 x 转码时长，日结；</li><li>录制费用 = 价格 x 录制路数峰值，月结；</li><li>截图费用 = 价格 x （截图数量 – 免费额度1000），月结；</li><li>鉴黄费用 = 价格 x （鉴黄数量 – 免费额度1000），月结；</li></ul></li></ul><h4 id="云直播计费示例"><a href="#云直播计费示例" class="headerlink" title="云直播计费示例"></a>云直播计费示例</h4><ul><li><p>用户早2019年3月1日使用云直播服务，直播码率为500Kbps，直播时长1小时，观看人数为100人。则该日直播费用为多少？</p></li><li><p><strong>按流量计费：</strong></p><ul><li>当日流量 = 500/8 x 3600 x 100 = 22500000KB = 22.5GB</li><li>流量费用 = 0.26（元/GB）x 22.5（GB）= 5.85元</li></ul></li><li><p><strong>按带宽计费：</strong></p><ul><li><p>当日带宽 = 500Kbps x 100 = 50000Kbps = 50Mbps</p></li><li><p>带宽费用 = 0.64（元/Mbps/天）x 50（Mbps）= 32元</p><p>​                                                                                        备注：此处价格仅供参考，以官网为准。</p></li></ul></li></ul><h3 id="云点播产品介绍"><a href="#云点播产品介绍" class="headerlink" title="云点播产品介绍"></a>云点播产品介绍</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002024830.png" alt="image-20230103002024830" style="zoom:50%;"><h4 id="云点播平台"><a href="#云点播平台" class="headerlink" title="云点播平台"></a>云点播平台</h4><ul><li><strong>点播 VOD：</strong>音视频采集上传、存储管理、自动化转码处理、加速播放、媒体资源管理和音视频通信服务为一体的一站式 VPaaS （Video Platform as a Service）解决方案。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002104684.png" alt="image-20230103002104684" style="zoom: 67%;"><ul><li>腾讯云视频点播服务业务概览</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002134374.png" alt="image-20230103002134374" style="zoom:50%;"><ul><li>云点播平台工作原理<ul><li>视频数据经过身份认证采集到存储集群和视频转码集群</li><li>存储集群和转码集群将视频分发到各个节点</li><li>客户端从节点获取视频，用户观看</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002223451.png" alt="image-20230103002223451" style="zoom:50%;"><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002236170.png" alt="image-20230103002236170" style="zoom: 50%;"><h4 id="云点播主要功能"><a href="#云点播主要功能" class="headerlink" title="云点播主要功能"></a>云点播主要功能</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002310609.png" alt="image-20230103002310609" style="zoom:50%;"><h4 id="云点播应用场景"><a href="#云点播应用场景" class="headerlink" title="云点播应用场景"></a>云点播应用场景</h4><ul><li><strong>业务特点：</strong>大量音视频需要上传处理和存储；能保障各地的用户高质量的播放观看体验、</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002341292.png" alt="image-20230103002341292" style="zoom:50%;"><h4 id="基于腾讯云点播产品的应用案例"><a href="#基于腾讯云点播产品的应用案例" class="headerlink" title="基于腾讯云点播产品的应用案例"></a><strong>基于腾讯云点播产品的应用案例</strong></h4><ul><li><p>云点播的常见解决方案</p><ul><li><p>短视频</p><ul><li>典型应用：快手、抖音</li><li>腾讯云方案：短视频 SDK + 点播云 + 优图美视</li></ul></li><li><p>电子商务</p><ul><li>典型应用：京东、唯品会</li><li>腾讯云方案：点播存储管理 + 转码处理 + 视频加速CDN + 播放器 SDK</li></ul></li><li><p>客厅大屏 OTT</p><ul><li>典型客户：酷开电视、TCL 雷鸟</li><li>腾讯云方案：点播存储管理 + 转码处理 + 视频加速CDN</li></ul></li></ul></li></ul><h4 id="云点播计费方案"><a href="#云点播计费方案" class="headerlink" title="云点播计费方案"></a>云点播计费方案</h4><ul><li>基于点播存储容量、转码规格时长与视频加速下行流量计费。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002545032.png" alt="image-20230103002545032" style="zoom: 67%;"><ul><li><p><strong>增值服务计费</strong></p><ul><li><strong>短视频 License SDK：</strong>购买指定的点播资源包赠送1年使用权</li><li><strong>音视频 AI-视频分析：</strong>按所分析视频原始时长计费，后付费月结</li></ul><table><thead><tr><th>收费项</th><th>价格</th></tr></thead><tbody><tr><td>视频智能集锦拆条</td><td>0.0x 元/分钟</td></tr><tr><td>视频智能标签分类</td><td>0.0xx 元/分钟</td></tr><tr><td>视频智能封面</td><td>0.0xx 元/分钟</td></tr></tbody></table></li></ul><h4 id="云点播计费示例"><a href="#云点播计费示例" class="headerlink" title="云点播计费示例"></a>云点播计费示例</h4><ul><li>用户使用云点播服务，后付费。3月1日峰值存储容量为100G。使用 H.264 编码方式转出1280 × 960分辨率视频时长100分钟。使用点播加速服务的下行流量为550GB。则该日云点播费用为多少？</li><li><strong>费用计算：</strong><ul><li>存储费用 = 100（GB）× 0.0048元/GB = 0.48 元；</li><li>转码费用 = 0.063（元/分钟）× 100（分钟）=6.3 元；</li><li>流量费用 = 0.23（元/GB）× 550（GB）= 126.5 元；</li><li>费用总计 = 0.48 元 + 6.3元 + 126.5 元 = 133.28 元。</li></ul></li></ul><h3 id="实时音视频介绍"><a href="#实时音视频介绍" class="headerlink" title="实时音视频介绍"></a>实时音视频介绍</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002750937.png" alt="image-20230103002750937" style="zoom: 50%;"><h4 id="实时音视频介绍-1"><a href="#实时音视频介绍-1" class="headerlink" title="实时音视频介绍"></a>实时音视频介绍</h4><ul><li><strong>腾讯实时音视频 TRTC：</strong><ul><li>提供多平台互通、高品质、可定制的实时互动视频通话服务；</li><li>结合腾讯浏览服务 TBS WebRTC 能力与腾讯实时音视频 SDK；</li><li>用户可零音视频基础搭建出音视频通信平台，Demo体验如下：</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002844557.png" alt="image-20230103002844557" style="zoom:67%;"><h4 id="实时音视频功能"><a href="#实时音视频功能" class="headerlink" title="实时音视频功能"></a>实时音视频功能</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002901778.png" alt="image-20230103002901778" style="zoom:50%;"><h4 id="实时音视频应用场景"><a href="#实时音视频应用场景" class="headerlink" title="实时音视频应用场景"></a>实时音视频应用场景</h4><ul><li>业务需求：实时播放与观看，同时进行互动交流。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103002924657.png" alt="image-20230103002924657" style="zoom:50%;"><h4 id="实时音视频计费方案"><a href="#实时音视频计费方案" class="headerlink" title="实时音视频计费方案"></a>实时音视频计费方案</h4><ul><li><p>基于通话时长（分钟数）进行计费：</p><ul><li><strong>预付费套餐</strong></li></ul><table><thead><tr><th>套餐包类型</th><th>体验包</th><th>入门包</th><th>标准包</th><th>企业包</th><th>尊享包</th></tr></thead><tbody><tr><td>价格（元）</td><td>x.x</td><td>3xxx</td><td>9xxx</td><td>28xxx</td><td>73xxx</td></tr><tr><td>通话分钟数</td><td>300</td><td>50000</td><td>250000</td><td>1000000</td><td>3000000</td></tr><tr><td>有效期</td><td>1个月</td><td>1个月</td><td>3个月</td><td>6个月</td><td>12个月</td></tr></tbody></table><ul><li><strong>后付费月结：通话分钟数按参与音视频通话人数叠加计算；计费单位：元 / 千分钟</strong></li></ul></li><li><p><strong>增值服务：</strong></p><ul><li><strong>如使用到旁路直播、录制、鉴黄等增值服务需单独计费。</strong></li></ul></li></ul><h2 id="腾讯云通信服务"><a href="#腾讯云通信服务" class="headerlink" title="腾讯云通信服务"></a>腾讯云通信服务</h2><h3 id="短信产品介绍"><a href="#短信产品介绍" class="headerlink" title="短信产品介绍"></a>短信产品介绍</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003112568.png" alt="image-20230103003112568" style="zoom:50%;"><h4 id="短信产品优势"><a href="#短信产品优势" class="headerlink" title="短信产品优势"></a>短信产品优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003129836.png" alt="image-20230103003129836" style="zoom:50%;"><h4 id="短信请求流程"><a href="#短信请求流程" class="headerlink" title="短信请求流程"></a>短信请求流程</h4><ul><li>一次短信（或语音）的业务请求流程如下：</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003201214.png" alt="image-20230103003201214" style="zoom:50%;"><h4 id="短信内容组成"><a href="#短信内容组成" class="headerlink" title="短信内容组成"></a>短信内容组成</h4><ul><li><p><strong>短信组成：</strong></p><ul><li><strong>短信签名</strong>用于标识公司或业务，需要审批通过后才能使用。</li><li><strong>短信内容</strong>通过内容模版定制设置，要经过审批后才能使用。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003252293.png" alt="image-20230103003252293" style="zoom:50%;"></li><li><p><strong>短信举例：</strong>【腾讯科技】您的QQ登录验证码是1234，5分钟内有效。</p><ul><li><strong>短信签名：</strong>【腾讯科技】</li><li><strong>短信内容：</strong>您的QQ登录验证码是1234，5分钟内有效。</li><li><strong>内容模板：</strong>您的QQ登录验证码是{1}，{2}分钟内有效，其中{1}、{2} 是可变参数。</li></ul></li></ul><h4 id="短信应用场景"><a href="#短信应用场景" class="headerlink" title="短信应用场景"></a>短信应用场景</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003337609.png" alt="image-20230103003337609" style="zoom:50%;"><h4 id="短信计费方案"><a href="#短信计费方案" class="headerlink" title="短信计费方案"></a>短信计费方案</h4><table><thead><tr><th><strong>短信类型</strong></th><th><strong>计费方式</strong></th></tr></thead><tbody><tr><td>国内短信</td><td>• 按短信条数计费，购买预付费套餐包；  • 短信长度（签名+正文）超过70字，按67字/条分隔成多条计费。</td></tr><tr><td>语音短信</td><td>• 语音号码预付月租：xx元/个/月  • 按通话分钟数套餐包，预付费；</td></tr><tr><td>国际短信</td><td>• 月结后付费，以美元计费，国际短信可以不带签名；  • 纯英文：短信长度超过160字，按153字/条分隔成多条计费；  • 其他：短信长度超过70字，按67字/条分隔成多条计费。</td></tr></tbody></table><h4 id="短信计费案例"><a href="#短信计费案例" class="headerlink" title="短信计费案例"></a>短信计费案例</h4><ul><li><strong>国内短信：</strong><ul><li>例：国内短信长度为150字，则按照67字/67字/16字分隔成3条计费。</li></ul></li><li><strong>国际短信：</strong><ul><li>例：纯英文短信长度为320字，则按照153字/153字/14字分隔成3条计费。</li></ul></li></ul><h3 id="云通信产品介绍"><a href="#云通信产品介绍" class="headerlink" title="云通信产品介绍"></a>云通信产品介绍</h3><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003505427.png" alt="image-20230103003505427" style="zoom:50%;"><h4 id="云通信产品介绍-1"><a href="#云通信产品介绍-1" class="headerlink" title="云通信产品介绍"></a>云通信产品介绍</h4><ul><li>云通信（Instant Messaging，IM）承载亿级 QQ 用户即时通讯技术，立志成为企业数字化转型的通信助手，提供全方位立体化的通信能力。</li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003528085.png" alt="image-20230103003528085" style="zoom:50%;"><h4 id="云通信产品优势"><a href="#云通信产品优势" class="headerlink" title="云通信产品优势"></a>云通信产品优势</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003548372.png" alt="image-20230103003548372" style="zoom:50%;"><h4 id="云通信功能架构"><a href="#云通信功能架构" class="headerlink" title="云通信功能架构"></a>云通信功能架构</h4><ul><li><strong>业务功能</strong><ul><li>接入服务</li><li>账号系统</li><li>消息系统</li><li>群组系统</li><li>资料托管</li><li>关系托管</li></ul></li><li><strong>管理监控</strong><ul><li>控制台</li><li>REST API</li><li>第三方回调</li></ul></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003758125.png" alt="image-20230103003758125" style="zoom: 67%;"><h4 id="云通信应用场景"><a href="#云通信应用场景" class="headerlink" title="云通信应用场景"></a>云通信应用场景</h4><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003821752.png" alt="image-20230103003821752" style="zoom:60%;"><h4 id="云通信计费方案"><a href="#云通信计费方案" class="headerlink" title="云通信计费方案"></a>云通信计费方案</h4><ul><li><strong>费用组成：</strong></li></ul><img src="/2023/01/01/Tencent%20Cloud%20Practitioner/image-20230103003849991.png" alt="image-20230103003849991" style="zoom:50%;"><h4 id="云通信计费示例"><a href="#云通信计费示例" class="headerlink" title="云通信计费示例"></a>云通信计费示例</h4><table><thead><tr><th><strong>基础套餐包</strong></th><th><strong>体验版</strong></th><th><strong>专业版</strong></th></tr></thead><tbody><tr><td>有效期</td><td>免费开通</td><td>购买当日起一个月内有效</td></tr><tr><td>付费方式</td><td>免费</td><td>按月支付</td></tr><tr><td>费用</td><td>免费</td><td>xxx 元/月</td></tr><tr><td>能力描述</td><td>• 完整的 IM 即时通讯功能  • 帐号创建数量（个）：100  • 单个群群人数上限（人）：  私有群、公开群和聊天室：20  音视频聊天室和在线成员广播大群不设人数上限。  • 好友人数上限（人）：20  • 单人可创建与加入群数（个）：50  • 可创建音视频聊天室（个）：10</td><td>•完整的 IM 即时通讯功能  • 帐号创建数量：无限制  • 单个群群人数上限（人）：  私有群、公开群和聊天室：200  ü音视频聊天室和在线成员广播大群不设人数上限  • 好友人数上限（人）：3000  • 单人可创建与加入群数（个）：200  • 可创建音视频聊天室（个）：50   •每月免费赠送10万 DAU  • 全球多点覆盖</td></tr></tbody></table><table><thead><tr><th><strong>功能项</strong></th><th><strong>费用明细</strong></th></tr></thead><tbody><tr><td>可创建音视频聊天室（个）</td><td>创建个数无限制：1000元/月</td></tr><tr><td>单个群群成员上限</td><td>2000人：500元/月     6000人：1000元/月     万人大群：2000元/月</td></tr><tr><td>单人可创建及加入群数（个）</td><td>400个群/人：500元/月     700个群/人：900 元/月     1000个群/人：1100 元/月</td></tr><tr><td>有效期</td><td>购买当日起一个月内有效</td></tr></tbody></table><table><thead><tr><th><strong>资源消耗项</strong></th><th><strong>价格说明</strong></th></tr></thead><tbody><tr><td>日活跃用户数（DAU）</td><td>10000元/月/10万 DAU</td></tr><tr><td>音视频聊天室带宽费用</td><td>2元/Mbps/天（日峰值）</td></tr><tr><td>消息漫游</td><td>500元/月/10万 DAU</td></tr><tr><td>累计群组数</td><td>1000元/10万个群组</td></tr></tbody></table><h2 id="课程总结-7"><a href="#课程总结-7" class="headerlink" title="课程总结"></a>课程总结</h2><ul><li>本课程详细介绍了<ul><li>音视频基础知识：主要场景、技术原理、协议参数。</li><li>腾讯云视频服务：直播、点播、实时音视频、</li><li>腾讯云通信服务：短信、云通信</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;云计算基础介绍&quot;&gt;&lt;a href=&quot;#云计算基础介绍&quot; class=&quot;headerlink&quot; title=&quot;云计算基础介绍&quot;&gt;&lt;/a&gt;云计算基础介绍&lt;/h1&gt;&lt;h2 id=&quot;数据中心发展阶段&quot;&gt;&lt;a href=&quot;#数据中心发展阶段&quot; class=&quot;headerlink&quot; title=&quot;数据中心发展阶段&quot;&gt;&lt;/a&gt;数据中心发展阶段&lt;/h2&gt;&lt;h3 id=&quot;企业自建-EDC&quot;&gt;&lt;a href=&quot;#企业自建-EDC&quot; class=&quot;headerlink&quot; title=&quot;企业自建 EDC&quot;&gt;&lt;/a&gt;企业自建 EDC&lt;/h3&gt;&lt;p&gt;&lt;code&gt;EDC: Enterprise Data Centers&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;面临的挑战：&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;建设难度高、运维管理复杂&lt;/li&gt;
&lt;li&gt;扩展调整不便、上线周期长&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;TCO 总拥有成本较高&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TCO = CapEx + OpEx + OppCost&lt;/p&gt;
&lt;p&gt;&lt;code&gt;TCO: Total Cost of Ownership&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="腾讯云" scheme="https://laijune.github.io/categories/%E8%85%BE%E8%AE%AF%E4%BA%91/"/>
    
    
    <category term="云从业" scheme="https://laijune.github.io/tags/%E4%BA%91%E4%BB%8E%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes 集群部署</title>
    <link href="https://laijune.github.io/2022/11/23/Kubernetes%20Deploy/"/>
    <id>https://laijune.github.io/2022/11/23/Kubernetes%20Deploy/</id>
    <published>2022-11-23T07:00:00.000Z</published>
    <updated>2023-01-30T14:50:21.390Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-集群部署"><a href="#Kubernetes-集群部署" class="headerlink" title="Kubernetes 集群部署"></a>Kubernetes 集群部署</h1><h2 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h2><p>4 台虚拟机，1 台 master，2 台 node，1 台 utility 是负责提供网关和集群内部通信</p><p><strong>master：</strong>192.168.19.101/24        主机名：cka-1</p><p><strong>node1：</strong>  192.168.19.102/24        主机名：cka-2    </p><p><strong>node2：</strong>  192.168.19.103/24        主机名：cka-3</p><p><strong>utility：</strong>  10.0.0.133/24（NAT 网关，连通外网）；192.168.19.254/24（实现集群间通信）</p><blockquote><p>utility 系统是 <strong>CentOS 7</strong>，k8s 集群系统是 <strong>Ubuntu</strong> 20.04.2 LTS</p><p>utility 是作为客户端远程到 k8s 集群的跳板机和充当网关功能；双网卡能让 k8s 集群之间互相通信，也能实现集群连通外网</p></blockquote><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><span id="more"></span><p><strong>关闭 swap 交换分区</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">登录到master(cka-1)</span><br><span class="line">[student@utility ~]$ ssh root@cka-1</span><br><span class="line"></span><br><span class="line">root@cka-1:~<span class="comment"># vim /etc/fstab </span></span><br><span class="line"><span class="comment"># /etc/fstab: static file system information.</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># Use &#x27;blkid&#x27; to print the universally unique identifier for a</span></span><br><span class="line"><span class="comment"># device; this may be used with UUID= as a more robust way to name devices</span></span><br><span class="line"><span class="comment"># that works even if disks are added and removed. See fstab(5).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;</span></span><br><span class="line"><span class="comment"># / was on /dev/sda2 during curtin installation</span></span><br><span class="line">/dev/disk/by-uuid/aabac2dc-9464-4ed0-ae98-37700ee61cf8 / ext4 defaults 0 0</span><br><span class="line"><span class="comment">#/swap.img      none    swap    sw      0       0👈注释swap一行</span></span><br><span class="line"></span><br><span class="line">查看swap设备的信息</span><br><span class="line">root@cka-1:~<span class="comment"># swapon -s</span></span><br><span class="line">FilenameTypeSizeUsedPriority</span><br><span class="line">/swap.img                              file    40017880-2</span><br><span class="line"></span><br><span class="line">禁用swap分区</span><br><span class="line">root@cka-1:~<span class="comment"># swapoff /swap.img </span></span><br><span class="line"></span><br><span class="line">再次查看swap信息,此时就没有swap的设备了</span><br><span class="line">root@cka-1:~<span class="comment"># swapon -s</span></span><br><span class="line"></span><br><span class="line">&gt; node1 和 node2 同理</span><br></pre></td></tr></table></figure><p><strong>路由转发</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">配置系统内核参数</span><br><span class="line">root@cka-1:~<span class="comment"># vim /etc/sysctl.d/docker.conf</span></span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line"></span><br><span class="line">加载模块</span><br><span class="line">root@cka-1:~<span class="comment"># modprobe br_netfilter </span></span><br><span class="line"></span><br><span class="line">加载配置文件</span><br><span class="line">root@cka-1:~<span class="comment"># sysctl -p /etc/sysctl.d/docker.conf </span></span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line"></span><br><span class="line">&gt; node1 和 node2 同理</span><br></pre></td></tr></table></figure><h3 id="所有节点上安装-Docker"><a href="#所有节点上安装-Docker" class="headerlink" title="所有节点上安装 Docker"></a>所有节点上安装 Docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[student@utility ~]$ ssh root@cka-1</span><br><span class="line"></span><br><span class="line">root@cka-1:~<span class="comment"># apt update</span></span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">在Ubuntu里docker包名字是docker.io</span><br><span class="line">root@cka-1:~<span class="comment"># apt list | grep docker </span></span><br><span class="line">...</span><br><span class="line">docker.io/focal-updates 20.10.12-0ubuntu2~20.04.1 amd64</span><br><span class="line"></span><br><span class="line">k8s集群三台机器都安装docker.io</span><br><span class="line">root@cka-1:~<span class="comment"># apt install -y docker.io</span></span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">查看docker版本</span><br><span class="line">root@cka-1:~<span class="comment"># docker --version</span></span><br><span class="line">Docker version 20.10.12, build 20.10.12-0ubuntu2~20.04.1</span><br><span class="line"></span><br><span class="line">启动docker服务并设置开机自启</span><br><span class="line">root@cka-1:~<span class="comment"># systemctl start docker &amp; systemctl enable docker</span></span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">固定docker版本,避免自动升级导致版本不兼容</span><br><span class="line">root@cka-1:~<span class="comment"># apt-mark hold docker.io</span></span><br><span class="line">docker.io <span class="built_in">set</span> on hold.</span><br><span class="line">&gt; node1 和 node2 同理</span><br></pre></td></tr></table></figure><blockquote><p><font color="red">扩展，如何安装指定版本 docker</font></p><p><strong>在 Ubuntu 上，找到 docker.io 提供的版本</strong></p><p>root@cka-1:# <code>apt-cache madison docker.io</code><br> docker.io | <strong>20.10.12-0ubuntu2~20.04.1</strong> | <a href="http://mirrors.aliyun.com/ubuntu">http://mirrors.aliyun.com/ubuntu</a> focal-updates/universe amd64 Packages<br> docker.io | <strong>20.10.7-0ubuntu5~20.04.2</strong> | <a href="http://mirrors.aliyun.com/ubuntu">http://mirrors.aliyun.com/ubuntu</a> focal-security/universe amd64 Packages<br>…</p><p>比如我需要安装 <strong>20.10.7</strong> 版本，只需在包后面指定版本即可；</p><p>root@cka-1:# <code>apt install -y docker.io=20.10.7-0ubuntu5~20.04.2</code></p><p>未指定版本后默认安装的都是最新的版本</p></blockquote><h3 id="配置-Docker-仓库地址：阿里加速"><a href="#配置-Docker-仓库地址：阿里加速" class="headerlink" title="配置 Docker 仓库地址：阿里加速"></a>配置 Docker 仓库地址：阿里加速</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 公有仓库: </span></span><br><span class="line">root@cka-1:~<span class="comment"># vim /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://i1pfdcu7.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">node1和node2同理</span><br><span class="line">root@cka-1:~<span class="comment"># scp /etc/docker/daemon.json root@cka-2:/etc/docker/</span></span><br><span class="line">root@cka-1:~<span class="comment"># scp /etc/docker/daemon.json root@cka-3:/etc/docker/</span></span><br><span class="line"></span><br><span class="line">重启docker服务</span><br><span class="line">root@cka-1:~<span class="comment"># systemctl daemon-reload </span></span><br><span class="line">root@cka-1:~<span class="comment"># systemctl restart docker</span></span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">检查镜像加速是否生效</span><br><span class="line">root@cka-1:~<span class="comment"># docker info</span></span><br><span class="line">...</span><br><span class="line"> Registry Mirrors:</span><br><span class="line">  https://i1pfdcu7.mirror.aliyuncs.com/👈</span><br><span class="line"> Live Restore Enabled: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">拉取镜像(通过阿里CDN加速下载)</span><br><span class="line">root@cka-1:~<span class="comment"># docker pull nginx</span></span><br><span class="line"></span><br><span class="line">root@cka-1:~<span class="comment"># docker images</span></span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">nginx        latest    605c77e624dd   10 months ago   141MB</span><br></pre></td></tr></table></figure><h2 id="安装和部署-Kubernetes-集群"><a href="#安装和部署-Kubernetes-集群" class="headerlink" title="安装和部署 Kubernetes 集群"></a>安装和部署 Kubernetes 集群</h2><blockquote><p><strong>Kubeadm</strong> 方式部署（自动化部署，以 pod 方式运行核心组件 ），<strong>二进制部署</strong>比较复杂，我们重点是如何使用 k8s 集群</p></blockquote><p>文件的源路径是在个人服务器上，源服务器地址如下，不确定服务器的关闭时间，我们提前下载到本地；</p><p>k8s-master.tar  <a href="https://cka-2022-10-22-1252503622.cos.ap-guangzhou.myqcloud.com/k8s-master.tar">https://cka-2022-10-22-1252503622.cos.ap-guangzhou.myqcloud.com/k8s-master.tar</a></p><p>k8s-node.tar  <a href="https://cka-2022-10-22-1252503622.cos.ap-guangzhou.myqcloud.com/k8s-node.tar">https://cka-2022-10-22-1252503622.cos.ap-guangzhou.myqcloud.com/k8s-node.tar</a></p><p>calico.tar   <a href="https://cka-2022-10-22-1252503622.cos.ap-guangzhou.myqcloud.com/calico.tar">https://cka-2022-10-22-1252503622.cos.ap-guangzhou.myqcloud.com/calico.tar</a> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">将<span class="string">&#x27;k8s-master.tar、calico.tar&#x27;</span>文件上传到master</span><br><span class="line">F:\CKA\CKA-2022实验环境\files&gt;scp k8s-master.tar calico.tar student@192.168.19.101:/home/student</span><br><span class="line"></span><br><span class="line">将<span class="string">&#x27;k8s-node.tar、calico.tar&#x27;</span>文件上传到node1和node2</span><br><span class="line">F:\CKA\CKA-2022实验环境\files&gt;scp k8s-node.tar calico.tar student@192.168.19.102:/home/student</span><br><span class="line">F:\CKA\CKA-2022实验环境\files&gt;scp k8s-node.tar calico.tar student@192.168.19.103:/home/student</span><br></pre></td></tr></table></figure><h3 id="安装-k8s-集群"><a href="#安装-k8s-集群" class="headerlink" title="安装 k8s 集群"></a>安装 k8s 集群</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">- 因为考试时只提供普通用户的账号,所以我们练习时一般也不用root</span><br><span class="line">使用student用户登录master,node1和node2</span><br><span class="line">[root@utility ~]<span class="comment"># ssh student@cka-1</span></span><br><span class="line"></span><br><span class="line">三台机器分别导入本地镜像</span><br><span class="line">student@cka-1:~$ sudo docker load -i k8s-master.tar </span><br><span class="line">student@cka-1:~$ sudo docker load -i calico.tar</span><br><span class="line"></span><br><span class="line">student@cka-2:~$ sudo docker load -i k8s-node.tar </span><br><span class="line">student@cka-2:~$ sudo docker load -i calico.tar </span><br><span class="line"></span><br><span class="line">student@cka-3:~$ sudo docker load -i k8s-node.tar </span><br><span class="line">student@cka-3:~$ sudo docker load -i calico.tar </span><br><span class="line"></span><br><span class="line">添加服务管理选项(如果没有添加,在初始化master时连接会被拒绝)</span><br><span class="line">student@cka-1:~$ sudo sed -i <span class="string">&quot;s#^ExecStart=/usr/bin/dockerd.*#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd#g&quot;</span> /usr/lib/systemd/system/docker.service</span><br><span class="line"></span><br><span class="line">student@cka-1:~$ sudo systemctl daemon-reload </span><br><span class="line">student@cka-1:~$ sudo systemctl restart docker</span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">student@cka-1:~$ sudo <span class="built_in">cat</span> /usr/lib/systemd/system/docker.service</span><br><span class="line">...</span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line"><span class="comment"># the default is not to use systemd for cgroups because the delegate issues still</span></span><br><span class="line"><span class="comment"># exists and systemd currently does not support the cgroup feature set required</span></span><br><span class="line"><span class="comment"># for containers run by docker</span></span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd👈</span><br><span class="line">ExecReload=/bin/kill -s HUP <span class="variable">$MAINPID</span></span><br><span class="line">TimeoutSec=0</span><br><span class="line">RestartSec=2</span><br><span class="line">Restart=always</span><br><span class="line"></span><br><span class="line">在所有节点上添加阿里kubernetes的key</span><br><span class="line">student@cka-1:~$ sudo curl -s https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | sudo apt-key add -</span><br><span class="line">OK</span><br><span class="line"><span class="string">&#x27;curl -s 参数将不输出错误和进度信息;上面命令一旦发生错误,不会显示错误信息,会正常显示运行结果&#x27;</span></span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">在所有节点上添加阿里kuberneter源</span><br><span class="line">student@cka-1:~$ sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/kubernetes.list &lt;&lt;<span class="string">EOF </span></span><br><span class="line"><span class="string">&gt; deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line"></span><br><span class="line">查看生成的drop-in文件</span><br><span class="line">student@cka-1:~$ sudo <span class="built_in">cat</span> /etc/apt/sources.list.d/kubernetes.list</span><br><span class="line">deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main</span><br><span class="line"><span class="string">&#x27;意思是下载kubernetes时在阿里的镜像站&#x27;</span></span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">更新本地缓存(同步阿里的kubernetes仓库)</span><br><span class="line">student@cka-1:~$ sudo apt update</span><br><span class="line">...</span><br><span class="line">79 packages can be upgraded. Run <span class="string">&#x27;apt list --upgradable&#x27;</span> to see them.</span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">查询可以部署的kubeadm版本</span><br><span class="line">student@cka-1:~$ sudo apt-cache madison kubeadm </span><br><span class="line">   kubeadm |  1.25.4-00 | https://mirrors.aliyun.com/kubernetes/apt kubernetes-xenial/main amd64 Packages</span><br><span class="line">...</span><br><span class="line">   kubeadm |  1.23.0-00 | https://mirrors.aliyun.com/kubernetes/apt kubernetes-xenial/main amd64 Packages</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">- k8s集群安装kubeadm,kubelet,kubectl <span class="comment"># 部署1.23.0-00版本,三个软件包版本要一致</span></span><br><span class="line">student@cka-1:~$ sudo apt install -y kubeadm=1.23.0-00 kubelet=1.23.0-00 kubectl=1.23.0-00</span><br><span class="line"></span><br><span class="line"><span class="comment">###如果出现以下报错,删除/var/lib/dpkg/lock-frontend.文件也不行的话,只能重启解决###</span></span><br><span class="line">Waiting <span class="keyword">for</span> cache lock: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 38Waiting <span class="keyword">for</span> cache lock: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process</span><br><span class="line"></span><br><span class="line">固定kubeadm、kubelet、kubectl的版本</span><br><span class="line">student@cka-1:~$ sudo apt-mark hold kubeadm kubelet kubectl</span><br><span class="line">kubeadm <span class="built_in">set</span> on hold.</span><br><span class="line">kubelet <span class="built_in">set</span> on hold.</span><br><span class="line">kubectl <span class="built_in">set</span> on hold.</span><br><span class="line">&gt; node1 和 node2 同理</span><br><span class="line"></span><br><span class="line">在所有节点上配置kubelet开机自启【但不要启动kubelet服务】</span><br><span class="line">student@cka-1:~$ sudo systemctl <span class="built_in">enable</span> kubelet</span><br><span class="line">&gt; node1 和 node2 同理</span><br></pre></td></tr></table></figure><h3 id="部署-k8s-集群"><a href="#部署-k8s-集群" class="headerlink" title="部署 k8s 集群"></a>部署 k8s 集群</h3><blockquote><p>单 master 节点部署</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- 初始化master,指定k8s版本<span class="string">&#x27;1.23.0&#x27;</span>,设置控制平面节点(master)IP地址<span class="string">&#x27;192.168.19.101&#x27;</span>,镜像仓库地址<span class="string">&#x27;registry.aliyuncs.com/google_containers&#x27;</span>,svc的网络VIP<span class="string">&#x27;10.1.0.0/16&#x27;</span>,pod的网段<span class="string">&#x27;10.244.0.0/16&#x27;</span></span><br><span class="line">student@cka-1:~$ sudo kubeadm init --kubernetes-version=1.23.0 --apiserver-advertise-address=192.168.19.101 --image-repository registry.aliyuncs.com/google_containers --service-cidr=10.1.0.0/16 --pod-network-cidr=10.244.0.0/16</span><br><span class="line">...</span><br><span class="line">Your Kubernetes control-plane has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  sudo <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  sudo <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">Alternatively, <span class="keyword">if</span> you are the root user, you can run:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class="line"></span><br><span class="line">配置<span class="string">&#x27;student&#x27;</span>用户为k8s管理员: kubeconfig认证</span><br><span class="line">student@cka-1:~$ sudo <span class="built_in">mkdir</span> ~/.kube</span><br><span class="line">student@cka-1:~$ sudo <span class="built_in">cp</span> /etc/kubernetes/admin.conf ~/.kube/config</span><br><span class="line">student@cka-1:~$ sudo <span class="built_in">chown</span> student:student ~/.kube/config</span><br><span class="line"></span><br><span class="line">查看节点</span><br><span class="line">student@cka-1:~$ kubectl get nodes</span><br><span class="line">NAME                STATUS     ROLES                  AGE   VERSION</span><br><span class="line">cka-1.example.com   NotReady   control-plane,master   40m   v1.23.0</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###如果初始化master报错,是因为没有添加服务管理选项###</span></span><br><span class="line">...</span><br><span class="line">[etcd] Creating static Pod manifest <span class="keyword">for</span> <span class="built_in">local</span> etcd <span class="keyword">in</span> <span class="string">&quot;/etc/kubernetes/manifests&quot;</span></span><br><span class="line">[wait-control-plane] Waiting <span class="keyword">for</span> the kubelet to boot up the control plane as static Pods from directory <span class="string">&quot;/etc/kubernetes/manifests&quot;</span>. This can take up to 4m0s</span><br><span class="line">[kubelet-check] Initial <span class="built_in">timeout</span> of 40s passed.</span><br><span class="line">[kubelet-check] It seems like the kubelet isn<span class="string">&#x27;t running or healthy.</span></span><br><span class="line"><span class="string">[kubelet-check] The HTTP call equal to &#x27;</span>curl -sSL http://localhost:10248/healthz<span class="string">&#x27; failed with error: Get &quot;http://localhost:10248/healthz&quot;: dial tcp [::1]:10248: connect: connection refused.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">解决👇</span></span><br><span class="line"><span class="string">root@cka-1:~# kubeadm reset</span></span><br><span class="line"><span class="string">root@cka-1:~# reboot</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">添加服务管理选项</span></span><br><span class="line"><span class="string">root@cka-1:~# sed -i &quot;s#^ExecStart=/usr/bin/dockerd.*#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd#g&quot; /usr/lib/systemd/system/docker.service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">再进行初始化</span></span><br><span class="line"><span class="string">student@cka-1:~$ sudo kubeadm init</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><h3 id="部署客户端"><a href="#部署客户端" class="headerlink" title="部署客户端"></a>部署客户端</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">- 配置utility为kubernetes客户端</span><br><span class="line">student用户登录到utility,配置kubernetes的仓库</span><br><span class="line">[student@utility ~]$ sudo -i</span><br><span class="line">[root@utility ~]<span class="comment"># cat &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt;EOF </span></span><br><span class="line">&gt; [kubernetes]</span><br><span class="line">&gt; name=Kubernetes</span><br><span class="line">&gt; baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br><span class="line">&gt; enabled=1</span><br><span class="line">&gt; gpgcheck=0</span><br><span class="line">&gt; EOF</span><br><span class="line"></span><br><span class="line">查询kubectl客户端的版本,需要与集群的版本一致(1.23.0)</span><br><span class="line">[root@utility ~]<span class="comment"># yum list --showduplicates kubeadm --disableexcludes=kubernetes | grep 1.23.0</span></span><br><span class="line">kubeadm.x86_64                       1.23.0-0                         kubernetes</span><br><span class="line">[root@utility ~]<span class="comment"># yum -y install kubectl-1.23.0-0</span></span><br><span class="line"></span><br><span class="line">此时utility还不能管理k8s集群,因为默认是连接到了本地的8080端口</span><br><span class="line">[root@utility ~]<span class="comment"># kubectl get nodes</span></span><br><span class="line">The connection to the server localhost:8080 was refused - did you specify the right host or port?</span><br><span class="line"></span><br><span class="line">设置student可以管理k8s集群</span><br><span class="line">[student@utility ~]$ <span class="built_in">mkdir</span> ~/.kube</span><br><span class="line">[student@utility ~]$ scp student@cka-1:~/.kube/config .kube/</span><br><span class="line">[student@utility ~]$ <span class="built_in">chmod</span> 0600 .kube/config </span><br><span class="line"></span><br><span class="line">此时可以管理节点了</span><br><span class="line">[student@utility ~]$ kubectl get nodes</span><br><span class="line">NAME                STATUS     ROLES                  AGE   VERSION</span><br><span class="line">cka-1.example.com   NotReady   control-plane,master   71m   v1.23.0</span><br></pre></td></tr></table></figure><blockquote><p>结论：只要你机器上的用户家目录下有 ~/.kube/config 文件，就可以管理k8s集群了；</p><p>其中 config 文件是从 /etc/kubernetes/admin.conf 拷贝的</p></blockquote><h3 id="添加-node-节点"><a href="#添加-node-节点" class="headerlink" title="添加 node 节点"></a>添加 node 节点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- 在master节点上获取token</span><br><span class="line">student@cka-1:~$ sudo -i</span><br><span class="line">root@cka-1:~<span class="comment"># kubeadm token create --print-join-command</span></span><br><span class="line">kubeadm <span class="built_in">join</span> 192.168.19.101:6443 --token v1tyj2.krhxy0ekjxavlhes --discovery-token-ca-cert-hash sha256:19d6ec1a75bbf962e808fbd64adb4e141d1ec4c95a6b05303f70c8dafbcfc079</span><br><span class="line"></span><br><span class="line">- 在node1和node2上将上诉命令结果复制打印即可</span><br><span class="line">添加cka-2作为k8s的worker节点</span><br><span class="line">student@cka-2:~$ sudo kubeadm <span class="built_in">join</span> 192.168.19.101:6443 --token v1tyj2.krhxy0ekjxavlhes --discovery-token-ca-cert-hash sha256:19d6ec1a75bbf962e808fbd64adb4e141d1ec4c95a6b05303f70c8dafbcfc079</span><br><span class="line"></span><br><span class="line">添加cka-3作为k8s的worker节点</span><br><span class="line">student@cka-3:~$ sudo kubeadm <span class="built_in">join</span> 192.168.19.101:6443 --token v1tyj2.krhxy0ekjxavlhes --discovery-token-ca-cert-hash sha256:19d6ec1a75bbf962e808fbd64adb4e141d1ec4c95a6b05303f70c8dafbcfc079</span><br><span class="line"></span><br><span class="line">回到master节点上查看node状态</span><br><span class="line">student@cka-1:~$ kubectl get nodes</span><br><span class="line">NAME                STATUS     ROLES                  AGE     VERSION</span><br><span class="line">cka-1.example.com   NotReady   control-plane,master   85m     v1.23.0</span><br><span class="line">cka-2.example.com   NotReady   &lt;none&gt;                 6m20s   v1.23.0</span><br><span class="line">cka-3.example.com   NotReady   &lt;none&gt;                 3m14s   v1.23.0</span><br><span class="line"><span class="comment"># 此时状态NotReady是因为没有配置网络组件,网络不通</span></span><br></pre></td></tr></table></figure><p>上传本地文件到master节点</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F:\CKA\CKA-2022实验环境\files&gt;scp calico.yaml student@192.168.19.101:~</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">在master节点上通过<span class="string">&#x27;calico.yaml&#x27;</span>文件部署网络组件</span><br><span class="line">student@cka-1:~$ kubectl create -f calico.yaml </span><br><span class="line"></span><br><span class="line">再次查看node的状态</span><br><span class="line">student@cka-1:~$ kubectl get nodes</span><br><span class="line">NAME                STATUS   ROLES                  AGE    VERSION</span><br><span class="line">cka-1.example.com   Ready    control-plane,master   120m   v1.23.0<span class="comment"># k8s管理节点</span></span><br><span class="line">cka-2.example.com   Ready    &lt;none&gt;                 41m    v1.23.0<span class="comment"># k8s worker节点,运行生产pod</span></span><br><span class="line">cka-3.example.com   Ready    &lt;none&gt;                 38m    v1.23.0<span class="comment"># k8s worker节点,运行生产pod</span></span><br><span class="line"><span class="comment"># 此时nodes的状态都是Ready了</span></span><br><span class="line"></span><br><span class="line">查<span class="string">&#x27;kube-system&#x27;</span>命名空间的集群pods</span><br><span class="line">student@cka-1:~$ kubectl get pods -n kube-system</span><br><span class="line">NAME                                        READY   STATUS    RESTARTS   AGE</span><br><span class="line">calico-kube-controllers-68bbcc9985-gmlvq    1/1     Running   0          3m28s</span><br><span class="line">calico-node-hwtf4                           1/1     Running   0          3m28s</span><br><span class="line">calico-node-pnp2t                           1/1     Running   0          3m28s</span><br><span class="line">calico-node-sqj6j                           1/1     Running   0          3m28s</span><br><span class="line">coredns-6d8c4cb4d-8slt7                     1/1     Running   0          122m</span><br><span class="line">coredns-6d8c4cb4d-gk4s2                     1/1     Running   0          122m</span><br><span class="line">etcd-cka-1.example.com                      1/1     Running   0          122m</span><br><span class="line">kube-apiserver-cka-1.example.com            1/1     Running   0          122m</span><br><span class="line">kube-controller-manager-cka-1.example.com   1/1     Running   0          122m</span><br><span class="line">kube-proxy-dspvc                            1/1     Running   0          43m</span><br><span class="line">kube-proxy-t5dfl                            1/1     Running   0          40m</span><br><span class="line">kube-proxy-trrjp                            1/1     Running   0          122m</span><br><span class="line">kube-scheduler-cka-1.example.com            1/1     Running   0          122m</span><br><span class="line">student@cka-1:~$ </span><br></pre></td></tr></table></figure><h3 id="配置-kubectl-命令补全"><a href="#配置-kubectl-命令补全" class="headerlink" title="配置 kubectl 命令补全"></a>配置 kubectl 命令补全</h3><p><strong><font color="red">提示：CKA 考点</font></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">student@cka-1:~$ sudo apt install bash-completion</span><br><span class="line"></span><br><span class="line">环境变量临时生效</span><br><span class="line">student@cka-1:~$ <span class="built_in">source</span> &lt;(kubectl completion bash)</span><br><span class="line"></span><br><span class="line"><span class="comment">###开机生效###</span></span><br><span class="line">student@cka-1:~$ vim ~/.bashrc</span><br><span class="line">student@cka-1:~$ <span class="built_in">tail</span> ~/.bashrc</span><br><span class="line"><span class="comment"># sources /etc/bash.bashrc).</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">shopt</span> -oq posix; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ -f /usr/share/bash-completion/bash_completion ]; <span class="keyword">then</span></span><br><span class="line">    . /usr/share/bash-completion/bash_completion</span><br><span class="line">  <span class="keyword">elif</span> [ -f /etc/bash_completion ]; <span class="keyword">then</span></span><br><span class="line">    . /etc/bash_completion</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> &lt;(kubectl completion bash)👈 将命令写到最后一行</span><br><span class="line"></span><br><span class="line"><span class="comment">###考试时不要写命令到.bashrc文件###</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Kubernetes-集群部署&quot;&gt;&lt;a href=&quot;#Kubernetes-集群部署&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes 集群部署&quot;&gt;&lt;/a&gt;Kubernetes 集群部署&lt;/h1&gt;&lt;h2 id=&quot;环境介绍&quot;&gt;&lt;a href=&quot;#环境介绍&quot; class=&quot;headerlink&quot; title=&quot;环境介绍&quot;&gt;&lt;/a&gt;环境介绍&lt;/h2&gt;&lt;p&gt;4 台虚拟机，1 台 master，2 台 node，1 台 utility 是负责提供网关和集群内部通信&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;master：&lt;/strong&gt;192.168.19.101/24        主机名：cka-1&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;node1：&lt;/strong&gt;  192.168.19.102/24        主机名：cka-2    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;node2：&lt;/strong&gt;  192.168.19.103/24        主机名：cka-3&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;utility：&lt;/strong&gt;  10.0.0.133/24（NAT 网关，连通外网）；192.168.19.254/24（实现集群间通信）&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;utility 系统是 &lt;strong&gt;CentOS 7&lt;/strong&gt;，k8s 集群系统是 &lt;strong&gt;Ubuntu&lt;/strong&gt; 20.04.2 LTS&lt;/p&gt;
&lt;p&gt;utility 是作为客户端远程到 k8s 集群的跳板机和充当网关功能；双网卡能让 k8s 集群之间互相通信，也能实现集群连通外网&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;</summary>
    
    
    
    <category term="云原生" scheme="https://laijune.github.io/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/"/>
    
    
    <category term="Kubernetes" scheme="https://laijune.github.io/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Zabbix 监控</title>
    <link href="https://laijune.github.io/2022/11/11/zabbix/"/>
    <id>https://laijune.github.io/2022/11/11/zabbix/</id>
    <published>2022-11-11T12:00:01.000Z</published>
    <updated>2022-11-16T15:29:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天来部署 Zabbix 来监控我的服务器；</p><blockquote><p>Zabbix 官网手册：<a href="https://www.zabbix.com/cn/manuals">https://www.zabbix.com/cn/manuals</a> ；其中 LTS（Long Term Support）是长期支持版本。</p><p>我们的服务器环境依旧是 <strong>CentOS Stream 8</strong>，安装 Zabbix 的版本是 <strong>4.0 LTS</strong></p></blockquote><h2 id="安装-zabbix-4-0-版本"><a href="#安装-zabbix-4-0-版本" class="headerlink" title="安装 zabbix 4.0 版本"></a>安装 zabbix 4.0 版本</h2><h3 id="服务端部署流程"><a href="#服务端部署流程" class="headerlink" title="服务端部署流程"></a>服务端部署流程</h3><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">1.安装zabbix.repo仓库文件,清华源的zabbix4版本(如果是其它操作系统,则选择对应版本的rpm包)</span><br><span class="line">[root@stream8 ~]<span class="comment"># rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/4.0/rhel/8/x86_64/zabbix-release-4.0-2.el8.noarch.rpm</span></span><br><span class="line"></span><br><span class="line">此时,yum仓库会多一个zabbix.repo文件</span><br><span class="line">[root@stream8 ~]<span class="comment"># cat /etc/yum.repos.d/zabbix.repo </span></span><br><span class="line">[zabbix]</span><br><span class="line">name=Zabbix Official Repository - <span class="variable">$basearch</span></span><br><span class="line">baseurl=http://repo.zabbix.com/zabbix/4.0/rhel/8/<span class="variable">$basearch</span>/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-ZABBIX-A14FE591</span><br><span class="line"></span><br><span class="line">[zabbix-non-supported]</span><br><span class="line">name=Zabbix Official Repository non-supported - <span class="variable">$basearch</span></span><br><span class="line">baseurl=http://repo.zabbix.com/non-supported/rhel/8/<span class="variable">$basearch</span>/</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-ZABBIX</span><br><span class="line">gpgcheck=1</span><br><span class="line"></span><br><span class="line">替换zabbix的来源路径为清华的源(因为zabbix官网的服务器在国外)</span><br><span class="line">[root@stream8 ~]<span class="comment"># sed -i &#x27;s#repo.zabbix.com#mirrors.tuna.tsinghua.edu.cn/zabbix#g&#x27; /etc/yum.repos.d/zabbix.repo</span></span><br><span class="line"></span><br><span class="line">2.安装zabbix服务端(前端)、zabbix连接数据库、zabbix-agent(客户端)</span><br><span class="line">[root@stream8 ~]<span class="comment"># dnf -y install zabbix-server-mysql zabbix-web-mysql zabbix-agent mariadb-server</span></span><br><span class="line"><span class="comment"># zabbix 4.0默认是lamp,所以这一步会自动安装httpd,在5.0版本则不会安装httpd</span></span><br><span class="line"></span><br><span class="line">启动mariadb数据库,设置开机自启</span><br><span class="line">[root@stream8 ~]<span class="comment"># systemctl start mariadb &amp; systemctl enable mariadb</span></span><br><span class="line"></span><br><span class="line">3.设置mariadb数据库密码(默认账号是root),创建zabbix库(设置字符集是utf8),存储监控数据,且创建账号</span><br><span class="line">[root@stream8 ~]<span class="comment"># mysqladmin password redhat</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># mysql -uroot -predhat -e &quot;create database zabbix character set utf8 collate utf8_bin;&quot;</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># mysql -uroot -predhat -e &quot;grant all privileges on zabbix.* to zabbix@localhost identified by &#x27;redhat&#x27;;&quot;</span></span><br><span class="line"></span><br><span class="line">测试zabbix用户</span><br><span class="line">[root@stream8 ~]<span class="comment"># mysql -uroot -predhat -e &quot;show databases;&quot;</span></span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| zabbix             |</span><br><span class="line">+--------------------+</span><br><span class="line"></span><br><span class="line">4.导入zabbix的数据库</span><br><span class="line">这里因为Stream8版本原因,zcat读取create.sql.gz会报错<span class="string">&quot;导入的数据行太长了&quot;</span>,修改一下mysql的配置文件并重启服务即可解决;</span><br><span class="line">[root@stream8 ~]<span class="comment"># vim /etc/my.cnf</span></span><br><span class="line">...添加下几行</span><br><span class="line">[mysqld]</span><br><span class="line">innodb_strict_mode = 0</span><br><span class="line"></span><br><span class="line">[root@stream8 ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在CentOS 7版本则不会出现以上问题</span></span><br><span class="line"><span class="comment"># 用zcat直接读取gz压缩包,管道符交给mysql命令导入数据,往zabbix库中导入数据</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># zcat /usr/share/doc/zabbix-server-mysql/create.sql.gz | mysql -uroot -predhat zabbix</span></span><br><span class="line"></span><br><span class="line">查看导入zabbix数据库的表;</span><br><span class="line">[root@stream8 ~]<span class="comment"># mysql -uroot -predhat -e &quot;show tables from zabbix;&quot;</span></span><br><span class="line">...</span><br><span class="line">| <span class="built_in">users</span>                      |</span><br><span class="line">| users_groups               |</span><br><span class="line">| usrgrp                     |</span><br><span class="line">| valuemaps                  |</span><br><span class="line">| widget                     |</span><br><span class="line">| widget_field               |</span><br><span class="line">+----------------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5. 编辑zabbix-server服务端配置文件(修改数据库部分即可)</span><br><span class="line">[root@stream8 ~]<span class="comment"># vim /etc/zabbix/zabbix_server.conf</span></span><br><span class="line">...</span><br><span class="line"><span class="comment"># DBHost=localhost数据库主机,默认未开启</span></span><br><span class="line">DBHost=localhost启动,指定为本机</span><br><span class="line"></span><br><span class="line"><span class="comment"># DBPassword=数据库密码,默认未开启</span></span><br><span class="line">DBPassword=redhat开启,设置zabbix数据库密码</span><br><span class="line"></span><br><span class="line">修改完,也可以直接替换源文件为以下有效的内容,直观明了</span><br><span class="line">[root@stream8 ~]<span class="comment"># grep &quot;^[a-Z]&quot; /etc/zabbix/zabbix_server.conf</span></span><br><span class="line">LogFile=/var/log/zabbix/zabbix_server.log</span><br><span class="line">LogFileSize=0</span><br><span class="line">PidFile=/var/run/zabbix/zabbix_server.pid</span><br><span class="line">SocketDir=/var/run/zabbix</span><br><span class="line">DBHost=localhost<span class="comment"># 指定mysql的地址</span></span><br><span class="line">DBName=zabbix<span class="comment"># 数据库名字</span></span><br><span class="line">DBUser=zabbix<span class="comment"># 数据库的连接用户</span></span><br><span class="line">DBPassword=redhat<span class="comment"># 数据库密码</span></span><br><span class="line">SNMPTrapperFile=/var/log/snmptrap/snmptrap.log<span class="comment"># 存放自定义监控项的目录</span></span><br><span class="line">Timeout=4</span><br><span class="line">AlertScriptsPath=/usr/lib/zabbix/alertscripts</span><br><span class="line">ExternalScripts=/usr/lib/zabbix/externalscripts</span><br><span class="line">LogSlowQueries=3000</span><br><span class="line"></span><br><span class="line">6.启动zabbix服务,且开机自启</span><br><span class="line">[root@stream8 ~]<span class="comment"># systemctl start zabbix-server &amp; systemctl enable zabbix-server</span></span><br><span class="line"></span><br><span class="line">7.检查zabbix(zabbix服务端的端口<span class="string">&#x27;10051&#x27;</span>)</span><br><span class="line">[root@stream8 ~]<span class="comment"># netstat -nltp</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1131/sshd           </span><br><span class="line">tcp        0      0 0.0.0.0:10051           0.0.0.0:*               LISTEN      13601/zabbix_server </span><br><span class="line">tcp6       0      0 :::3306                 :::*                    LISTEN      9999/mysqld         </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      1131/sshd           </span><br><span class="line">tcp6       0      0 :::10051                :::*                    LISTEN      13601/zabbix_server </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>至此，zabbix-server 服务端核心程序就装好了，以及 zabbix-UI 这个php程序也装好了；</p><p>还需配置 web 前端，默认 zabbix 4.0 版本只支持 apache，不同 zabbix 版本 web 前端代理不一样（nginx、apache）</p></blockquote><p><strong>Apache 配置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1.修改PHP时区</span><br><span class="line">[root@stream8 ~]<span class="comment"># vim /etc/php.ini </span></span><br><span class="line">...</span><br><span class="line">;date.timezone =<span class="comment"># 找到时区这一行(默认是未开启的)</span></span><br><span class="line">date.timezone = Asia/Shanghai<span class="comment"># 设置为亚洲/上海</span></span><br><span class="line"></span><br><span class="line">如果后续手动修改了时区,需要重启php的服务</span><br><span class="line">[root@stream8 ~]<span class="comment"># systemctl restart php-fpm</span></span><br><span class="line"></span><br><span class="line">2.重启apache服务</span><br><span class="line"><span class="comment"># 查看apache子目录zabbix的配置</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># cat /etc/httpd/conf.d/zabbix.conf </span></span><br><span class="line">...</span><br><span class="line">Alias /zabbix /usr/share/zabbix 可以看到访问/zabbix,会转发到/usr/share/zabbix目录</span><br><span class="line"></span><br><span class="line">&lt;Directory <span class="string">&quot;/usr/share/zabbix&quot;</span>&gt;</span><br><span class="line">    Options FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Require all granted</span><br><span class="line"></span><br><span class="line">    &lt;FilesMatch \.(php|phar)$&gt;</span><br><span class="line">        SetHandler <span class="string">&quot;proxy:unix:/run/php-fpm/zabbix.sock|fcgi://localhost&quot;</span></span><br><span class="line">    &lt;/FilesMatch&gt;</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">[root@stream8 ~]<span class="comment"># systemctl start httpd &amp; systemctl enable httpd</span></span><br></pre></td></tr></table></figure><p><strong>访问服务器的<code>IP</code>加<code>/zabbix</code></strong></p><img src="/2022/11/11/zabbix/image-20221111230949455.png" alt="image-20221111230949455" style="zoom:150%;"><img src="/2022/11/11/zabbix/image-20221111231310604.png" alt="image-20221111231310604" style="zoom:150%;"><img src="/2022/11/11/zabbix/image-20221111231714873.png" alt="image-20221111231714873" style="zoom:150%;"><img src="/2022/11/11/zabbix/image-20221111231948330.png" alt="image-20221111231948330" style="zoom:150%;"><p><img src="/2022/11/11/zabbix/image-20221111232031222.png" alt="image-20221111232031222"></p><p><img src="/2022/11/11/zabbix/image-20221111232105026.png" alt="image-20221111232105026"></p><img src="/2022/11/11/zabbix/image-20221111232259952.png" alt="image-20221111232259952" style="zoom:150%;"><blockquote><p>后面会教大家，如何在后端修改 Zabbix 的 Admin 用户的密码</p></blockquote><img src="/2022/11/11/zabbix/image-20221111232456595.png" alt="image-20221111232456595" style="zoom:150%;"><img src="/2022/11/11/zabbix/image-20221111232832617.png" alt="image-20221111232832617" style="zoom:150%;"><blockquote><p>如果 web 界面不能选择使用中文，则需要手动安装中文语言包</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">安装zh_CN语言包</span><br><span class="line">[root@stream8 ~]<span class="comment"># dnf install langpacks-zh_CN.noarch -y</span></span><br><span class="line"></span><br><span class="line">然后刷新web界面,就能选择中文了</span><br></pre></td></tr></table></figure><p><strong>修改图形的数据展示（默认字体有问题）</strong></p><img src="/2022/11/11/zabbix/image-20221111234231331.png" alt="image-20221111234231331" style="zoom:150%;"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">下载字体,修改zabbix的字体支持(因为缺少zabbix所需的字体)</span><br><span class="line"><span class="comment"># 文泉仪微字体</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># yum install wqy-microhei-fonts -y</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝下载的字体覆盖zabbix的图形字体</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># cp /usr/share/fonts/wqy-microhei/wqy-microhei.ttc /usr/share/zabbix/assets/fonts/graphfont.ttf </span></span><br><span class="line"><span class="built_in">cp</span>: overwrite <span class="string">&#x27;/usr/share/zabbix/assets/fonts/graphfont.ttf&#x27;</span>? y</span><br></pre></td></tr></table></figure><p>刷新 web 界面，可以看到乱码的中文字体生效了</p><img src="/2022/11/11/zabbix/image-20221111234958289.png" alt="image-20221111234958289" style="zoom:150%;"><h3 id="修改-Zabbix-默认-Admin-用户的密码"><a href="#修改-Zabbix-默认-Admin-用户的密码" class="headerlink" title="修改 Zabbix 默认 Admin 用户的密码"></a>修改 Zabbix 默认 Admin 用户的密码</h3><blockquote><p>zabbix部署后，使用默认的 Admin 账户登录，密码默认是 zabbix；</p></blockquote><p><strong>数据库重置 zabbix web用户</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">首先,进入zabbix数据库,查看当前<span class="built_in">users</span>表的信息</span><br><span class="line">[root@stream8 ~]<span class="comment"># mysql -uroot -predhat </span></span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection <span class="built_in">id</span> is 385</span><br><span class="line">Server version: 10.3.28-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use zabbix;</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [zabbix]&gt; select * from <span class="built_in">users</span>;</span><br><span class="line">+--------+-------+--------+---------------+----------------------------------+-----+-----------+------------+-------+---------+------+---------+----------------+---------------+---------------+---------------+</span><br><span class="line">| userid | <span class="built_in">alias</span> | name   | surname       | passwd                           | url | autologin | autologout | lang  | refresh | <span class="built_in">type</span> | theme   | attempt_failed | attempt_ip    | attempt_clock | rows_per_page |</span><br><span class="line">+--------+-------+--------+---------------+----------------------------------+-----+-----------+------------+-------+---------+------+---------+----------------+---------------+---------------+---------------+</span><br><span class="line">|      1 | Admin | Zabbix | Administrator | 5fce1b3e34b520afeffb37ce08c7cd66 |     |         1 | 0          | zh_CN | 30s     |    3 | default |              0 | 27.38.213.189 |    1668181951 |            50 |</span><br><span class="line">|      2 | guest |        |               | d41d8cd98f00b204e9800998ecf8427e |     |         0 | 15m        | en_GB | 30s     |    1 | default |              0 |               |             0 |            50 |</span><br><span class="line">+--------+-------+--------+---------------+----------------------------------+-----+-----------+------------+-------+---------+------+---------+----------------+---------------+---------------+---------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.000 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以看到用户表中的用户Admin的密码是通过MD5加密的</span></span><br></pre></td></tr></table></figure><p><a href="https://www.cmd5.com/">【MD5 在线加密及解密】</a></p><p>通过 MD5 反解 Admin 用户的数据库密码</p><p><img src="/2022/11/11/zabbix/image-20221112000032655.png" alt="image-20221112000032655"></p><blockquote><p>这里学习一下在 Linux 中生成 MD5 值</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以使用命令生成md5值(如下,生成明文genmd5的md5值)</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># echo -n genmd5 | openssl md5</span></span><br><span class="line">(stdin)= caf22338e37c42b2f2e9358ba6bedb04</span><br></pre></td></tr></table></figure><p><strong>手动更新 zabbix Admin 用户的密码</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">设置md5的密码为<span class="string">&#x27;Aa123!&#x27;</span></span><br><span class="line">[root@stream8 ~]<span class="comment"># echo -n Aa123! | openssl md5</span></span><br><span class="line">(stdin)= 675278e2a74b19cfa0a5f766424c67cc</span><br><span class="line"></span><br><span class="line">[root@stream8 ~]<span class="comment"># mysql -uroot -predhat</span></span><br><span class="line">MariaDB [(none)]&gt; use zabbix;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新zabbix web用户登录密码</span></span><br><span class="line">MariaDB [zabbix]&gt; update <span class="built_in">users</span> <span class="built_in">set</span> passwd=<span class="string">&#x27;675278e2a74b19cfa0a5f766424c67cc&#x27;</span> <span class="built_in">where</span> userid = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">Query OK, 1 row affected (0.003 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [zabbix]&gt; select * from <span class="built_in">users</span>;</span><br><span class="line">+--------+-------+--------+---------------+----------------------------------+-----+-----------+------------+-------+---------+------+---------+----------------+---------------+---------------+---------------+</span><br><span class="line">| userid | <span class="built_in">alias</span> | name   | surname       | passwd                           | url | autologin | autologout | lang  | refresh | <span class="built_in">type</span> | theme   | attempt_failed | attempt_ip    | attempt_clock | rows_per_page |</span><br><span class="line">+--------+-------+--------+---------------+----------------------------------+-----+-----------+------------+-------+---------+------+---------+----------------+---------------+---------------+---------------+</span><br><span class="line">|      1 | Admin | Zabbix | Administrator | 675278e2a74b19cfa0a5f766424c67cc |     |         1 | 0          | zh_CN | 30s     |    3 | default |              0 | 27.38.213.189 |    1668181951 |            50 |</span><br><span class="line">|      2 | guest |        |               | d41d8cd98f00b204e9800998ecf8427e |     |         0 | 15m        | en_GB | 30s     |    1 | default |              0 |               |             0 |            50 |</span><br><span class="line">+--------+-------+--------+---------------+----------------------------------+-----+-----------+------------+-------+---------+------+---------+----------------+---------------+---------------+---------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.000 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">MariaDB [zabbix]&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.000 sec)</span><br></pre></td></tr></table></figure><p><strong>登录测试 ！</strong></p><img src="/2022/11/11/zabbix/image-20221112001106389.png" alt="image-20221112001106389" style="zoom:200%;"><img src="/2022/11/11/zabbix/image-20221112001119489.png" alt="image-20221112001119489" style="zoom:150%;"><h2 id="安装-zabbix-5-0-版本"><a href="#安装-zabbix-5-0-版本" class="headerlink" title="安装 zabbix 5.0 版本"></a>安装 zabbix 5.0 版本</h2><p>5.0 版本对基础环境的要求有很大的变化，最大的就是对 php 版本的要求，最低要求 7.2.0 版本，对 php 扩展组件也有要求；</p><p>详见官网：<a href="https://www.zabbix.com/documentation/5.0/zh/manual/installation/requirements">https://www.zabbix.com/documentation/5.0/zh/manual/installation/requirements</a></p><p><strong>环境介绍</strong></p><p>1 台 server，2 台 agent，系统是 CentOS Stream 8</p><p><strong>server：</strong> 10.0.0.10/24</p><p><strong>agent1：</strong>10.0.0.11/24</p><p><strong>agent2：</strong>10.0.0.12/24</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.环境准备</span><br><span class="line">关闭防火墙(三台机器)</span><br><span class="line">[root@server ~]<span class="comment"># sed -i &#x27;s/SELINUX=enforcing/SELINUX=disabled/&#x27; /etc/selinux/config</span></span><br><span class="line">[root@server ~]<span class="comment"># systemctl disable --now firewalld</span></span><br><span class="line"></span><br><span class="line">此时获取当前selinux防火墙的安全策略仍为Enforcing,配置文件并未生效</span><br><span class="line">[root@server ~]<span class="comment"># reboot</span></span><br><span class="line"></span><br><span class="line">获取zabbix的下载源</span><br><span class="line">[root@server ~]<span class="comment"># rpm -Uvh https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm</span></span><br><span class="line"></span><br><span class="line">更换zabbix.repo源</span><br><span class="line">[root@server ~]<span class="comment"># sed -i &#x27;s#http://repo.zabbix.com#https://mirrors.aliyun.com/zabbix#&#x27; /etc/yum.repos.d/zabbix.repo</span></span><br><span class="line"></span><br><span class="line">2.安装zabbix server和agent</span><br><span class="line">[root@server ~]<span class="comment"># dnf -y install zabbix-server-mysql zabbix-agent</span></span><br><span class="line"></span><br><span class="line">3.安装zabbix前端环境</span><br><span class="line">[root@server ~]<span class="comment"># dnf -y install zabbix-web-mysql zabbix-apache-conf</span></span><br></pre></td></tr></table></figure><blockquote><p>如果是 CentOS 7 版本，则需要安装 Software Collections，便于后续安装高版本的 php，默认 yum 安装的 php 版本为 5.4 过低。SCL（Software Collections）可以让你在同一个操作系统上安装和使用多个版本的软件，而不会影响整个系统的软件包。</p><p>为了避免系统广泛冲突，包安装在 /opt/rh 目录中，例如，这允许你在 CentOS 7 机器上安装 Python3.5，而不会删除或干扰 Python 2.7.</p><p><code>yum -y install centos-release-scl</code></p><p><strong>这就是 zabbix 5.0 和 4.0 的区别之一，不过因为我们的系统是 CentOS Steam 8，直接安装 php 刚好就是 7.2 版本，所以不存在这个问题🤣</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">4.安裝zabbix所需的数据库</span><br><span class="line">[root@server ~]<span class="comment"># dnf -y install mariadb-server</span></span><br><span class="line"></span><br><span class="line">5.配置数据库</span><br><span class="line">[root@server ~]<span class="comment"># systemctl enable --now mariadb</span></span><br><span class="line"></span><br><span class="line">初始化数据库,设置密码</span><br><span class="line">[root@server ~]<span class="comment"># mysql_secure_installation </span></span><br><span class="line">...</span><br><span class="line">Enter current password <span class="keyword">for</span> root (enter <span class="keyword">for</span> none): 【回车,默认是空】</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] y【设置root密码】</span><br><span class="line">New password:  【redhat】</span><br><span class="line">Re-enter new password: 【redhat】</span><br><span class="line">Password updated successfully!</span><br><span class="line"></span><br><span class="line">Remove anonymous <span class="built_in">users</span>? [Y/n] y【Y,移除匿名用户】</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n] n【n,不禁止root远程登录】</span><br><span class="line"> ... skipping.</span><br><span class="line"></span><br><span class="line">Remove <span class="built_in">test</span> database and access to it? [Y/n] y【Y,删除<span class="built_in">test</span>数据库】</span><br><span class="line"> - Dropping <span class="built_in">test</span> database...</span><br><span class="line"> ... Success!</span><br><span class="line"> - Removing privileges on <span class="built_in">test</span> database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y【Y,确认刷新授权表】</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">登录数据库</span><br><span class="line">[root@server ~]<span class="comment"># mysql -uroot -predhat</span></span><br><span class="line"></span><br><span class="line">创建zabbix数据库</span><br><span class="line">MariaDB [(none)]&gt; create database zabbix character <span class="built_in">set</span> utf8 collate utf8_bin;</span><br><span class="line">Query OK, 1 row affected (0.001 sec)</span><br><span class="line"></span><br><span class="line">添加数据库用户,以及zabbix所需的数据库信息</span><br><span class="line">MariaDB [(none)]&gt; create user zabbix@localhost identified by <span class="string">&quot;redhat&quot;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant all privileges on zabbix.* to zabbix@localhost;</span><br><span class="line">Query OK, 0 rows affected (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; <span class="built_in">exit</span></span><br><span class="line">Bye</span><br><span class="line"></span><br><span class="line">6.使用zabbix-mysql命令,导入数据库信息</span><br><span class="line">[root@server ~]<span class="comment"># zcat /usr/share/doc/zabbix-server-mysql/create.sql.gz | mysql -uzabbix -predhat zabbix</span></span><br><span class="line"></span><br><span class="line">[root@server ~]<span class="comment"># mysql -uroot -predhat -e &quot;show tables from zabbix;&quot;</span></span><br><span class="line">| <span class="built_in">users</span>                      |</span><br><span class="line">| users_groups               |</span><br><span class="line">| usrgrp                     |</span><br><span class="line">| valuemaps                  |</span><br><span class="line">| widget                     |</span><br><span class="line">| widget_field               |</span><br><span class="line">+----------------------------+</span><br><span class="line"></span><br><span class="line">7.修改zabbix server配置文件,修改数据库密码</span><br><span class="line">[root@server ~]<span class="comment"># vim /etc/zabbix/zabbix_server.conf </span></span><br><span class="line">...</span><br><span class="line"><span class="comment"># DBPassword=</span></span><br><span class="line">DBPassword=redhat<span class="comment"># 指定数据库密码</span></span><br><span class="line"></span><br><span class="line">8.修改zabbix的php配置文件</span><br><span class="line">[root@server ~]<span class="comment"># vim /etc/php-fpm.d/zabbix.conf </span></span><br><span class="line">; php_value[date.timezone] = Europe/Riga<span class="comment"># 默认是注释的&quot;;&quot;</span></span><br><span class="line">php_value[date.timezone] = Asia/Shanghai<span class="comment"># 将时区改成亚洲/上海</span></span><br><span class="line"></span><br><span class="line">9.启动zabbix服务</span><br><span class="line"><span class="comment"># zabbix前端请求是交给php解析</span></span><br><span class="line">[root@server ~]<span class="comment"># ls /etc/systemd/system | grep php</span></span><br><span class="line">php-fpm.service.d</span><br><span class="line">[root@server ~]<span class="comment"># systemctl start zabbix-server zabbix-agent httpd php-fpm </span></span><br><span class="line">[root@server ~]<span class="comment"># systemctl enable zabbix-server zabbix-agent httpd php-fpm</span></span><br><span class="line"></span><br><span class="line">10.访问zabbix界面,和4.0一致,IP + /zabbix</span><br></pre></td></tr></table></figure><img src="/2022/11/11/zabbix/image-20221114141325025.png" alt="image-20221114141325025" style="zoom:150%;"><p>后续步骤参考 zabbix4.0</p><img src="/2022/11/11/zabbix/image-20221114141628067.png" alt="image-20221114141628067" style="zoom:150%;"><img src="/2022/11/11/zabbix/image-20221114141857519.png" alt="image-20221114141857519" style="zoom: 200%;">]]></content>
    
    
    <summary type="html">&lt;p&gt;今天来部署 Zabbix 来监控我的服务器；&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Zabbix 官网手册：&lt;a href=&quot;https://www.zabbix.com/cn/manuals&quot;&gt;https://www.zabbix.com/cn/manuals&lt;/a&gt; ；其中 LTS（Long Term Support）是长期支持版本。&lt;/p&gt;
&lt;p&gt;我们的服务器环境依旧是 &lt;strong&gt;CentOS Stream 8&lt;/strong&gt;，安装 Zabbix 的版本是 &lt;strong&gt;4.0 LTS&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;安装-zabbix-4-0-版本&quot;&gt;&lt;a href=&quot;#安装-zabbix-4-0-版本&quot; class=&quot;headerlink&quot; title=&quot;安装 zabbix 4.0 版本&quot;&gt;&lt;/a&gt;安装 zabbix 4.0 版本&lt;/h2&gt;&lt;h3 id=&quot;服务端部署流程&quot;&gt;&lt;a href=&quot;#服务端部署流程&quot; class=&quot;headerlink&quot; title=&quot;服务端部署流程&quot;&gt;&lt;/a&gt;服务端部署流程&lt;/h3&gt;</summary>
    
    
    
    <category term="监控" scheme="https://laijune.github.io/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="Zabbix" scheme="https://laijune.github.io/tags/Zabbix/"/>
    
  </entry>
  
  <entry>
    <title>Linux 远程桌面 Windows</title>
    <link href="https://laijune.github.io/2022/10/14/Linux%20Remote%20Windows%20&amp;%20Linux/"/>
    <id>https://laijune.github.io/2022/10/14/Linux%20Remote%20Windows%20&amp;%20Linux/</id>
    <published>2022-10-14T12:00:00.000Z</published>
    <updated>2022-11-15T06:23:22.000Z</updated>
    
    <content type="html"><![CDATA[<p><font color="red">上一章我们尝试了 windows 远程连接 Linux 的机器，只需要在 Linux 客户端上安装 xrdp 工具并开启服务即可，这次我们尝试 Linux 连接 Windows，还有 Linux 连接 Linux . . . </font></p><p>Linux 远程连接 Windows 有两种方法，rdesktop 和 freerdp；</p><p>Ubuntu 安装这两种包很方便，只需 apt install rdesktop 或 apt install freerdp 即可，因为 Ubuntu 是基于 Debain 架构的；</p><p>CentOS 系列安装则费劲很多，因为需要额外安装其它的依赖包</p><h2 id="安装-rdesktop"><a href="#安装-rdesktop" class="headerlink" title="安装 rdesktop"></a>安装 rdesktop</h2><blockquote><p><strong>rdesktop</strong> 是一个用于连接到 Windows 远程桌面服务的开源 UNIX 客户端，能够原生使用远程桌面协议 (RDP) 来呈现用户的 Windows 桌面。</p><p>rdesktop 已知可与 Windows 服务器版本（从 NT 4 终端服务器到 Windows Server 2016）一起工作。</p><p>本次客户端安装的版本是 CentOS Stream 9</p></blockquote><p><strong>准备工作</strong></p><ol><li>配置网络，能联通外网</li></ol><ol start="2"><li>从 github 上下载 rdesktop 的压缩包，链接 <a href="https://github.com/rdesktop/rdesktop">https://github.com/rdesktop/rdesktop</a></li></ol><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># wget https://github.com/rdesktop/rdesktop/releases/download/v1.9.0/rdesktop-1.9.0.tar.gz</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># tar xf rdesktop-1.9.0.tar.gz </span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd rdesktop-1.9.0/</span></span><br><span class="line"></span><br><span class="line">- 编译过程中会出现各种报错，是由于依赖的安装包未安装的原因，安装对应的依赖包即可</span><br><span class="line">- 安装缺少的依赖包</span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install python3-pip</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install python-devel</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install libX11-devel </span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install gcc g++</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install krb5-devel</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install libtasn1-devel</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install libXcursor-devel</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install gnutls-devel</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># python3 -m pip install gssapi</span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># dnf -y install pcsc-lite</span></span><br><span class="line">...</span><br><span class="line">Installed:</span><br><span class="line">  pcsc-lite-1.9.4-1.el9.x86_64                    pcsc-lite-ccid-1.4.36-1.el9.x86_64                    pcsc-lite-libs-1.9.4-1.el9.x86_64    </span><br><span class="line">  </span><br><span class="line">- 根据版本号需要安装对应的 pcsc-lite-devel 安装包 </span><br><span class="line">- 在此链接 http://www.rpmfind.net/linux/rpm2html/search.php?query=pcsc-lite-devel</span><br><span class="line">- 安装包选择: pcsc-lite-develSystem: centosArch: x86_64</span><br><span class="line">&gt; 因为我们安装pcsc的版本是1.9.4，所以选择<span class="string">&#x27;pcsc-lite-devel-1.9.4-1.el9.x86_64.rpm&#x27;</span>版本,</span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># wget http://www.rpmfind.net/linux/centos-stream/9-stream/CRB/x86_64/os/Packages/pcsc-lite-devel-1.9.4-1.el9.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># rpm -i pcsc-lite-devel-1.9.4-1.el9.x86_64.rpm </span></span><br><span class="line"><span class="comment"># 如果选择的版本不是一样的话,是无法安装成功的</span></span><br></pre></td></tr></table></figure><ul><li>编译，安装</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- okay,安装完依赖包后,再使用./configure进行编译安装</span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># ./configure </span></span><br><span class="line">...</span><br><span class="line">configure: creating ./config.status</span><br><span class="line">config.status: creating Makefile👈看到这则说明编译成功了</span><br><span class="line"></span><br><span class="line">- 最后输入下面命令,完成安装</span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># make </span></span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># make install</span></span><br></pre></td></tr></table></figure><ul><li><strong><font color="blue">连接 Windows</font></strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 使用 rdesktop 远程连接</span><br><span class="line">[root@localhost rdesktop-1.9.0]<span class="comment"># rdesktop 192.168.0.193#客户端IP,默认是3389端口</span></span><br><span class="line">...</span><br><span class="line">Do you trust this certificate (<span class="built_in">yes</span>/no)? 【<span class="built_in">yes</span>】</span><br></pre></td></tr></table></figure><img src="/2022/10/14/Linux%20Remote%20Windows%20&%20Linux/image-20221011221251445.png" alt="image-20221011221251445" style="zoom:80%;"><ul><li><strong><font color="brown">连接 Linux 服务端</font></strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 当然,Linux之间也可以通过 rdesktop 实现<span class="comment"># 前提是服务端的Linux配置好了xrdp等服务并启动</span></span><br><span class="line">-g指定屏幕分辨率</span><br><span class="line">-u指定用户名</span><br><span class="line">-p 指定密码</span><br><span class="line">[root@localhost ~]<span class="comment"># rdesktop -g 90% -u root 10.10.10.10# 默认是3389端口</span></span><br></pre></td></tr></table></figure><img src="/2022/10/14/Linux%20Remote%20Windows%20&%20Linux/xrdp.gif" alt="xrdp" style="zoom:95%;"><h2 id="安装-freerdp"><a href="#安装-freerdp" class="headerlink" title="安装 freerdp"></a>安装 freerdp</h2><blockquote><p>FreeRDP 是一个 Remote Desktop Protocol（协议）的一个实现，遵循Apache开源协议，支持3D功能，并有较高刷新率，也支持RemoteFX，H264编解码，用户管理，音频以及外设重定向等功能。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- 安装freerdp软件包</span><br><span class="line">[root@localhost ~]<span class="comment"># dnf -y install freerdp</span></span><br><span class="line"></span><br><span class="line">- 然后就可以直接使用了,freerdp 在 centos 和 ubuntu 都可以直接安装</span><br><span class="line">&gt; 非交互式</span><br><span class="line">[root@localhost ~]<span class="comment"># xfreerdp -u user -p passwd -v 192.168.0.193</span></span><br><span class="line"></span><br><span class="line">&gt; 交互式</span><br><span class="line">[root@localhost ~]<span class="comment"># xfreerdp -u user -v 192.168.0.193</span></span><br><span class="line">Password:【密码】</span><br><span class="line"></span><br><span class="line">-u 指定用户名</span><br><span class="line">-p指定密码</span><br><span class="line">-wwide 宽</span><br><span class="line">-hhigh 高</span><br><span class="line">-f full,屏幕全屏,但是这样不好退出哈哈,屏占比拉满😂</span><br><span class="line">- [root@localhost ~]<span class="comment"># xfreerdp -u root -p redhat -w 1920 -h 1080 -v 10.10.10.10</span></span><br></pre></td></tr></table></figure><img src="/2022/10/14/Linux%20Remote%20Windows%20&%20Linux/freerdp.gif" alt="freerdp" style="zoom:95%;">]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;font color=&quot;red&quot;&gt;上一章我们尝试了 windows 远程连接 Linux 的机器，只需要在 Linux 客户端上安装 xrdp 工具并开启服务即可，这次我们尝试 Linux 连接 Windows，还有 Linux 连接 Linux . . . &lt;/font&gt;&lt;/p&gt;
&lt;p&gt;Linux 远程连接 Windows 有两种方法，rdesktop 和 freerdp；&lt;/p&gt;
&lt;p&gt;Ubuntu 安装这两种包很方便，只需 apt install rdesktop 或 apt install freerdp 即可，因为 Ubuntu 是基于 Debain 架构的；&lt;/p&gt;
&lt;p&gt;CentOS 系列安装则费劲很多，因为需要额外安装其它的依赖包&lt;/p&gt;
&lt;h2 id=&quot;安装-rdesktop&quot;&gt;&lt;a href=&quot;#安装-rdesktop&quot; class=&quot;headerlink&quot; title=&quot;安装 rdesktop&quot;&gt;&lt;/a&gt;安装 rdesktop&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;rdesktop&lt;/strong&gt; 是一个用于连接到 Windows 远程桌面服务的开源 UNIX 客户端，能够原生使用远程桌面协议 (RDP) 来呈现用户的 Windows 桌面。&lt;/p&gt;
&lt;p&gt;rdesktop 已知可与 Windows 服务器版本（从 NT 4 终端服务器到 Windows Server 2016）一起工作。&lt;/p&gt;
&lt;p&gt;本次客户端安装的版本是 CentOS Stream 9&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;准备工作&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;配置网络，能联通外网&lt;/li&gt;
&lt;/ol&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;从 github 上下载 rdesktop 的压缩包，链接 &lt;a href=&quot;https://github.com/rdesktop/rdesktop&quot;&gt;https://github.com/rdesktop/rdesktop&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="RDP" scheme="https://laijune.github.io/categories/RDP/"/>
    
    
    <category term="rdesktop" scheme="https://laijune.github.io/tags/rdesktop/"/>
    
  </entry>
  
  <entry>
    <title>Windows 远程桌面 Linux</title>
    <link href="https://laijune.github.io/2022/10/07/Windows%20Remote%20Linux/"/>
    <id>https://laijune.github.io/2022/10/07/Windows%20Remote%20Linux/</id>
    <published>2022-10-07T02:00:00.000Z</published>
    <updated>2022-11-15T06:23:20.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>注意：RHEL9系列（包括rhel）的版本在安装软件时会出现不成功的情况，这应该和 rhel 的默认源和订阅有关；</p><p>在 CentOS 和 CentOS Stream 系列不会出现这个问题，最小化安装和图形化安装（GUI）都可以配置</p></blockquote><p><strong>本次实验使用的是最小化安装，无图形界面</strong></p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol><li>配置网络，能上外网 </li></ol><ol start="2"><li>配置 aliyun 的 epel 源，链接 <a href="http://www.aliyun.com/">www.aliyun.com</a> ，搜索 epel</li></ol><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; 下载新repo 到/etc/yum.repos.d/【下面例子以CentOS Stream 9做演示】</span><br><span class="line"></span><br><span class="line">- 安装epel配置包</span><br><span class="line">yum install -y https://mirrors.aliyun.com/epel/epel-release-latest-8.noarch.rpm</span><br><span class="line"><span class="comment">#注意: 如果是centos 7,则直接安装epel-release就可以安装xrdp了,不需要替换epel源,否则会提示使用yum命令失败</span></span><br><span class="line"></span><br><span class="line">- 将repo配置中的地址替换为阿里云镜像站地址</span><br><span class="line">sed -i <span class="string">&#x27;s|^#baseurl=https://download.example/pub|baseurl=https://mirrors.aliyun.com|&#x27;</span> /etc/yum.repos.d/epel*</span><br><span class="line">sed -i <span class="string">&#x27;s|^metalink|#metalink|&#x27;</span> /etc/yum.repos.d/epel*</span><br></pre></td></tr></table></figure><h2 id="安装-xrdp-和-xorgxrdp"><a href="#安装-xrdp-和-xorgxrdp" class="headerlink" title="安装 xrdp 和 xorgxrdp"></a>安装 xrdp 和 xorgxrdp</h2><blockquote><p><a href="http://www.xrdp.org/">Xrdp</a>是一个开源工具，允许用户通过 Windows <a href="https://so.csdn.net/so/search?q=RDP&spm=1001.2101.3001.7020">RDP</a> 访问 Linux 远程桌面。除了 Windows RDP，xrdp 工具还接受来自其他 RDP 客户端的连接，如 FreeRDP、rdesktop 和 NeutrinoRDP。Xrdp 现在支持 <a href="https://github.com/neutrinolabs/xrdp/wiki/TLS-security-layer">TLS 安全层</a>。</p><p>xrdp 只是一个壳，提供一个远程连接的<strong>加密</strong>通道。</p><p>Xorg 是共享机器的资源。每次连接一个新用户，都会创建一个新的session，创建一个新的桌面。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># dnf -y install xrdp xorgxrdp</span></span><br><span class="line"></span><br><span class="line">修改配置文件</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/xrdp/xrdp.ini</span></span><br><span class="line">...</span><br><span class="line">[Globals]</span><br><span class="line">; xrdp.ini file version number</span><br><span class="line">ini_version=1</span><br><span class="line"></span><br><span class="line">; fork a new process <span class="keyword">for</span> each incoming connection</span><br><span class="line">fork=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">; ports to listen on, number alone means listen on all interfaces</span><br><span class="line">; 0.0.0.0 or :: <span class="keyword">if</span> ipv6 is configured</span><br><span class="line">; space between multiple occurrences</span><br><span class="line">; ALL specified interfaces must be UP when xrdp starts, otherwise xrdp will fail to start</span><br><span class="line">;</span><br><span class="line">; Examples:</span><br><span class="line">;   port=3389</span><br><span class="line">;   port=unix://./tmp/xrdp.socket</span><br><span class="line">;   port=tcp://.:3389                           127.0.0.1:3389</span><br><span class="line">;   port=tcp://:3389                            *:3389</span><br><span class="line">;   port=tcp://&lt;any ipv4 format addr&gt;:3389      192.168.1.1:3389</span><br><span class="line">;   port=tcp6://.:3389                          ::1:3389</span><br><span class="line">;   port=tcp6://:3389                           *:3389</span><br><span class="line">;   port=tcp6://&#123;&lt;any ipv6 format addr&gt;&#125;:3389   &#123;FC00:0:0:0:0:0:0:1&#125;:3389</span><br><span class="line">;   port=vsock://&lt;cid&gt;:&lt;port&gt;</span><br><span class="line">port=3389👈【Global】下的port是远程连接桌面时开放的端口,windows远程连接必须开放3389</span><br><span class="line"></span><br><span class="line">[Xorg]👈【xorg】默认是注释,不启用的;去掉<span class="string">&#x27;#&#x27;</span>,开放Xorg会话</span><br><span class="line">name=Xorg</span><br><span class="line">lib=libxup.so</span><br><span class="line">username=ask</span><br><span class="line">password=ask</span><br><span class="line">ip=127.0.0.1</span><br><span class="line">port=-1</span><br><span class="line">code=20</span><br><span class="line"></span><br><span class="line"><span class="comment">#[Xvnc]👈【Xvnc】默认启用Xvnc会话,注释,不启用. </span></span><br><span class="line"><span class="comment">#name=Xvnc</span></span><br><span class="line"><span class="comment">#lib=libvnc.so</span></span><br><span class="line"><span class="comment">#username=ask</span></span><br><span class="line"><span class="comment">#password=ask</span></span><br><span class="line"><span class="comment">#ip=127.0.0.1</span></span><br><span class="line"><span class="comment">#port=-1</span></span><br></pre></td></tr></table></figure><blockquote><p>这里选择使用 <strong>Xorg</strong> 会话而不是 Xvnc，Xvnc 好像要和 tigerVNC 配合的。我没装 tigerVNC</p></blockquote><ul><li>开放防火墙所在区域需要远程连入端口</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --get-default-zone</span></span><br><span class="line">public</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --zone=public --add-port=3389/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --reload</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果需要配置公网IP连入的端口,则开放公网连接的端口即可</span></span><br></pre></td></tr></table></figure><ul><li>重启 xrdp 服务，远程接入</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># systemctl restart xrdp</span></span><br></pre></td></tr></table></figure><img src="/2022/10/07/Windows%20Remote%20Linux/image-20221009105031756.png" alt="image-20221009105031756" style="zoom:80%;"><img src="/2022/10/07/Windows%20Remote%20Linux/image-20221009105259323.png" alt="image-20221009105259323" style="zoom:80%;"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 添加用户,设置密码</span><br><span class="line">[root@localhost ~]<span class="comment"># for i in &#123;1..2&#125;; do useradd stu$i; done</span></span><br><span class="line">[root@localhost ~]<span class="comment"># for i in &#123;1..2&#125;; do echo redhat | passwd --stdin stu$i; done</span></span><br><span class="line">Changing password <span class="keyword">for</span> user stu1.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user stu2.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure><ul><li><strong>此时远程登录用户是会直接退出会话的，因为我们是最小化安装，还没有桌面，无法进入远程界面</strong></li></ul><img src="/2022/10/07/Windows%20Remote%20Linux/stu1.gif" alt="stu1" style="zoom:80%;"><blockquote><p><strong>如果是安装了图形化界面的CentOS，此时就可以直接进入自带的 GNOME 桌面了</strong></p><p>GNOME 是一个完全由自由软件组成的桌面环境</p></blockquote><img src="/2022/10/07/Windows%20Remote%20Linux/stu1-2.gif" alt="stu1-2" style="zoom:80%;"><p><strong><font color="purple">不过默认安装的GNOME桌面环境，在资源要求较高的情况下，会比较卡顿，这时可以安装openbox轻量级的图形桌面</font></strong></p><h2 id="安装-openbox"><a href="#安装-openbox" class="headerlink" title="安装 openbox"></a>安装 openbox</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">- 安装openbox轻巧窗口管理器(Openbox是运行于搭载X11的GNU/Linux上的轻巧窗口管理器)</span><br><span class="line">[root@localhost ~]<span class="comment"># dnf -y install openbox</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 将默认openbox的配置文件做备份</span><br><span class="line">[root@localhost ~]<span class="comment"># mv /etc/X11/xinit/Xsession /etc/X11/xinit/Xsession.bak</span></span><br><span class="line"></span><br><span class="line">- 重新编写启动会话文件</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/X11/xinit/Xsession</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">exec</span> openbox-session👈开机执行Openbox桌面会话;一定要这么设置,否则是不会进入openbox桌面</span><br><span class="line"></span><br><span class="line">- 备份openbox默认xml文件</span><br><span class="line">[root@localhost ~]<span class="comment"># mv /etc/xdg/openbox/menu.xml /etc/xdg/openbox/menu.xml.bak</span></span><br><span class="line"></span><br><span class="line">- 自定义xml文件</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/xdg/openbox/menu.xml</span></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"></span><br><span class="line">&lt;openbox_menu xmlns=<span class="string">&quot;http://openbox.org/3.4/menu&quot;</span>&gt;</span><br><span class="line">&lt;menu <span class="built_in">id</span>=<span class="string">&quot;root-menu&quot;</span> label=<span class="string">&quot;Openbox 3&quot;</span>&gt;</span><br><span class="line">  &lt;separator label=<span class="string">&quot;Tools&quot;</span>/&gt;</span><br><span class="line">  &lt;item label=<span class="string">&quot;Terminal&quot;</span>&gt;</span><br><span class="line">    &lt;action name=<span class="string">&quot;Execute&quot;</span>&gt;</span><br><span class="line">      &lt;<span class="built_in">command</span>&gt;xfce4-terminal&lt;/command&gt;</span><br><span class="line">    &lt;/action&gt;</span><br><span class="line">  &lt;/item&gt;</span><br><span class="line">  &lt;item label=<span class="string">&quot;VNC Viewer&quot;</span>&gt;</span><br><span class="line">    &lt;action name=<span class="string">&quot;Execute&quot;</span>&gt;</span><br><span class="line">      &lt;<span class="built_in">command</span>&gt;vncviewer&lt;/command&gt;</span><br><span class="line">    &lt;/action&gt;</span><br><span class="line">  &lt;/item&gt;</span><br><span class="line">  &lt;separator label=<span class="string">&quot;Others&quot;</span>/&gt;</span><br><span class="line">  &lt;item label=<span class="string">&quot;Reconfigure&quot;</span>&gt;</span><br><span class="line">    &lt;action name=<span class="string">&quot;Reconfigure&quot;</span> /&gt;</span><br><span class="line">  &lt;/item&gt;</span><br><span class="line">  &lt;item label=<span class="string">&quot;Exit&quot;</span>&gt;</span><br><span class="line">    &lt;action name=<span class="string">&quot;Exit&quot;</span>&gt;</span><br><span class="line">      &lt;prompt&gt;<span class="built_in">yes</span>&lt;/prompt&gt;</span><br><span class="line">    &lt;/action&gt;</span><br><span class="line">  &lt;/item&gt;</span><br><span class="line">  &lt;separator/&gt;</span><br><span class="line">  &lt;item label=<span class="string">&quot;Log Out&quot;</span>&gt;</span><br><span class="line">    &lt;action name=<span class="string">&quot;SessionLogout&quot;</span>&gt;</span><br><span class="line">      &lt;prompt&gt;<span class="built_in">yes</span>&lt;/prompt&gt;</span><br><span class="line">    &lt;/action&gt;</span><br><span class="line">  &lt;/item&gt;</span><br><span class="line">&lt;/menu&gt;</span><br><span class="line"></span><br><span class="line">&lt;/openbox_menu&gt;</span><br><span class="line"></span><br><span class="line">- 重启xrdp服务</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart xrdp</span></span><br></pre></td></tr></table></figure><p><strong>此时可以顺利进入界面了，不过进入后打开终端会提示<font color="red">没有文件或目录执行vncviewer子进程</font></strong></p><img src="/2022/10/07/Windows%20Remote%20Linux/fail%20to%20execute.gif" alt="fail to execute" style="zoom:80%;"><p><strong>所以我们还需安装其他的组件，以支持终端操作配置</strong></p><p><strong><font color="purple">安装其它组件</font></strong></p><blockquote><p>xfce4-terminal 是一个轻量级和易于使用的终端模拟器应用程序</p><p>Tint2 是一个轻量级面板和任务栏，它可以为任何窗口管理器提供一致的体验</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- 安装xfce4-terminal</span><br><span class="line">[root@localhost ~]<span class="comment"># dnf -y install xfce4-terminal</span></span><br><span class="line"></span><br><span class="line">- 安装tint2.x86_64</span><br><span class="line"><span class="comment"># 注意: tint2软件包在高版本的 CentOS Stream9 下无法安装,这是版本过新的问题,暂时无法解决; centos 7 可以安装,centos 8 没试过</span></span><br><span class="line"><span class="string">&#x27;不过不影响,只需xfce-terminal即可顺利使用终端了&#x27;</span></span><br><span class="line"></span><br><span class="line">- 重启xrdp服务</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart xrdp</span></span><br><span class="line"></span><br><span class="line">- 因为是最小化安装,默认是没有firefox浏览器,手动安装即可!</span><br><span class="line">[root@localhost ~]<span class="comment"># dnf -y install firefox</span></span><br></pre></td></tr></table></figure><img src="/2022/10/07/Windows%20Remote%20Linux/success.gif" alt="success" style="zoom:80%;">]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;注意：RHEL9系列（包括rhel）的版本在安装软件时会出现不成功的情况，这应该和 rhel 的默认源和订阅有关；&lt;/p&gt;
&lt;p&gt;在 CentOS 和 CentOS Stream 系列不会出现这个问题，最小化安装和图形化安装（GUI）都可以配置&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;本次实验使用的是最小化安装，无图形界面&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;配置网络，能上外网 &lt;/li&gt;
&lt;/ol&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;配置 aliyun 的 epel 源，链接 &lt;a href=&quot;http://www.aliyun.com/&quot;&gt;www.aliyun.com&lt;/a&gt; ，搜索 epel&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="RDP" scheme="https://laijune.github.io/categories/RDP/"/>
    
    
    <category term="xrdp" scheme="https://laijune.github.io/tags/xrdp/"/>
    
  </entry>
  
  <entry>
    <title>机器学习</title>
    <link href="https://laijune.github.io/2022/07/14/Machine%20learning/"/>
    <id>https://laijune.github.io/2022/07/14/Machine%20learning/</id>
    <published>2022-07-14T12:00:03.000Z</published>
    <updated>2022-11-15T06:21:58.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="搭建私有仓库，上传-tensorflow-镜像"><a href="#搭建私有仓库，上传-tensorflow-镜像" class="headerlink" title="搭建私有仓库，上传 tensorflow 镜像"></a>搭建私有仓库，上传 tensorflow 镜像</h4><p><strong>① 配置网络，能连通外网</strong></p><p><strong>② 安装docker</strong></p><p>参考上篇的云容器平台实战，此处省略。。。</p><span id="more"></span><p><strong>③ cc网下载<code> images.zip</code>文件，上传<code> images</code>文件</strong>（<code>scp</code>，<code>WinSCP</code>，<code>XFTP</code>，<code>SecureCRT</code>)</p><p>​    先在物理机解压，再上传<code>image</code>文件   👇</p><p>​    <code>scp -r images root@192.168.169.10:/root</code></p><p><strong>④ 将<code>registry_latest.tar</code>映像导入</strong>     </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># docker load -i images/registry_latest.tar</span></span><br><span class="line">查看registry映像</span><br><span class="line">[root@localhost ~]<span class="comment"># docker images</span></span><br></pre></td></tr></table></figure><p><strong>⑤创建一个 registry 容器</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># docker run -d --name registry -v /opt/registry:/var/lib/registry -p 5000:5000 --restart=always registry:latest</span></span><br><span class="line"></span><br><span class="line">查看容器</span><br><span class="line">[root@localhost ~]<span class="comment"># docker ps</span></span><br></pre></td></tr></table></figure><p><strong>⑥ 配置仓库地址</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="string">&quot;insecure-registries&quot;</span>: [<span class="string">&quot;192.168.169.10:5000&quot;</span>]<span class="comment"># 虚拟机IP:5000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">重新加载模块、重启docker</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl daemon-reload</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart docker</span></span><br><span class="line"></span><br><span class="line">访问测试</span><br><span class="line">[root@localhost ~]<span class="comment"># curl http://192.168.169.10:5000/v2</span></span><br><span class="line">&lt;a href=<span class="string">&quot;/v2/&quot;</span>&gt;Moved Permanently&lt;/a&gt;.</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># curl http://192.168.169.10:5000/v2/_catalog</span></span><br><span class="line">&#123;<span class="string">&quot;repositories&quot;</span>:[]&#125;</span><br></pre></td></tr></table></figure><p><strong>⑦ 上传 TensorFlow 镜像</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">下载tensorflow镜像</span><br><span class="line">[root@localhost ~]<span class="comment"># docker pull daocloud.io/daocloud/tensorflow:1.14.0-py3-jupyter</span></span><br><span class="line"></span><br><span class="line">查看tensorflow镜像</span><br><span class="line">[root@localhost ~]<span class="comment"># docker images</span></span><br><span class="line">REPOSITORY                        TAG                  IMAGE ID            CREATED             SIZE</span><br><span class="line">daocloud.io/daocloud/tensorflow   1.14.0-py3-jupyter   fe3f97fcb6ce        3 years ago         1.34 GB</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">给tensorflow打标签</span><br><span class="line">[root@localhost ~]<span class="comment"># docker tag daocloud.io/daocloud/tensorflow:1.14.0-py3-jupyter 192.168.169.10:5000/tensorflow</span></span><br><span class="line"></span><br><span class="line">上传镜像到私有仓库</span><br><span class="line">[root@localhost ~]<span class="comment"># docker push 192.168.169.10:5000/tensorflow</span></span><br></pre></td></tr></table></figure><p><strong>⑧ 访问测试</strong></p><p>浏览器 <code>http://192.168.169.10:5000/v2/_catalog</code>    </p><img src="/2022/07/14/Machine%20learning/image-20220713004722801.png" alt="image-20220713004722801" style="zoom: 80%;"><h4 id="识别手写数字"><a href="#识别手写数字" class="headerlink" title="识别手写数字"></a>识别手写数字</h4><hr><p><strong>① 创建 tensorflow 容器</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># docker run -it --name my-tensorflow -p 8888:8888 -v ~/tensorflow:/test/data daocloud.io/daocloud/tensorflow:1.14.0-py3-jupyter </span></span><br><span class="line">...output omitted...</span><br><span class="line">    Or copy and <span class="built_in">paste</span> one of these URLs:</span><br><span class="line">        http://(480dd667b304 or 127.0.0.1):8888/?token=a6a8f826b5fc2e2142bd2643930b68bebf6ae790e53cd1d8</span><br><span class="line"></span><br><span class="line">访问 👉 http://<span class="string">&#x27;IP地址&#x27;</span>:8888/?token=a6a8f826b5fc2e2142bd2643930b68bebf6ae790e53cd1d8</span><br></pre></td></tr></table></figure><p>![image-20220713093014367](Machine learning/image-20220713093014367.png)</p><p><strong>② 上传<code>mnist.npz</code>和<code>手写数字</code></strong> </p><img src="/2022/07/14/Machine%20learning/image-20220713094229703.png" alt="image-20220713094229703" style="zoom:50%;"><p><strong>③ 编写模拟训练程序</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">data=np.load(<span class="string">&#x27;mnist.npz&#x27;</span>)</span><br><span class="line"></span><br><span class="line">x_train,y_train,x_test,y_test=data[<span class="string">&#x27;x_train&#x27;</span>],data[<span class="string">&#x27;y_train&#x27;</span>],data[<span class="string">&#x27;x_test&#x27;</span>],data[<span class="string">&#x27;y_test&#x27;</span>]</span><br><span class="line"></span><br><span class="line">x_train = tf.keras.utils.normalize(x_train,axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x_test = tf.keras.utils.normalize(x_test,axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">model = tf.keras.models.Sequential()</span><br><span class="line"></span><br><span class="line">model.add(tf.keras.layers.Flatten(input_shape=(<span class="number">28</span>,<span class="number">28</span>)))</span><br><span class="line">model.add(tf.keras.layers.Dense(<span class="number">999</span>,activation=tf.nn.relu))</span><br><span class="line">model.add(tf.keras.layers.Dense(<span class="number">999</span>,activation=tf.nn.relu))</span><br><span class="line">model.add(tf.keras.layers.Dense(<span class="number">10</span>,activation=tf.nn.softmax))</span><br><span class="line"></span><br><span class="line">model.<span class="built_in">compile</span>(optimizer=<span class="string">&#x27;adam&#x27;</span>,</span><br><span class="line">             loss=<span class="string">&#x27;sparse_categorical_crossentropy&#x27;</span>,</span><br><span class="line">             metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line"></span><br><span class="line">model.fit(x_train,y_train,epochs=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">val_loss,val_acc=model.evaluate(x_test,y_test)</span><br><span class="line"><span class="built_in">print</span>(val_loss)</span><br><span class="line"><span class="built_in">print</span>(val_acc)</span><br><span class="line"></span><br><span class="line">model.save(<span class="string">&#x27;my_model.h5&#x27;</span>)</span><br><span class="line"></span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure><p><strong>④ 安装imageio</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade pip</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install imageio -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure><p><strong>⑤ 导入测试图片</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> imageio</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img_data = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> image_file_name <span class="keyword">in</span> glob.glob(<span class="string">&#x27;img_?.jpg&#x27;</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;loading ...&quot;</span>,image_file_name)</span><br><span class="line">        img_array = imageio.imread(image_file_name,as_gray=<span class="literal">True</span>)</span><br><span class="line">        img_data.append((<span class="number">255.0</span> - img_array.reshape(<span class="number">784</span>)) / <span class="number">255.0</span>)</span><br><span class="line">        self_data = np.array(img_data).reshape(<span class="built_in">len</span>(img_data),<span class="number">28</span>,<span class="number">28</span>)</span><br></pre></td></tr></table></figure><p><strong>⑥ 进行预测</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">pre = model.predict(self_data)</span><br><span class="line">predit=[<span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">predit[<span class="number">0</span>]=np.argmax(pre[<span class="number">9</span>])</span><br><span class="line">predit[<span class="number">1</span>]=np.argmax(pre[<span class="number">8</span>])</span><br><span class="line">predit[<span class="number">2</span>]=np.argmax(pre[<span class="number">7</span>])</span><br><span class="line">predit[<span class="number">3</span>]=np.argmax(pre[<span class="number">6</span>])</span><br><span class="line">predit[<span class="number">4</span>]=np.argmax(pre[<span class="number">5</span>])</span><br><span class="line">predit[<span class="number">5</span>]=np.argmax(pre[<span class="number">4</span>])</span><br><span class="line">predit[<span class="number">6</span>]=np.argmax(pre[<span class="number">3</span>])</span><br><span class="line">predit[<span class="number">7</span>]=np.argmax(pre[<span class="number">2</span>])</span><br><span class="line">predit[<span class="number">8</span>]=np.argmax(pre[<span class="number">1</span>])</span><br><span class="line">predit[<span class="number">9</span>]=np.argmax(pre[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(predit)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;搭建私有仓库，上传-tensorflow-镜像&quot;&gt;&lt;a href=&quot;#搭建私有仓库，上传-tensorflow-镜像&quot; class=&quot;headerlink&quot; title=&quot;搭建私有仓库，上传 tensorflow 镜像&quot;&gt;&lt;/a&gt;搭建私有仓库，上传 tensorflow 镜像&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;① 配置网络，能连通外网&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;② 安装docker&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;参考上篇的云容器平台实战，此处省略。。。&lt;/p&gt;</summary>
    
    
    
    <category term="人工智能" scheme="https://laijune.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="Docker" scheme="https://laijune.github.io/tags/Docker/"/>
    
    <category term="TensorFlow" scheme="https://laijune.github.io/tags/TensorFlow/"/>
    
  </entry>
  
  <entry>
    <title>云AI平台实战</title>
    <link href="https://laijune.github.io/2022/07/07/Cloud%20AI/"/>
    <id>https://laijune.github.io/2022/07/07/Cloud%20AI/</id>
    <published>2022-07-07T12:00:02.000Z</published>
    <updated>2023-01-03T14:47:23.278Z</updated>
    
    <content type="html"><![CDATA[<h3 id="制作微信名片"><a href="#制作微信名片" class="headerlink" title="制作微信名片"></a>制作微信名片</h3><hr><p><strong>初始环境，配置网络，能 PING 通外网</strong></p><p><strong>配置 YUM 源</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkdir /dvd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount /dev/sr0 /dvd/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/yum.repos.d/local.repo</span></span><br><span class="line">[<span class="built_in">local</span>]</span><br><span class="line">name = This is <span class="built_in">local</span> repo</span><br><span class="line">baseurl = file:///dvd</span><br><span class="line">enabled = 1</span><br><span class="line">gpgcheck = 0</span><br><span class="line">[root@localhost ~]<span class="comment"># yum clean all</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum repolist</span></span><br></pre></td></tr></table></figure><span id="more"></span><p><strong>安装软件包</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install epel-release</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install python36 python36u-pip python36u-redis python36-numpy</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install python36-devel</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install zlib-devel</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install libjpeg-turbo-devel</span></span><br></pre></td></tr></table></figure><p><strong>配置 pip</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkdir .pip</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd .pip/</span></span><br><span class="line">[root@localhost .pip]<span class="comment"># vim pip.conf</span></span><br><span class="line">[global]</span><br><span class="line">index-url=https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">trusted-host=pypi.tuna.tsinghua.edu.cn</span><br><span class="line"></span><br><span class="line">安装gcc,以免安装MyQR报错</span><br><span class="line">[root@localhost .pip]<span class="comment"># yum -y install gcc* </span></span><br><span class="line">安装MyQR</span><br><span class="line">[root@localhost .pip]<span class="comment"># pip3 install MyQR</span></span><br></pre></td></tr></table></figure><p><strong>安装 zbar、pyzbar、pillow</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost .pip]<span class="comment"># cd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install zbar</span></span><br><span class="line">[root@localhost ~]<span class="comment"># pip3 install pyzbar pillow</span></span><br></pre></td></tr></table></figure><p><strong>编写微信名片图像解码程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;文件名&#x27;</span>无所谓,以.py结尾</span><br><span class="line">[root@localhost ~]<span class="comment"># vim decode.py</span></span><br><span class="line">from pyzbar.pyzbar import decode</span><br><span class="line">from PIL import Image</span><br><span class="line"></span><br><span class="line">image=<span class="string">&quot;wx.jpg&quot;</span><span class="comment"># 这里图片路径在当前目录 /root/ 目录下,注意文件名和格式要一致;物理机的话建议scp</span></span><br><span class="line">img = Image.open(image)</span><br><span class="line">barcodes = decode(img)</span><br><span class="line"><span class="keyword">for</span> barcode <span class="keyword">in</span> barcodes:</span><br><span class="line">        url = barcode.data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(url)</span><br><span class="line">        </span><br><span class="line">[root@localhost ~]<span class="comment"># python3 decode.py </span></span><br><span class="line">https://u.wechat.com/MFSMySpvW2Ec2mJUjK7cn0M        <span class="comment"># 获得输出链接,复制</span></span><br></pre></td></tr></table></figure><p><strong>编写微信代码</strong></p><p>动态图片背景<strong>（gif）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;文件名&#x27;</span>无所谓,以.py结尾</span><br><span class="line"><span class="comment"># 原图片路径(picture)在/root/Desktop/222.gif</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim myqr_wx2.py</span></span><br><span class="line">from MyQR import myqr</span><br><span class="line">myqr.run(words=<span class="string">&quot;https://u.wechat.com/MFSMySpvW2Ec2mJUjK7cn0M&quot;</span>,version=3,picture=<span class="string">&quot;/root/Desktop/222.gif&quot;</span>,colorized=True,</span><br><span class="line">        save_name=<span class="string">&quot;233.gif&quot;</span>,注意这里的后缀只能是<span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.bmp&#x27;</span>, <span class="string">&#x27;.gif&#x27;</span>,建议<span class="string">&#x27;.gif&#x27;</span></span><br><span class="line">        save_dir=<span class="string">&quot;/root/Desktop&quot;</span>)输出路径</span><br><span class="line"></span><br><span class="line">这里直接执行py文件可能由于numpy版本过高报错,需要安装低版本</span><br><span class="line">[root@localhost ~]<span class="comment"># pip3 install imageio==2.13.5</span></span><br><span class="line">再次执行py文件</span><br><span class="line">[root@localhost ~]<span class="comment"># python3 myqr_wx2.py</span></span><br><span class="line">line 16: mode: byte</span><br></pre></td></tr></table></figure><h3 id="标识人脸特征"><a href="#标识人脸特征" class="headerlink" title="标识人脸特征"></a>标识人脸特征</h3><hr><p><strong>安装环境</strong></p><p><code>在Python官网下载 python-3.6.6-amd64.exe,如果有其它版本记得先卸载</code></p><img src="/2022/07/07/Cloud%20AI/image-20220711220012434.png" alt="image-20220711220012434" style="zoom:50%;"><p><strong>以下命令在cmd操作</strong>        👇</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">检验 python</span><br><span class="line">C:\Users\Lai&gt;python --version</span><br><span class="line">Python 3.6.6👈 版本</span><br><span class="line"></span><br><span class="line">在当前目录新建pip文件夹,写一个<span class="string">&#x27;pip.ini&#x27;</span>文件</span><br><span class="line"><span class="comment"># 内容如下,注意扩展名是ini</span></span><br><span class="line">[global]</span><br><span class="line">index-url=https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">[install]</span><br><span class="line">trusted-host=pypi.tuna.tsinghua.edu.cn</span><br></pre></td></tr></table></figure><img src="/2022/07/07/Cloud%20AI/2.png" alt="2" style="zoom: 67%;"><p><strong>安装人脸检测相关的包</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">下载 Pillow</span><br><span class="line">C:\Users\Lai&gt;pip install Pillow==7.0.0 -i https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line"></span><br><span class="line">安装 CMake</span><br><span class="line">C:\Users\Lai&gt;pip install CMake</span><br><span class="line"></span><br><span class="line">安装 dlib</span><br><span class="line">C:\Users\Lai&gt;pip install dlib==19.8.1</span><br><span class="line"></span><br><span class="line">安装 face_recognition</span><br><span class="line">C:\Users\Lai&gt;pip install face_recognition</span><br></pre></td></tr></table></figure><p><strong>编写人脸识别特征程序</strong></p><p><code>写一个face_1.py文件,内容如下    👇</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import face_recognition</span><br><span class="line"></span><br><span class="line">from PIL import Image,ImageDraw</span><br><span class="line"></span><br><span class="line">image = face_recognition.load_image_file(<span class="string">&quot;G312xixi.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line">face_landmarks_list = face_recognition.face_landmarks(image)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;I found &#123;&#125; face(s) in this photograph.&quot;</span>.format(len(face_landmarks_list)))</span><br><span class="line"></span><br><span class="line">pil_image = Image.fromarray(image)</span><br><span class="line">d = ImageDraw.Draw(pil_image)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> face_landmarks <span class="keyword">in</span> face_landmarks_list:</span><br><span class="line"><span class="keyword">for</span> facial_feature <span class="keyword">in</span> face_landmarks.keys():</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The &#123;&#125; in this face has the following points:&#123;&#125;&quot;</span>.format(facial_feature,face_landmarks[facial_feature]))</span><br><span class="line"><span class="keyword">for</span> facial_feature <span class="keyword">in</span> face_landmarks.keys():</span><br><span class="line">d.line(face_landmarks[facial_feature],width=5)</span><br><span class="line"></span><br><span class="line">pil_image.show()</span><br></pre></td></tr></table></figure><p>运行程序即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Lai&gt;python face_1.py</span><br></pre></td></tr></table></figure><img src="/2022/07/07/Cloud%20AI/1.png" alt="image-20220711230350855" style="zoom: 80%;">]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;制作微信名片&quot;&gt;&lt;a href=&quot;#制作微信名片&quot; class=&quot;headerlink&quot; title=&quot;制作微信名片&quot;&gt;&lt;/a&gt;制作微信名片&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;初始环境，配置网络，能 PING 通外网&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;配置 YUM 源&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# mkdir /dvd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# mount /dev/sr0 /dvd/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# vim /etc/yum.repos.d/local.repo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;name = This is &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;baseurl = file:///dvd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;enabled = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gpgcheck = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# yum clean all&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# yum repolist&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="人工智能" scheme="https://laijune.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="Python" scheme="https://laijune.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>云容器平台实战</title>
    <link href="https://laijune.github.io/2022/07/01/Cloud%20Container/"/>
    <id>https://laijune.github.io/2022/07/01/Cloud%20Container/</id>
    <published>2022-07-01T12:00:01.000Z</published>
    <updated>2022-11-16T15:23:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>初始快照</code></p><h5 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h5><p>①部署 IP，能联通外网</p><p>②清除防火墙规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># iptables -F</span></span><br><span class="line">[root@localhost ~]<span class="comment"># iptables -X</span></span><br><span class="line">[root@localhost ~]<span class="comment"># iptables -Z</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /usr/sbin/iptables-save</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/selinux/config </span></span><br><span class="line">...</span><br><span class="line">SELINUX=disabled将enforcing改成disabled</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># reboot</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>③关闭 swap 交换分区</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># swapoff -a</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/fstab </span></span><br><span class="line">...</span><br><span class="line"><span class="comment">#/dev/mapper/centos-swap swap                    swap    defaults        0 0</span></span><br><span class="line">注释这一行↑</span><br></pre></td></tr></table></figure><p>④路由转发</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /etc/sysctl.conf </span></span><br><span class="line">...添加以下三行↓</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line"></span><br><span class="line">加载模块</span><br><span class="line">[root@localhost ~]<span class="comment"># modprobe br_netfilter</span></span><br><span class="line">从刚刚写的文件里读取值</span><br><span class="line">[root@localhost ~]<span class="comment"># sysctl -p</span></span><br></pre></td></tr></table></figure><p>⑤物理机 scp 上传<code>Kubernetes.zip</code>文件</p><p>再解压.zip文件</p><p><code>[root@localhost ~]# unzip Kubernetes.zip </code></p><p>⑥先备份<code>/etc/yum.repos.d/</code>下的所有 Centos-xxx 文件，再配置本地 yum 源（只留这一个文件）</p><p>⑦重启服务</p><p><code>[root@localhost Kubernetes]# systemctl restart network</code></p><p>⑧安装 docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install docker*</span></span><br><span class="line"></span><br><span class="line">启动docker服务并设置开机自启</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl start docker ; systemctl enable docker</span></span><br><span class="line"></span><br><span class="line">查看docker信息</span><br><span class="line">[root@localhost ~]<span class="comment"># docker info</span></span><br><span class="line"></span><br><span class="line">重启加载服务</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl daemon-reload </span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl start docker ; systemctl enable docker</span></span><br></pre></td></tr></table></figure><h5 id="部署-MySQL-容器"><a href="#部署-MySQL-容器" class="headerlink" title="部署 MySQL 容器"></a>部署 MySQL 容器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">拉取mysql映像</span><br><span class="line">[root@localhost ~]<span class="comment"># docker pull mysql</span></span><br><span class="line"></span><br><span class="line">创建mysql容器</span><br><span class="line">[root@localhost ~]<span class="comment"># docker run -d -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 --name db_mysql_wordpress mysql</span></span><br><span class="line"></span><br><span class="line">进入mysql容器,按题目要求创建数据库和表</span><br><span class="line">[root@localhost ~]<span class="comment"># docker exec -it db_mysql_wordpress /bin/bash</span></span><br><span class="line">bash-4.4<span class="comment"># mysql -uroot -p123456</span></span><br><span class="line"></span><br><span class="line">mysql&gt; create database SZPT;</span><br><span class="line">mysql&gt; use SZPT;</span><br><span class="line">mysql&gt; create table Cloud(stuno varchar(8),stuname varchar(8),stulaojia varchar(8),stuage varchar(2));</span><br><span class="line">mysql&gt; insert into Cloud(stuno,stuname,stulaojia,stuage) values</span><br><span class="line">    -&gt; (<span class="string">&#x27;20940702&#x27;</span>,<span class="string">&#x27;xiaolai&#x27;</span>,<span class="string">&#x27;meizhou&#x27;</span>,<span class="string">&#x27;20&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;20940715&#x27;</span>,<span class="string">&#x27;xiaoding&#x27;</span>,<span class="string">&#x27;hunan&#x27;</span>,<span class="string">&#x27;20&#x27;</span>),    </span><br><span class="line">    -&gt; (<span class="string">&#x27;20940700&#x27;</span>,<span class="string">&#x27;zhiquan&#x27;</span>,<span class="string">&#x27;maoming&#x27;</span>,<span class="string">&#x27;21&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;20940688&#x27;</span>,<span class="string">&#x27;youjun&#x27;</span>,<span class="string">&#x27;shenzhen&#x27;</span>,<span class="string">&#x27;20&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;20940676&#x27;</span>,<span class="string">&#x27;xiaopan&#x27;</span>,<span class="string">&#x27;zhuhai&#x27;</span>,<span class="string">&#x27;20&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;18240683&#x27;</span>,<span class="string">&#x27;xixi&#x27;</span>,<span class="string">&#x27;shenzhen&#x27;</span>,<span class="string">&#x27;22&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;20940680&#x27;</span>,<span class="string">&#x27;cc&#x27;</span>,<span class="string">&#x27;shenzhen&#x27;</span>,<span class="string">&#x27;19&#x27;</span>);</span><br><span class="line">mysql&gt; select * from Cloud <span class="built_in">where</span> Cloud.stuage=<span class="string">&#x27;20&#x27;</span>;<span class="string">&#x27;本人年龄&#x27;</span></span><br><span class="line">    </span><br><span class="line">退出(<span class="built_in">exit</span>)</span><br><span class="line">导出<span class="string">&#x27;mysql&#x27;</span>映像tar包</span><br><span class="line">[root@localhost ~]<span class="comment"># docker save -o mysql.tar mysql</span></span><br></pre></td></tr></table></figure><h5 id="安装-wordpress"><a href="#安装-wordpress" class="headerlink" title="安装 wordpress"></a>安装 wordpress</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">拉取wordpress映像</span><br><span class="line">[root@localhost ~]<span class="comment"># docker pull wordpress</span></span><br><span class="line"></span><br><span class="line">创建wordpress容器</span><br><span class="line">[root@localhost ~]<span class="comment"># docker run -d --link db_mysql_wordpress -p 9090:80 --name wb_wordpress wordpress</span></span><br><span class="line"></span><br><span class="line">关闭防火墙</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl stop firewalld</span></span><br></pre></td></tr></table></figure><p><strong>浏览器访问即可</strong></p><p>IP地址/9090</p><img src="/2022/07/01/Cloud%20Container/image-20220709205122302.png" alt="image-20220709205122302" style="zoom:50%;"><p>后续根据需求 post 博客即可~</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;初始快照&lt;/code&gt;&lt;/p&gt;
&lt;h5 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h5&gt;&lt;p&gt;①部署 IP，能联通外网&lt;/p&gt;
&lt;p&gt;②清除防火墙规则&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# iptables -F&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# iptables -X&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# iptables -Z&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# /usr/sbin/iptables-save&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# vim /etc/selinux/config &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELINUX=disabled		将enforcing改成disabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost ~]&lt;span class=&quot;comment&quot;&gt;# reboot&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="云原生" scheme="https://laijune.github.io/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/"/>
    
    
    <category term="Docker" scheme="https://laijune.github.io/tags/Docker/"/>
    
  </entry>
  
</feed>
